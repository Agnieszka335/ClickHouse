(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function ES(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cp={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function pR(){if(tT)return Gl;tT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Gl.Fragment=e,Gl.jsx=t,Gl.jsxs=t,Gl}var nT;function mR(){return nT||(nT=1,Cp.exports=pR()),Cp.exports}var w=mR(),Ip={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function gR(){if(iT)return be;iT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,L={};function $(O,ee,ce){this.props=O,this.context=ee,this.refs=L,this.updater=ce||P}$.prototype.isReactComponent={},$.prototype.setState=function(O,ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ee,"setState")},$.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ne(){}ne.prototype=$.prototype;function Z(O,ee,ce){this.props=O,this.context=ee,this.refs=L,this.updater=ce||P}var ae=Z.prototype=new ne;ae.constructor=Z,F(ae,$.prototype),ae.isPureReactComponent=!0;var X=Array.isArray;function de(){}var M={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function b(O,ee,ce){var pe=ce.ref;return{$$typeof:n,type:O,key:ee,ref:pe!==void 0?pe:null,props:ce}}function U(O,ee){return b(O.type,ee,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function q(O){var ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ce){return ee[ce]})}var D=/\/+/g;function xe(O,ee){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):ee.toString(36)}function me(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(de,de):(O.status="pending",O.then(function(ee){O.status==="pending"&&(O.status="fulfilled",O.value=ee)},function(ee){O.status==="pending"&&(O.status="rejected",O.reason=ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function H(O,ee,ce,pe,Ie){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var Ke=!1;if(O===null)Ke=!0;else switch(Pe){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(O.$$typeof){case n:case e:Ke=!0;break;case v:return Ke=O._init,H(Ke(O._payload),ee,ce,pe,Ie)}}if(Ke)return Ie=Ie(O),Ke=pe===""?"."+xe(O,0):pe,X(Ie)?(ce="",Ke!=null&&(ce=Ke.replace(D,"$&/")+"/"),H(Ie,ee,ce,"",function(Cr){return Cr})):Ie!=null&&(V(Ie)&&(Ie=U(Ie,ce+(Ie.key==null||O&&O.key===Ie.key?"":(""+Ie.key).replace(D,"$&/")+"/")+Ke)),ee.push(Ie)),1;Ke=0;var kt=pe===""?".":pe+":";if(X(O))for(var ft=0;ft<O.length;ft++)pe=O[ft],Pe=kt+xe(pe,ft),Ke+=H(pe,ee,ce,Pe,Ie);else if(ft=R(O),typeof ft=="function")for(O=ft.call(O),ft=0;!(pe=O.next()).done;)pe=pe.value,Pe=kt+xe(pe,ft++),Ke+=H(pe,ee,ce,Pe,Ie);else if(Pe==="object"){if(typeof O.then=="function")return H(me(O),ee,ce,pe,Ie);throw ee=String(O),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function oe(O,ee,ce){if(O==null)return O;var pe=[],Ie=0;return H(O,pe,"","",function(Pe){return ee.call(ce,Pe,Ie++)}),pe}function le(O){if(O._status===-1){var ee=O._result;ee=ee(),ee.then(function(ce){(O._status===0||O._status===-1)&&(O._status=1,O._result=ce)},function(ce){(O._status===0||O._status===-1)&&(O._status=2,O._result=ce)}),O._status===-1&&(O._status=0,O._result=ee)}if(O._status===1)return O._result.default;throw O._result}var Te=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ve={map:oe,forEach:function(O,ee,ce){oe(O,function(){ee.apply(this,arguments)},ce)},count:function(O){var ee=0;return oe(O,function(){ee++}),ee},toArray:function(O){return oe(O,function(ee){return ee})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return be.Activity=T,be.Children=Ve,be.Component=$,be.Fragment=t,be.Profiler=o,be.PureComponent=Z,be.StrictMode=i,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},be.cache=function(O){return function(){return O.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(O,ee,ce){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=F({},O.props),Ie=O.key;if(ee!=null)for(Pe in ee.key!==void 0&&(Ie=""+ee.key),ee)!x.call(ee,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&ee.ref===void 0||(pe[Pe]=ee[Pe]);var Pe=arguments.length-2;if(Pe===1)pe.children=ce;else if(1<Pe){for(var Ke=Array(Pe),kt=0;kt<Pe;kt++)Ke[kt]=arguments[kt+2];pe.children=Ke}return b(O.type,Ie,pe)},be.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},be.createElement=function(O,ee,ce){var pe,Ie={},Pe=null;if(ee!=null)for(pe in ee.key!==void 0&&(Pe=""+ee.key),ee)x.call(ee,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ie[pe]=ee[pe]);var Ke=arguments.length-2;if(Ke===1)Ie.children=ce;else if(1<Ke){for(var kt=Array(Ke),ft=0;ft<Ke;ft++)kt[ft]=arguments[ft+2];Ie.children=kt}if(O&&O.defaultProps)for(pe in Ke=O.defaultProps,Ke)Ie[pe]===void 0&&(Ie[pe]=Ke[pe]);return b(O,Pe,Ie)},be.createRef=function(){return{current:null}},be.forwardRef=function(O){return{$$typeof:d,render:O}},be.isValidElement=V,be.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:le}},be.memo=function(O,ee){return{$$typeof:h,type:O,compare:ee===void 0?null:ee}},be.startTransition=function(O){var ee=M.T,ce={};M.T=ce;try{var pe=O(),Ie=M.S;Ie!==null&&Ie(ce,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(de,Te)}catch(Pe){Te(Pe)}finally{ee!==null&&ce.types!==null&&(ee.types=ce.types),M.T=ee}},be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},be.use=function(O){return M.H.use(O)},be.useActionState=function(O,ee,ce){return M.H.useActionState(O,ee,ce)},be.useCallback=function(O,ee){return M.H.useCallback(O,ee)},be.useContext=function(O){return M.H.useContext(O)},be.useDebugValue=function(){},be.useDeferredValue=function(O,ee){return M.H.useDeferredValue(O,ee)},be.useEffect=function(O,ee){return M.H.useEffect(O,ee)},be.useEffectEvent=function(O){return M.H.useEffectEvent(O)},be.useId=function(){return M.H.useId()},be.useImperativeHandle=function(O,ee,ce){return M.H.useImperativeHandle(O,ee,ce)},be.useInsertionEffect=function(O,ee){return M.H.useInsertionEffect(O,ee)},be.useLayoutEffect=function(O,ee){return M.H.useLayoutEffect(O,ee)},be.useMemo=function(O,ee){return M.H.useMemo(O,ee)},be.useOptimistic=function(O,ee){return M.H.useOptimistic(O,ee)},be.useReducer=function(O,ee,ce){return M.H.useReducer(O,ee,ce)},be.useRef=function(O){return M.H.useRef(O)},be.useState=function(O){return M.H.useState(O)},be.useSyncExternalStore=function(O,ee,ce){return M.H.useSyncExternalStore(O,ee,ce)},be.useTransition=function(){return M.H.useTransition()},be.version="19.2.4",be}var sT;function Pm(){return sT||(sT=1,Ip.exports=gR()),Ip.exports}var Fe=Pm();const yR=ES(Fe);var wp={exports:{}},Hl={},Rp={exports:{}},bp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function _R(){return rT||(rT=1,(function(n){function e(H,oe){var le=H.length;H.push(oe);e:for(;0<le;){var Te=le-1>>>1,Ve=H[Te];if(0<o(Ve,oe))H[Te]=oe,H[le]=Ve,le=Te;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var oe=H[0],le=H.pop();if(le!==oe){H[0]=le;e:for(var Te=0,Ve=H.length,O=Ve>>>1;Te<O;){var ee=2*(Te+1)-1,ce=H[ee],pe=ee+1,Ie=H[pe];if(0>o(ce,le))pe<Ve&&0>o(Ie,ce)?(H[Te]=Ie,H[pe]=le,Te=pe):(H[Te]=ce,H[ee]=le,Te=ee);else if(pe<Ve&&0>o(Ie,le))H[Te]=Ie,H[pe]=le,Te=pe;else break e}}return oe}function o(H,oe){var le=H.sortIndex-oe.sortIndex;return le!==0?le:H.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],h=[],v=1,T=null,S=3,R=!1,P=!1,F=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ae(H){for(var oe=t(h);oe!==null;){if(oe.callback===null)i(h);else if(oe.startTime<=H)i(h),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(h)}}function X(H){if(F=!1,ae(H),!P)if(t(g)!==null)P=!0,de||(de=!0,q());else{var oe=t(h);oe!==null&&me(X,oe.startTime-H)}}var de=!1,M=-1,x=5,b=-1;function U(){return L?!0:!(n.unstable_now()-b<x)}function V(){if(L=!1,de){var H=n.unstable_now();b=H;var oe=!0;try{e:{P=!1,F&&(F=!1,ne(M),M=-1),R=!0;var le=S;try{t:{for(ae(H),T=t(g);T!==null&&!(T.expirationTime>H&&U());){var Te=T.callback;if(typeof Te=="function"){T.callback=null,S=T.priorityLevel;var Ve=Te(T.expirationTime<=H);if(H=n.unstable_now(),typeof Ve=="function"){T.callback=Ve,ae(H),oe=!0;break t}T===t(g)&&i(g),ae(H)}else i(g);T=t(g)}if(T!==null)oe=!0;else{var O=t(h);O!==null&&me(X,O.startTime-H),oe=!1}}break e}finally{T=null,S=le,R=!1}oe=void 0}}finally{oe?q():de=!1}}}var q;if(typeof Z=="function")q=function(){Z(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,xe=D.port2;D.port1.onmessage=V,q=function(){xe.postMessage(null)}}else q=function(){$(V,0)};function me(H,oe){M=$(function(){H(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(H){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var le=S;S=oe;try{return H()}finally{S=le}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=S;S=H;try{return oe()}finally{S=le}},n.unstable_scheduleCallback=function(H,oe,le){var Te=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Te+le:Te):le=Te,H){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=le+Ve,H={id:v++,callback:oe,priorityLevel:H,startTime:le,expirationTime:Ve,sortIndex:-1},le>Te?(H.sortIndex=le,e(h,H),t(g)===null&&H===t(h)&&(F?(ne(M),M=-1):F=!0,me(X,le-Te))):(H.sortIndex=Ve,e(g,H),P||R||(P=!0,de||(de=!0,q()))),H},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(H){var oe=S;return function(){var le=S;S=oe;try{return H.apply(this,arguments)}finally{S=le}}}})(bp)),bp}var oT;function vR(){return oT||(oT=1,Rp.exports=_R()),Rp.exports}var Np={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function TR(){if(aT)return en;aT=1;var n=Pm();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(g,h,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:h,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(g,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(g,h,null,v)},en.flushSync=function(g){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=v,i.d.f()}},en.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},en.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},en.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var v=h.as,T=d(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},en.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=d(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},en.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,T=d(v,h.crossOrigin);i.d.L(g,v,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},en.preloadModule=function(g,h){if(typeof g=="string")if(h){var v=d(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},en.requestFormReset=function(g){i.d.r(g)},en.unstable_batchedUpdates=function(g,h){return g(h)},en.useFormState=function(g,h,v){return u.H.useFormState(g,h,v)},en.useFormStatus=function(){return u.H.useHostTransitionStatus()},en.version="19.2.4",en}var lT;function ER(){if(lT)return Np.exports;lT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Np.exports=TR(),Np.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function SR(){if(uT)return Hl;uT=1;var n=vR(),e=Pm(),t=ER();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function g(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return g(y),s;if(_===c)return g(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,I=y.child;I;){if(I===l){A=!0,l=y,c=_;break}if(I===c){A=!0,c=y,l=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===l){A=!0,l=_,c=y;break}if(I===c){A=!0,c=_,l=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case $:return"Profiler";case L:return"StrictMode";case X:return"Suspense";case de:return"SuspenseList";case b:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case Z:return s.displayName||"Context";case ne:return(s._context.displayName||"Context")+".Consumer";case ae:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:xe(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return xe(s(r))}catch{}}return null}var me=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Te=[],Ve=-1;function O(s){return{current:s}}function ee(s){0>Ve||(s.current=Te[Ve],Te[Ve]=null,Ve--)}function ce(s,r){Ve++,Te[Ve]=s.current,s.current=r}var pe=O(null),Ie=O(null),Pe=O(null),Ke=O(null);function kt(s,r){switch(ce(Pe,r),ce(Ie,s),ce(pe,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Cv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Cv(r),s=Iv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(pe),ce(pe,s)}function ft(){ee(pe),ee(Ie),ee(Pe)}function Cr(s){s.memoizedState!==null&&ce(Ke,s);var r=pe.current,l=Iv(r,s.type);r!==l&&(ce(Ie,s),ce(pe,l))}function po(s){Ie.current===s&&(ee(pe),ee(Ie)),Ke.current===s&&(ee(Ke),zl._currentValue=le)}var mo,go;function pi(s){if(mo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);mo=r&&r[1]||"",go=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mo+s+go}var za=!1;function Ir(s,r){if(!s||za)return"";za=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var Y=W}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(W){Y=W}s.call(ie.prototype)}}else{try{throw Error()}catch(W){Y=W}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var k=A.split(`
`),J=I.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===J.length)for(c=k.length-1,y=J.length-1;1<=c&&0<=y&&k[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==J[y]){var j=`
`+k[c].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=c&&0<=y);break}}}finally{za=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?pi(l):""}function Fa(s,r){switch(s.tag){case 26:case 27:case 5:return pi(s.type);case 16:return pi("Lazy");case 13:return s.child!==r&&r!==null?pi("Suspense Fallback"):pi("Suspense");case 19:return pi("SuspenseList");case 0:case 15:return Ir(s.type,!1);case 11:return Ir(s.type.render,!1);case 1:return Ir(s.type,!0);case 31:return pi("Activity");default:return""}}function qa(s){try{var r="",l=null;do r+=Fa(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var St=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,Cs=n.unstable_cancelCallback,wd=n.unstable_shouldYield,Nu=n.unstable_requestPaint,ln=n.unstable_now,wr=n.unstable_getCurrentPriorityLevel,Ba=n.unstable_ImmediatePriority,Ga=n.unstable_UserBlockingPriority,Is=n.unstable_NormalPriority,Rd=n.unstable_LowPriority,xu=n.unstable_IdlePriority,Mu=n.log,Du=n.unstable_setDisableYieldValue,Xn=null,Kt=null;function Pn(s){if(typeof Mu=="function"&&Du(s),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Xn,s)}catch{}}var yt=Math.clz32?Math.clz32:ku,Pu=Math.log,yo=Math.LN2;function ku(s){return s>>>=0,s===0?32:31-(Pu(s)/yo|0)|0}var mi=256,Rr=262144,At=4194304;function gi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function yi(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=gi(c):(A&=I,A!==0?y=gi(A):l||(l=I&~s,l!==0&&(y=gi(l))))):(I=c&~_,I!==0?y=gi(I):A!==0?y=gi(A):l||(l=c&~s,l!==0&&(y=gi(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function Wn(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function bd(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vu(){var s=At;return At<<=1,(At&62914560)===0&&(At=4194304),s}function _i(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function br(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Nd(s,r,l,c,y,_){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var I=s.entanglements,k=s.expirationTimes,J=s.hiddenUpdates;for(l=A&~l;0<l;){var j=31-yt(l),ie=1<<j;I[j]=0,k[j]=-1;var Y=J[j];if(Y!==null)for(J[j]=null,j=0;j<Y.length;j++){var W=Y[j];W!==null&&(W.lane&=-536870913)}l&=~ie}c!==0&&Nr(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function Nr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-yt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ha(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-yt(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function Ka(s,r){var l=r&-r;return l=(l&42)!==0?1:xr(l),(l&(s.suspendedLanes|r))!==0?0:l}function xr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ki(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Uu(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:$v(s.type))}function Zn(s,r){var l=oe.p;try{return oe.p=s,r()}finally{oe.p=l}}var jn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+jn,Ft="__reactProps$"+jn,vi="__reactContainer$"+jn,_o="__reactEvents$"+jn,xd="__reactListeners$"+jn,Lu="__reactHandles$"+jn,Ou="__reactResources$"+jn,Ti="__reactMarker$"+jn;function vo(s){delete s[Ct],delete s[Ft],delete s[_o],delete s[xd],delete s[Lu]}function Ei(s){var r=s[Ct];if(r)return r;for(var l=s.parentNode;l;){if(r=l[vi]||l[Ct]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Dv(s);s!==null;){if(l=s[Ct])return l;s=Dv(s)}return r}s=l,l=s.parentNode}return null}function kn(s){if(s=s[Ct]||s[vi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function An(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Si(s){var r=s[Ou];return r||(r=s[Ou]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function It(s){s[Ti]=!0}var Ja=new Set,Ya={};function Ai(s,r){Ci(s,r),Ci(s+"Capture",r)}function Ci(s,r){for(Ya[s]=r,s=0;s<r.length;s++)Ja.add(r[s])}var $a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qa={},Xa={};function zu(s){return St.call(Xa,s)?!0:St.call(Qa,s)?!1:$a.test(s)?Xa[s]=!0:(Qa[s]=!0,!1)}function To(s,r,l){if(zu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Cn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function wt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function qt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ws(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Wa(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function je(s){if(!s._valueTracker){var r=ws(s)?"checked":"value";s._valueTracker=Wa(s,r,""+s[r])}}function Mr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=ws(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Ii(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Dr=/[\n"\\]/g;function hn(s){return s.replace(Dr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Eo(s,r,l,c,y,_,A,I){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+qt(r)):s.value!==""+qt(r)&&(s.value=""+qt(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?Za(s,A,qt(r)):l!=null?Za(s,A,qt(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+qt(I):s.removeAttribute("name")}function Fu(s,r,l,c,y,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){je(s);return}l=l!=null?""+qt(l):"",r=r!=null?""+qt(r):l,I||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),je(s)}function Za(s,r,l){r==="number"&&Ii(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Rs(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+qt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function qu(s,r,l){if(r!=null&&(r=""+qt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+qt(l):""}function bs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(me(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=qt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),je(s)}function pn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ja(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Bu.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function el(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&ja(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&ja(s,_,r[_])}function So(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ao(s){return Ns.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ei(){}var tl=null;function Vn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xs=null,wi=null;function Pr(s){var r=kn(s);if(r&&(s=r.stateNode)){var l=s[Ft]||null;e:switch(s=r.stateNode,r.type){case"input":if(Eo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+hn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Ft]||null;if(!y)throw Error(i(90));Eo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Mr(c)}break e;case"textarea":qu(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Rs(s,!!l.multiple,r,!1)}}}var Co=!1;function Ms(s,r,l){if(Co)return s(r,l);Co=!0;try{var c=s(r);return c}finally{if(Co=!1,(xs!==null||wi!==null)&&(Uc(),xs&&(r=xs,s=wi,wi=xs=null,Pr(r),s)))for(r=0;r<s.length;r++)Pr(s[r])}}function ti(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Ft]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kr=!1;if(Un)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){kr=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{kr=!1}var Ri=null,nl=null,Vr=null;function il(){if(Vr)return Vr;var s,r=nl,l=r.length,c,y="value"in Ri?Ri.value:Ri.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[_-c];c++);return Vr=y.slice(s,1<c?1-c:void 0)}function Ur(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ji(){return!0}function ni(){return!1}function Jt(s){function r(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(l=s[I],this[I]=l?l(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ji:ni,this.isPropagationStopped=ni,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ji)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ji)},persist:function(){},isPersistent:Ji}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Jt(Yi),Ds=T({},Yi,{view:0,detail:0}),sl=Jt(Ds),Ps,Io,Ni,wo=T({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ni&&(Ni&&s.type==="mousemove"?(Ps=s.screenX-Ni.screenX,Io=s.screenY-Ni.screenY):Io=Ps=0,Ni=s),Ps)},movementY:function(s){return"movementY"in s?s.movementY:Io}}),rl=Jt(wo),Lr=T({},wo,{dataTransfer:0}),Hu=Jt(Lr),Ku=T({},Ds,{relatedTarget:0}),Or=Jt(Ku),ol=T({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ju=Jt(ol),Ro=T({},Yi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Yu=Jt(Ro),$u=T({},Yi,{data:0}),xi=Jt($u),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Wu[s])?!!r[s]:!1}function ks(){return Zu}var un=T({},Ds,{key:function(s){if(s.key){var r=Qu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ur(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Xu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(s){return s.type==="keypress"?Ur(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ur(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ju=Jt(un),ec=T({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$i=Jt(ec),m=T({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),E=Jt(m),C=T({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Jt(C),G=T({},wo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Jt(G),ue=T({},Yi,{newState:0,oldState:0}),Me=Jt(ue),_t=[9,13,27,32],Xe=Un&&"CompositionEvent"in window,dt=null;Un&&"documentMode"in document&&(dt=document.documentMode);var Ln=Un&&"TextEvent"in window&&!dt,Mi=Un&&(!Xe||dt&&8<dt&&11>=dt),ii=" ",si=!1;function zr(s,r){switch(s){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var No=!1;function OI(s,r){switch(s){case"compositionend":return bo(r);case"keypress":return r.which!==32?null:(si=!0,ii);case"textInput":return s=r.data,s===ii&&si?null:s;default:return null}}function zI(s,r){if(No)return s==="compositionend"||!Xe&&zr(s,r)?(s=il(),Vr=nl=Ri=null,No=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Mi&&r.locale!=="ko"?null:r.data;default:return null}}var FI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!FI[s.type]:r==="textarea"}function Ug(s,r,l,c){xs?wi?wi.push(c):wi=[c]:xs=c,r=Gc(r,"onChange"),0<r.length&&(l=new bi("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var al=null,ll=null;function qI(s){_v(s,0)}function tc(s){var r=An(s);if(Mr(r))return s}function Lg(s,r){if(s==="change")return r}var Og=!1;if(Un){var Md;if(Un){var Dd="oninput"in document;if(!Dd){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),Dd=typeof zg.oninput=="function"}Md=Dd}else Md=!1;Og=Md&&(!document.documentMode||9<document.documentMode)}function Fg(){al&&(al.detachEvent("onpropertychange",qg),ll=al=null)}function qg(s){if(s.propertyName==="value"&&tc(ll)){var r=[];Ug(r,ll,s,Vn(s)),Ms(qI,r)}}function BI(s,r,l){s==="focusin"?(Fg(),al=r,ll=l,al.attachEvent("onpropertychange",qg)):s==="focusout"&&Fg()}function GI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return tc(ll)}function HI(s,r){if(s==="click")return tc(r)}function KI(s,r){if(s==="input"||s==="change")return tc(r)}function JI(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var In=typeof Object.is=="function"?Object.is:JI;function ul(s,r){if(In(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!St.call(r,y)||!In(s[y],r[y]))return!1}return!0}function Bg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Gg(s,r){var l=Bg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bg(l)}}function Hg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Hg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Kg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Ii(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Ii(s.document)}return r}function Pd(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var YI=Un&&"documentMode"in document&&11>=document.documentMode,xo=null,kd=null,cl=null,Vd=!1;function Jg(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Vd||xo==null||xo!==Ii(c)||(c=xo,"selectionStart"in c&&Pd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),cl&&ul(cl,c)||(cl=c,c=Gc(kd,"onSelect"),0<c.length&&(r=new bi("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=xo)))}function Fr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Mo={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Ud={},Yg={};Un&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function qr(s){if(Ud[s])return Ud[s];if(!Mo[s])return s;var r=Mo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Yg)return Ud[s]=r[l];return s}var $g=qr("animationend"),Qg=qr("animationiteration"),Xg=qr("animationstart"),$I=qr("transitionrun"),QI=qr("transitionstart"),XI=qr("transitioncancel"),Wg=qr("transitionend"),Zg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function ri(s,r){Zg.set(s,r),Ai(r,[s])}var nc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},On=[],Do=0,Od=0;function ic(){for(var s=Do,r=Od=Do=0;r<s;){var l=On[r];On[r++]=null;var c=On[r];On[r++]=null;var y=On[r];On[r++]=null;var _=On[r];if(On[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&jg(l,y,_)}}function sc(s,r,l,c){On[Do++]=s,On[Do++]=r,On[Do++]=l,On[Do++]=c,Od|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function zd(s,r,l,c){return sc(s,r,l,c),rc(s)}function Br(s,r){return sc(s,null,null,r),rc(s)}function jg(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-yt(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function rc(s){if(50<Dl)throw Dl=0,$h=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Po={};function WI(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(s,r,l,c){return new WI(s,r,l,c)}function Fd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,r){var l=s.alternate;return l===null?(l=wn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function ey(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function oc(s,r,l,c,y,_){var A=0;if(c=s,typeof s=="function")Fd(s)&&(A=1);else if(typeof s=="string")A=nR(s,l,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case b:return s=wn(31,l,r,y),s.elementType=b,s.lanes=_,s;case F:return Gr(l.children,y,_,r);case L:A=8,y|=24;break;case $:return s=wn(12,l,r,y|2),s.elementType=$,s.lanes=_,s;case X:return s=wn(13,l,r,y),s.elementType=X,s.lanes=_,s;case de:return s=wn(19,l,r,y),s.elementType=de,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Z:A=10;break e;case ne:A=9;break e;case ae:A=11;break e;case M:A=14;break e;case x:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=wn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function Gr(s,r,l,c){return s=wn(7,s,c,r),s.lanes=l,s}function qd(s,r,l){return s=wn(6,s,null,r),s.lanes=l,s}function ty(s){var r=wn(18,null,null,0);return r.stateNode=s,r}function Bd(s,r,l){return r=wn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var ny=new WeakMap;function zn(s,r){if(typeof s=="object"&&s!==null){var l=ny.get(s);return l!==void 0?l:(r={value:s,source:r,stack:qa(r)},ny.set(s,r),r)}return{value:s,source:r,stack:qa(r)}}var ko=[],Vo=0,ac=null,fl=0,Fn=[],qn=0,Vs=null,Di=1,Pi="";function Xi(s,r){ko[Vo++]=fl,ko[Vo++]=ac,ac=s,fl=r}function iy(s,r,l){Fn[qn++]=Di,Fn[qn++]=Pi,Fn[qn++]=Vs,Vs=s;var c=Di;s=Pi;var y=32-yt(c)-1;c&=~(1<<y),l+=1;var _=32-yt(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Di=1<<32-yt(r)+y|l<<y|c,Pi=_+s}else Di=1<<_|l<<y|c,Pi=s}function Gd(s){s.return!==null&&(Xi(s,1),iy(s,1,0))}function Hd(s){for(;s===ac;)ac=ko[--Vo],ko[Vo]=null,fl=ko[--Vo],ko[Vo]=null;for(;s===Vs;)Vs=Fn[--qn],Fn[qn]=null,Pi=Fn[--qn],Fn[qn]=null,Di=Fn[--qn],Fn[qn]=null}function sy(s,r){Fn[qn++]=Di,Fn[qn++]=Pi,Fn[qn++]=Vs,Di=r.id,Pi=r.overflow,Vs=s}var Yt=null,at=null,He=!1,Us=null,Bn=!1,Kd=Error(i(519));function Ls(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dl(zn(r,s)),Kd}function ry(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[Ct]=s,r[Ft]=c,l){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(l=0;l<kl.length;l++)Le(kl[l],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Fu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),bs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Sv(r.textContent,l)?(c.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),c.onScroll!=null&&Le("scroll",r),c.onScrollEnd!=null&&Le("scrollend",r),c.onClick!=null&&(r.onclick=ei),r=!0):r=!1,r||Ls(s,!0)}function oy(s){for(Yt=s.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Yt=Yt.return}}function Uo(s){if(s!==Yt)return!1;if(!He)return oy(s),He=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||up(s.type,s.memoizedProps)),l=!l),l&&at&&Ls(s),oy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));at=Mv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));at=Mv(s)}else r===27?(r=at,Ws(s.type)?(s=pp,pp=null,at=s):at=r):at=Yt?Hn(s.stateNode.nextSibling):null;return!0}function Hr(){at=Yt=null,He=!1}function Jd(){var s=Us;return s!==null&&(_n===null?_n=s:_n.push.apply(_n,s),Us=null),s}function dl(s){Us===null?Us=[s]:Us.push(s)}var Yd=O(null),Kr=null,Wi=null;function Os(s,r,l){ce(Yd,r._currentValue),r._currentValue=l}function Zi(s){s._currentValue=Yd.current,ee(Yd)}function $d(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Qd(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var k=0;k<r.length;k++)if(I.context===r[k]){_.lanes|=l,I=_.alternate,I!==null&&(I.lanes|=l),$d(_.return,l,s),c||(A=null);break e}_=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),$d(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Lo(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;In(y.pendingProps.value,A.value)||(s!==null?s.push(I):s=[I])}}else if(y===Ke.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(zl):s=[zl])}y=y.return}s!==null&&Qd(r,s,l,c),r.flags|=262144}function lc(s){for(s=s.firstContext;s!==null;){if(!In(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jr(s){Kr=s,Wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $t(s){return ay(Kr,s)}function uc(s,r){return Kr===null&&Jr(s),ay(s,r)}function ay(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Wi===null){if(s===null)throw Error(i(308));Wi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Wi=Wi.next=r;return l}var ZI=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},jI=n.unstable_scheduleCallback,ew=n.unstable_NormalPriority,Rt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new ZI,data:new Map,refCount:0}}function hl(s){s.refCount--,s.refCount===0&&jI(ew,function(){s.controller.abort()})}var pl=null,Wd=0,Oo=0,zo=null;function tw(s,r){if(pl===null){var l=pl=[];Wd=0,Oo=ep(),zo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Wd++,r.then(ly,ly),r}function ly(){if(--Wd===0&&pl!==null){zo!==null&&(zo.status="fulfilled");var s=pl;pl=null,Oo=0,zo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function nw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var uy=H.S;H.S=function(s,r){J_=ln(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&tw(s,r),uy!==null&&uy(s,r)};var Yr=O(null);function Zd(){var s=Yr.current;return s!==null?s:ot.pooledCache}function cc(s,r){r===null?ce(Yr,Yr.current):ce(Yr,r.pool)}function cy(){var s=Zd();return s===null?null:{parent:Rt._currentValue,pool:s}}var Fo=Error(i(460)),jd=Error(i(474)),fc=Error(i(542)),dc={then:function(){}};function fy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ei,ei),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,py(s),s;default:if(typeof r.status=="string")r.then(ei,ei);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,py(s),s}throw Qr=r,Fo}}function $r(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Qr=l,Fo):l}}var Qr=null;function hy(){if(Qr===null)throw Error(i(459));var s=Qr;return Qr=null,s}function py(s){if(s===Fo||s===fc)throw Error(i(483))}var qo=null,ml=0;function hc(s){var r=ml;return ml+=1,qo===null&&(qo=[]),dy(qo,s,r)}function gl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function pc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function my(s){function r(B,z){if(s){var K=B.deletions;K===null?(B.deletions=[z],B.flags|=16):K.push(z)}}function l(B,z){if(!s)return null;for(;z!==null;)r(B,z),z=z.sibling;return null}function c(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function y(B,z){return B=Qi(B,z),B.index=0,B.sibling=null,B}function _(B,z,K){return B.index=K,s?(K=B.alternate,K!==null?(K=K.index,K<z?(B.flags|=67108866,z):K):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function A(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function I(B,z,K,te){return z===null||z.tag!==6?(z=qd(K,B.mode,te),z.return=B,z):(z=y(z,K),z.return=B,z)}function k(B,z,K,te){var ve=K.type;return ve===F?j(B,z,K.props.children,te,K.key):z!==null&&(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&$r(ve)===z.type)?(z=y(z,K.props),gl(z,K),z.return=B,z):(z=oc(K.type,K.key,K.props,null,B.mode,te),gl(z,K),z.return=B,z)}function J(B,z,K,te){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=Bd(K,B.mode,te),z.return=B,z):(z=y(z,K.children||[]),z.return=B,z)}function j(B,z,K,te,ve){return z===null||z.tag!==7?(z=Gr(K,B.mode,te,ve),z.return=B,z):(z=y(z,K),z.return=B,z)}function ie(B,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=qd(""+z,B.mode,K),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return K=oc(z.type,z.key,z.props,null,B.mode,K),gl(K,z),K.return=B,K;case P:return z=Bd(z,B.mode,K),z.return=B,z;case x:return z=$r(z),ie(B,z,K)}if(me(z)||q(z))return z=Gr(z,B.mode,K,null),z.return=B,z;if(typeof z.then=="function")return ie(B,hc(z),K);if(z.$$typeof===Z)return ie(B,uc(B,z),K);pc(B,z)}return null}function Y(B,z,K,te){var ve=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ve!==null?null:I(B,z,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return K.key===ve?k(B,z,K,te):null;case P:return K.key===ve?J(B,z,K,te):null;case x:return K=$r(K),Y(B,z,K,te)}if(me(K)||q(K))return ve!==null?null:j(B,z,K,te,null);if(typeof K.then=="function")return Y(B,z,hc(K),te);if(K.$$typeof===Z)return Y(B,z,uc(B,K),te);pc(B,K)}return null}function W(B,z,K,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(K)||null,I(z,B,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return B=B.get(te.key===null?K:te.key)||null,k(z,B,te,ve);case P:return B=B.get(te.key===null?K:te.key)||null,J(z,B,te,ve);case x:return te=$r(te),W(B,z,K,te,ve)}if(me(te)||q(te))return B=B.get(K)||null,j(z,B,te,ve,null);if(typeof te.then=="function")return W(B,z,K,hc(te),ve);if(te.$$typeof===Z)return W(B,z,K,uc(z,te),ve);pc(z,te)}return null}function ge(B,z,K,te){for(var ve=null,Ye=null,ye=z,ke=z=0,ze=null;ye!==null&&ke<K.length;ke++){ye.index>ke?(ze=ye,ye=null):ze=ye.sibling;var $e=Y(B,ye,K[ke],te);if($e===null){ye===null&&(ye=ze);break}s&&ye&&$e.alternate===null&&r(B,ye),z=_($e,z,ke),Ye===null?ve=$e:Ye.sibling=$e,Ye=$e,ye=ze}if(ke===K.length)return l(B,ye),He&&Xi(B,ke),ve;if(ye===null){for(;ke<K.length;ke++)ye=ie(B,K[ke],te),ye!==null&&(z=_(ye,z,ke),Ye===null?ve=ye:Ye.sibling=ye,Ye=ye);return He&&Xi(B,ke),ve}for(ye=c(ye);ke<K.length;ke++)ze=W(ye,B,ke,K[ke],te),ze!==null&&(s&&ze.alternate!==null&&ye.delete(ze.key===null?ke:ze.key),z=_(ze,z,ke),Ye===null?ve=ze:Ye.sibling=ze,Ye=ze);return s&&ye.forEach(function(nr){return r(B,nr)}),He&&Xi(B,ke),ve}function Se(B,z,K,te){if(K==null)throw Error(i(151));for(var ve=null,Ye=null,ye=z,ke=z=0,ze=null,$e=K.next();ye!==null&&!$e.done;ke++,$e=K.next()){ye.index>ke?(ze=ye,ye=null):ze=ye.sibling;var nr=Y(B,ye,$e.value,te);if(nr===null){ye===null&&(ye=ze);break}s&&ye&&nr.alternate===null&&r(B,ye),z=_(nr,z,ke),Ye===null?ve=nr:Ye.sibling=nr,Ye=nr,ye=ze}if($e.done)return l(B,ye),He&&Xi(B,ke),ve;if(ye===null){for(;!$e.done;ke++,$e=K.next())$e=ie(B,$e.value,te),$e!==null&&(z=_($e,z,ke),Ye===null?ve=$e:Ye.sibling=$e,Ye=$e);return He&&Xi(B,ke),ve}for(ye=c(ye);!$e.done;ke++,$e=K.next())$e=W(ye,B,ke,$e.value,te),$e!==null&&(s&&$e.alternate!==null&&ye.delete($e.key===null?ke:$e.key),z=_($e,z,ke),Ye===null?ve=$e:Ye.sibling=$e,Ye=$e);return s&&ye.forEach(function(hR){return r(B,hR)}),He&&Xi(B,ke),ve}function rt(B,z,K,te){if(typeof K=="object"&&K!==null&&K.type===F&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case R:e:{for(var ve=K.key;z!==null;){if(z.key===ve){if(ve=K.type,ve===F){if(z.tag===7){l(B,z.sibling),te=y(z,K.props.children),te.return=B,B=te;break e}}else if(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&$r(ve)===z.type){l(B,z.sibling),te=y(z,K.props),gl(te,K),te.return=B,B=te;break e}l(B,z);break}else r(B,z);z=z.sibling}K.type===F?(te=Gr(K.props.children,B.mode,te,K.key),te.return=B,B=te):(te=oc(K.type,K.key,K.props,null,B.mode,te),gl(te,K),te.return=B,B=te)}return A(B);case P:e:{for(ve=K.key;z!==null;){if(z.key===ve)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){l(B,z.sibling),te=y(z,K.children||[]),te.return=B,B=te;break e}else{l(B,z);break}else r(B,z);z=z.sibling}te=Bd(K,B.mode,te),te.return=B,B=te}return A(B);case x:return K=$r(K),rt(B,z,K,te)}if(me(K))return ge(B,z,K,te);if(q(K)){if(ve=q(K),typeof ve!="function")throw Error(i(150));return K=ve.call(K),Se(B,z,K,te)}if(typeof K.then=="function")return rt(B,z,hc(K),te);if(K.$$typeof===Z)return rt(B,z,uc(B,K),te);pc(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,z!==null&&z.tag===6?(l(B,z.sibling),te=y(z,K),te.return=B,B=te):(l(B,z),te=qd(K,B.mode,te),te.return=B,B=te),A(B)):l(B,z)}return function(B,z,K,te){try{ml=0;var ve=rt(B,z,K,te);return qo=null,ve}catch(ye){if(ye===Fo||ye===fc)throw ye;var Ye=wn(29,ye,null,B.mode);return Ye.lanes=te,Ye.return=B,Ye}finally{}}}var Xr=my(!0),gy=my(!1),zs=!1;function eh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function th(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Fs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function qs(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=rc(s),jg(s,null,l),r}return sc(s,c,r,l),rc(s)}function yl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ha(s,l)}}function nh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var ih=!1;function _l(){if(ih){var s=zo;if(s!==null)throw s}}function vl(s,r,l,c){ih=!1;var y=s.updateQueue;zs=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var k=I,J=k.next;k.next=null,A===null?_=J:A.next=J,A=k;var j=s.alternate;j!==null&&(j=j.updateQueue,I=j.lastBaseUpdate,I!==A&&(I===null?j.firstBaseUpdate=J:I.next=J,j.lastBaseUpdate=k))}if(_!==null){var ie=y.baseState;A=0,j=J=k=null,I=_;do{var Y=I.lane&-536870913,W=Y!==I.lane;if(W?(Oe&Y)===Y:(c&Y)===Y){Y!==0&&Y===Oo&&(ih=!0),j!==null&&(j=j.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ge=s,Se=I;Y=r;var rt=l;switch(Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){ie=ge.call(rt,ie,Y);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,Y=typeof ge=="function"?ge.call(rt,ie,Y):ge,Y==null)break e;ie=T({},ie,Y);break e;case 2:zs=!0}}Y=I.callback,Y!==null&&(s.flags|=64,W&&(s.flags|=8192),W=y.callbacks,W===null?y.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},j===null?(J=j=W,k=ie):j=j.next=W,A|=Y;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;W=I,I=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);j===null&&(k=ie),y.baseState=k,y.firstBaseUpdate=J,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),Js|=A,s.lanes=A,s.memoizedState=ie}}function yy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function _y(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)yy(l[s],r)}var Bo=O(null),mc=O(0);function vy(s,r){s=as,ce(mc,s),ce(Bo,r),as=s|r.baseLanes}function sh(){ce(mc,as),ce(Bo,Bo.current)}function rh(){as=mc.current,ee(Bo),ee(mc)}var Rn=O(null),Gn=null;function Bs(s){var r=s.alternate;ce(vt,vt.current&1),ce(Rn,s),Gn===null&&(r===null||Bo.current!==null||r.memoizedState!==null)&&(Gn=s)}function oh(s){ce(vt,vt.current),ce(Rn,s),Gn===null&&(Gn=s)}function Ty(s){s.tag===22?(ce(vt,vt.current),ce(Rn,s),Gn===null&&(Gn=s)):Gs()}function Gs(){ce(vt,vt.current),ce(Rn,Rn.current)}function bn(s){ee(Rn),Gn===s&&(Gn=null),ee(vt)}var vt=O(0);function gc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||dp(l)||hp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ji=0,De=null,it=null,bt=null,yc=!1,Go=!1,Wr=!1,_c=0,Tl=0,Ho=null,iw=0;function mt(){throw Error(i(321))}function ah(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!In(s[l],r[l]))return!1;return!0}function lh(s,r,l,c,y,_){return ji=_,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=s===null||s.memoizedState===null?i_:Ah,Wr=!1,_=l(c,y),Wr=!1,Go&&(_=Sy(r,l,c,y)),Ey(s),_}function Ey(s){H.H=Al;var r=it!==null&&it.next!==null;if(ji=0,bt=it=De=null,yc=!1,Tl=0,Ho=null,r)throw Error(i(300));s===null||Nt||(s=s.dependencies,s!==null&&lc(s)&&(Nt=!0))}function Sy(s,r,l,c){De=s;var y=0;do{if(Go&&(Ho=null),Tl=0,Go=!1,25<=y)throw Error(i(301));if(y+=1,bt=it=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=s_,_=r(l,c)}while(Go);return _}function sw(){var s=H.H,r=s.useState()[0];return r=typeof r.then=="function"?El(r):r,s=s.useState()[0],(it!==null?it.memoizedState:null)!==s&&(De.flags|=1024),r}function uh(){var s=_c!==0;return _c=0,s}function ch(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function fh(s){if(yc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}yc=!1}ji=0,bt=it=De=null,Go=!1,Tl=_c=0,Ho=null}function cn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?De.memoizedState=bt=s:bt=bt.next=s,bt}function Tt(){if(it===null){var s=De.alternate;s=s!==null?s.memoizedState:null}else s=it.next;var r=bt===null?De.memoizedState:bt.next;if(r!==null)bt=r,it=s;else{if(s===null)throw De.alternate===null?Error(i(467)):Error(i(310));it=s,s={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},bt===null?De.memoizedState=bt=s:bt=bt.next=s}return bt}function vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(s){var r=Tl;return Tl+=1,Ho===null&&(Ho=[]),s=dy(Ho,s,r),r=De,(bt===null?r.memoizedState:bt.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?i_:Ah),s}function Tc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return El(s);if(s.$$typeof===Z)return $t(s)}throw Error(i(438,String(s)))}function dh(s){var r=null,l=De.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=vc(),De.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=U;return r.index++,l}function es(s,r){return typeof r=="function"?r(s):r}function Ec(s){var r=Tt();return hh(r,it,s)}function hh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var I=A=null,k=null,J=r,j=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(Oe&ie)===ie:(ji&ie)===ie){var Y=J.revertLane;if(Y===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===Oo&&(j=!0);else if((ji&Y)===Y){J=J.next,Y===Oo&&(j=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(I=k=ie,A=_):k=k.next=ie,De.lanes|=Y,Js|=Y;ie=J.action,Wr&&l(_,ie),_=J.hasEagerState?J.eagerState:l(_,ie)}else Y={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(I=k=Y,A=_):k=k.next=Y,De.lanes|=ie,Js|=ie;J=J.next}while(J!==null&&J!==r);if(k===null?A=_:k.next=I,!In(_,s.memoizedState)&&(Nt=!0,j&&(l=zo,l!==null)))throw l;s.memoizedState=_,s.baseState=A,s.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function ph(s){var r=Tt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);In(_,r.memoizedState)||(Nt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function Ay(s,r,l){var c=De,y=Tt(),_=He;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!In((it||y).memoizedState,l);if(A&&(y.memoizedState=l,Nt=!0),y=y.queue,yh(wy.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||bt!==null&&bt.memoizedState.tag&1){if(c.flags|=2048,Ko(9,{destroy:void 0},Iy.bind(null,c,y,l,r),null),ot===null)throw Error(i(349));_||(ji&127)!==0||Cy(c,r,l)}return l}function Cy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=De.updateQueue,r===null?(r=vc(),De.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function Iy(s,r,l,c){r.value=l,r.getSnapshot=c,Ry(r)&&by(s)}function wy(s,r,l){return l(function(){Ry(r)&&by(s)})}function Ry(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!In(s,l)}catch{return!0}}function by(s){var r=Br(s,2);r!==null&&vn(r,s,2)}function mh(s){var r=cn();if(typeof s=="function"){var l=s;if(s=l(),Wr){Pn(!0);try{l()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:s},r}function Ny(s,r,l,c){return s.baseState=l,hh(s,it,typeof c=="function"?c:es)}function rw(s,r,l,c,y){if(Cc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};H.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,xy(r,_)):(_.next=l.next,r.pending=l.next=_)}}function xy(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=H.T,A={};H.T=A;try{var I=l(y,c),k=H.S;k!==null&&k(A,I),My(s,r,I)}catch(J){gh(s,r,J)}finally{_!==null&&A.types!==null&&(_.types=A.types),H.T=_}}else try{_=l(y,c),My(s,r,_)}catch(J){gh(s,r,J)}}function My(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Dy(s,r,c)},function(c){return gh(s,r,c)}):Dy(s,r,l)}function Dy(s,r,l){r.status="fulfilled",r.value=l,Py(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,xy(s,l)))}function gh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Py(r),r=r.next;while(r!==c)}s.action=null}function Py(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function ky(s,r){return r}function Vy(s,r){if(He){var l=ot.formState;if(l!==null){e:{var c=De;if(He){if(at){t:{for(var y=at,_=Bn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Hn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){at=Hn(y.nextSibling),c=y.data==="F!";break e}}Ls(c)}c=!1}c&&(r=l[0])}}return l=cn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ky,lastRenderedState:r},l.queue=c,l=e_.bind(null,De,c),c.dispatch=l,c=mh(!1),_=Sh.bind(null,De,!1,c.queue),c=cn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=rw.bind(null,De,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function Uy(s){var r=Tt();return Ly(r,it,s)}function Ly(s,r,l){if(r=hh(s,r,ky)[0],s=Ec(es)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=El(r)}catch(A){throw A===Fo?fc:A}else c=r;r=Tt();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(De.flags|=2048,Ko(9,{destroy:void 0},ow.bind(null,y,l),null)),[c,_,s]}function ow(s,r){s.action=r}function Oy(s){var r=Tt(),l=it;if(l!==null)return Ly(r,l,s);Tt(),r=r.memoizedState,l=Tt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function Ko(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=De.updateQueue,r===null&&(r=vc(),De.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function zy(){return Tt().memoizedState}function Sc(s,r,l,c){var y=cn();De.flags|=s,y.memoizedState=Ko(1|r,{destroy:void 0},l,c===void 0?null:c)}function Ac(s,r,l,c){var y=Tt();c=c===void 0?null:c;var _=y.memoizedState.inst;it!==null&&c!==null&&ah(c,it.memoizedState.deps)?y.memoizedState=Ko(r,_,l,c):(De.flags|=s,y.memoizedState=Ko(1|r,_,l,c))}function Fy(s,r){Sc(8390656,8,s,r)}function yh(s,r){Ac(2048,8,s,r)}function aw(s){De.flags|=4;var r=De.updateQueue;if(r===null)r=vc(),De.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function qy(s){var r=Tt().memoizedState;return aw({ref:r,nextImpl:s}),function(){if((We&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function By(s,r){return Ac(4,2,s,r)}function Gy(s,r){return Ac(4,4,s,r)}function Hy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Ky(s,r,l){l=l!=null?l.concat([s]):null,Ac(4,4,Hy.bind(null,r,s),l)}function _h(){}function Jy(s,r){var l=Tt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&ah(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function Yy(s,r){var l=Tt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&ah(r,c[1]))return c[0];if(c=s(),Wr){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,r],c}function vh(s,r,l){return l===void 0||(ji&1073741824)!==0&&(Oe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=$_(),De.lanes|=s,Js|=s,l)}function $y(s,r,l,c){return In(l,r)?l:Bo.current!==null?(s=vh(s,l,c),In(s,r)||(Nt=!0),s):(ji&42)===0||(ji&1073741824)!==0&&(Oe&261930)===0?(Nt=!0,s.memoizedState=l):(s=$_(),De.lanes|=s,Js|=s,r)}function Qy(s,r,l,c,y){var _=oe.p;oe.p=_!==0&&8>_?_:8;var A=H.T,I={};H.T=I,Sh(s,!1,r,l);try{var k=y(),J=H.S;if(J!==null&&J(I,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var j=nw(k,c);Sl(s,r,j,Mn(s))}else Sl(s,r,c,Mn(s))}catch(ie){Sl(s,r,{then:function(){},status:"rejected",reason:ie},Mn())}finally{oe.p=_,A!==null&&I.types!==null&&(A.types=I.types),H.T=A}}function lw(){}function Th(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=Xy(s).queue;Qy(s,y,r,le,l===null?lw:function(){return Wy(s),l(c)})}function Xy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:le},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Wy(s){var r=Xy(s);r.next===null&&(r=s.alternate.memoizedState),Sl(s,r.next.queue,{},Mn())}function Eh(){return $t(zl)}function Zy(){return Tt().memoizedState}function jy(){return Tt().memoizedState}function uw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Mn();s=Fs(l);var c=qs(r,s,l);c!==null&&(vn(c,r,l),yl(c,r,l)),r={cache:Xd()},s.payload=r;return}r=r.return}}function cw(s,r,l){var c=Mn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cc(s)?t_(r,l):(l=zd(s,r,l,c),l!==null&&(vn(l,s,c),n_(l,r,c)))}function e_(s,r,l){var c=Mn();Sl(s,r,l,c)}function Sl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cc(s))t_(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,I=_(A,l);if(y.hasEagerState=!0,y.eagerState=I,In(I,A))return sc(s,r,y,0),ot===null&&ic(),!1}catch{}finally{}if(l=zd(s,r,y,c),l!==null)return vn(l,s,c),n_(l,r,c),!0}return!1}function Sh(s,r,l,c){if(c={lane:2,revertLane:ep(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Cc(s)){if(r)throw Error(i(479))}else r=zd(s,l,c,2),r!==null&&vn(r,s,2)}function Cc(s){var r=s.alternate;return s===De||r!==null&&r===De}function t_(s,r){Go=yc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function n_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ha(s,l)}}var Al={readContext:$t,use:Tc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Al.useEffectEvent=mt;var i_={readContext:$t,use:Tc,useCallback:function(s,r){return cn().memoizedState=[s,r===void 0?null:r],s},useContext:$t,useEffect:Fy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Sc(4194308,4,Hy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Sc(4194308,4,s,r)},useInsertionEffect:function(s,r){Sc(4,2,s,r)},useMemo:function(s,r){var l=cn();r=r===void 0?null:r;var c=s();if(Wr){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=cn();if(l!==void 0){var y=l(r);if(Wr){Pn(!0);try{l(r)}finally{Pn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=cw.bind(null,De,s),[c.memoizedState,s]},useRef:function(s){var r=cn();return s={current:s},r.memoizedState=s},useState:function(s){s=mh(s);var r=s.queue,l=e_.bind(null,De,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:_h,useDeferredValue:function(s,r){var l=cn();return vh(l,s,r)},useTransition:function(){var s=mh(!1);return s=Qy.bind(null,De,s.queue,!0,!1),cn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=De,y=cn();if(He){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ot===null)throw Error(i(349));(Oe&127)!==0||Cy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Fy(wy.bind(null,c,_,s),[s]),c.flags|=2048,Ko(9,{destroy:void 0},Iy.bind(null,c,_,l,r),null),l},useId:function(){var s=cn(),r=ot.identifierPrefix;if(He){var l=Pi,c=Di;l=(c&~(1<<32-yt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=_c++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=iw++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Eh,useFormState:Vy,useActionState:Vy,useOptimistic:function(s){var r=cn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Sh.bind(null,De,!0,l),l.dispatch=r,[s,r]},useMemoCache:dh,useCacheRefresh:function(){return cn().memoizedState=uw.bind(null,De)},useEffectEvent:function(s){var r=cn(),l={impl:s};return r.memoizedState=l,function(){if((We&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Ah={readContext:$t,use:Tc,useCallback:Jy,useContext:$t,useEffect:yh,useImperativeHandle:Ky,useInsertionEffect:By,useLayoutEffect:Gy,useMemo:Yy,useReducer:Ec,useRef:zy,useState:function(){return Ec(es)},useDebugValue:_h,useDeferredValue:function(s,r){var l=Tt();return $y(l,it.memoizedState,s,r)},useTransition:function(){var s=Ec(es)[0],r=Tt().memoizedState;return[typeof s=="boolean"?s:El(s),r]},useSyncExternalStore:Ay,useId:Zy,useHostTransitionStatus:Eh,useFormState:Uy,useActionState:Uy,useOptimistic:function(s,r){var l=Tt();return Ny(l,it,s,r)},useMemoCache:dh,useCacheRefresh:jy};Ah.useEffectEvent=qy;var s_={readContext:$t,use:Tc,useCallback:Jy,useContext:$t,useEffect:yh,useImperativeHandle:Ky,useInsertionEffect:By,useLayoutEffect:Gy,useMemo:Yy,useReducer:ph,useRef:zy,useState:function(){return ph(es)},useDebugValue:_h,useDeferredValue:function(s,r){var l=Tt();return it===null?vh(l,s,r):$y(l,it.memoizedState,s,r)},useTransition:function(){var s=ph(es)[0],r=Tt().memoizedState;return[typeof s=="boolean"?s:El(s),r]},useSyncExternalStore:Ay,useId:Zy,useHostTransitionStatus:Eh,useFormState:Oy,useActionState:Oy,useOptimistic:function(s,r){var l=Tt();return it!==null?Ny(l,it,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:dh,useCacheRefresh:jy};s_.useEffectEvent=qy;function Ch(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Ih={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Mn(),y=Fs(c);y.payload=r,l!=null&&(y.callback=l),r=qs(s,y,c),r!==null&&(vn(r,s,c),yl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Mn(),y=Fs(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=qs(s,y,c),r!==null&&(vn(r,s,c),yl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Mn(),c=Fs(l);c.tag=2,r!=null&&(c.callback=r),r=qs(s,c,l),r!==null&&(vn(r,s,l),yl(r,s,l))}};function r_(s,r,l,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!ul(l,c)||!ul(y,_):!0}function o_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Ih.enqueueReplaceState(r,r.state,null)}function Zr(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function a_(s){nc(s)}function l_(s){console.error(s)}function u_(s){nc(s)}function Ic(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function c_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function wh(s,r,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Ic(s,r)},l}function f_(s){return s=Fs(s),s.tag=3,s}function d_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){c_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){c_(r,l,c),typeof y!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function fw(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Lo(r,l,y,!0),l=Rn.current,l!==null){switch(l.tag){case 31:case 13:return Gn===null?Lc():l.alternate===null&&gt===0&&(gt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===dc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Wh(s,c,y)),!1;case 22:return l.flags|=65536,c===dc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Wh(s,c,y)),!1}throw Error(i(435,l.tag))}return Wh(s,c,y),Lc(),!1}if(He)return r=Rn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Kd&&(s=Error(i(422),{cause:c}),dl(zn(s,l)))):(c!==Kd&&(r=Error(i(423),{cause:c}),dl(zn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=zn(c,l),y=wh(s.stateNode,c,y),nh(s,y),gt!==4&&(gt=2)),!1;var _=Error(i(520),{cause:c});if(_=zn(_,l),Ml===null?Ml=[_]:Ml.push(_),gt!==4&&(gt=2),r===null)return!0;c=zn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=wh(l.stateNode,c,s),nh(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=f_(y),d_(y,s,l,c),nh(l,y),!1}l=l.return}while(l!==null);return!1}var Rh=Error(i(461)),Nt=!1;function Qt(s,r,l,c){r.child=s===null?gy(r,null,l,c):Xr(r,s.child,l,c)}function h_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return Jr(r),c=lh(s,r,l,A,_,y),I=uh(),s!==null&&!Nt?(ch(s,r,y),ts(s,r,y)):(He&&I&&Gd(r),r.flags|=1,Qt(s,r,c,y),r.child)}function p_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Fd(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,m_(s,r,_,c,y)):(s=oc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Vh(s,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:ul,l(A,c)&&s.ref===r.ref)return ts(s,r,y)}return r.flags|=1,s=Qi(_,c),s.ref=r.ref,s.return=r,r.child=s}function m_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(ul(_,c)&&s.ref===r.ref)if(Nt=!1,r.pendingProps=c=_,Vh(s,y))(s.flags&131072)!==0&&(Nt=!0);else return r.lanes=s.lanes,ts(s,r,y)}return bh(s,r,l,c,y)}function g_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return y_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&cc(r,_!==null?_.cachePool:null),_!==null?vy(r,_):sh(),Ty(r);else return c=r.lanes=536870912,y_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(cc(r,_.cachePool),vy(r,_),Gs(),r.memoizedState=null):(s!==null&&cc(r,null),sh(),Gs());return Qt(s,r,y,l),r.child}function Cl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function y_(s,r,l,c,y){var _=Zd();return _=_===null?null:{parent:Rt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&cc(r,null),sh(),Ty(r),s!==null&&Lo(s,r,c,!0),r.childLanes=y,null}function wc(s,r){return r=bc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function __(s,r,l){return Xr(r,s.child,null,l),s=wc(r,r.pendingProps),s.flags|=2,bn(r),r.memoizedState=null,s}function dw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(He){if(c.mode==="hidden")return s=wc(r,c),r.lanes=536870912,Cl(null,s);if(oh(r),(s=at)?(s=xv(s,Bn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Di,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},l=ty(s),l.return=r,r.child=l,Yt=r,at=null)):s=null,s===null)throw Ls(r);return r.lanes=536870912,null}return wc(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(oh(r),y)if(r.flags&256)r.flags&=-257,r=__(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Nt||Lo(s,r,l,!1),y=(l&s.childLanes)!==0,Nt||y){if(c=ot,c!==null&&(A=Ka(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,Br(s,A),vn(c,s,A),Rh;Lc(),r=__(s,r,l)}else s=_.treeContext,at=Hn(A.nextSibling),Yt=r,He=!0,Us=null,Bn=!1,s!==null&&sy(r,s),r=wc(r,c),r.flags|=4096;return r}return s=Qi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Rc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function bh(s,r,l,c,y){return Jr(r),l=lh(s,r,l,c,void 0,y),c=uh(),s!==null&&!Nt?(ch(s,r,y),ts(s,r,y)):(He&&c&&Gd(r),r.flags|=1,Qt(s,r,l,y),r.child)}function v_(s,r,l,c,y,_){return Jr(r),r.updateQueue=null,l=Sy(r,c,l,y),Ey(s),c=uh(),s!==null&&!Nt?(ch(s,r,_),ts(s,r,_)):(He&&c&&Gd(r),r.flags|=1,Qt(s,r,l,_),r.child)}function T_(s,r,l,c,y){if(Jr(r),r.stateNode===null){var _=Po,A=l.contextType;typeof A=="object"&&A!==null&&(_=$t(A)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ih,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},eh(r),A=l.contextType,_.context=typeof A=="object"&&A!==null?$t(A):Po,_.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Ch(r,l,A,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Ih.enqueueReplaceState(_,_.state,null),vl(r,c,_,y),_l(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var I=r.memoizedProps,k=Zr(l,I);_.props=k;var J=_.context,j=l.contextType;A=Po,typeof j=="object"&&j!==null&&(A=$t(j));var ie=l.getDerivedStateFromProps;j=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||J!==A)&&o_(r,_,c,A),zs=!1;var Y=r.memoizedState;_.state=Y,vl(r,c,_,y),_l(),J=r.memoizedState,I||Y!==J||zs?(typeof ie=="function"&&(Ch(r,l,ie,c),J=r.memoizedState),(k=zs||r_(r,l,k,c,Y,J,A))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),_.props=c,_.state=J,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,th(s,r),A=r.memoizedProps,j=Zr(l,A),_.props=j,ie=r.pendingProps,Y=_.context,J=l.contextType,k=Po,typeof J=="object"&&J!==null&&(k=$t(J)),I=l.getDerivedStateFromProps,(J=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ie||Y!==k)&&o_(r,_,c,k),zs=!1,Y=r.memoizedState,_.state=Y,vl(r,c,_,y),_l();var W=r.memoizedState;A!==ie||Y!==W||zs||s!==null&&s.dependencies!==null&&lc(s.dependencies)?(typeof I=="function"&&(Ch(r,l,I,c),W=r.memoizedState),(j=zs||r_(r,l,j,c,Y,W,k)||s!==null&&s.dependencies!==null&&lc(s.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,W,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,W,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=W),_.props=c,_.state=W,_.context=k,c=j):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Rc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=Xr(r,s.child,null,y),r.child=Xr(r,null,l,y)):Qt(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ts(s,r,y),s}function E_(s,r,l,c){return Hr(),r.flags|=256,Qt(s,r,l,c),r.child}var Nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xh(s){return{baseLanes:s,cachePool:cy()}}function Mh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=xn),s}function S_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(vt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(He){if(y?Bs(r):Gs(),(s=at)?(s=xv(s,Bn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Di,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},l=ty(s),l.return=r,r.child=l,Yt=r,at=null)):s=null,s===null)throw Ls(r);return hp(s)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(Gs(),y=r.mode,I=bc({mode:"hidden",children:I},y),c=Gr(c,y,l,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=xh(l),c.childLanes=Mh(s,A,l),r.memoizedState=Nh,Cl(null,c)):(Bs(r),Dh(r,I))}var k=s.memoizedState;if(k!==null&&(I=k.dehydrated,I!==null)){if(_)r.flags&256?(Bs(r),r.flags&=-257,r=Ph(s,r,l)):r.memoizedState!==null?(Gs(),r.child=s.child,r.flags|=128,r=null):(Gs(),I=c.fallback,y=r.mode,c=bc({mode:"visible",children:c.children},y),I=Gr(I,y,l,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,Xr(r,s.child,null,l),c=r.child,c.memoizedState=xh(l),c.childLanes=Mh(s,A,l),r.memoizedState=Nh,r=Cl(null,c));else if(Bs(r),hp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,dl({value:c,source:null,stack:null}),r=Ph(s,r,l)}else if(Nt||Lo(s,r,l,!1),A=(l&s.childLanes)!==0,Nt||A){if(A=ot,A!==null&&(c=Ka(A,l),c!==0&&c!==k.retryLane))throw k.retryLane=c,Br(s,c),vn(A,s,c),Rh;dp(I)||Lc(),r=Ph(s,r,l)}else dp(I)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,at=Hn(I.nextSibling),Yt=r,He=!0,Us=null,Bn=!1,s!==null&&sy(r,s),r=Dh(r,c.children),r.flags|=4096);return r}return y?(Gs(),I=c.fallback,y=r.mode,k=s.child,J=k.sibling,c=Qi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,J!==null?I=Qi(J,I):(I=Gr(I,y,l,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,Cl(null,c),c=r.child,I=s.child.memoizedState,I===null?I=xh(l):(y=I.cachePool,y!==null?(k=Rt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=cy(),I={baseLanes:I.baseLanes|l,cachePool:y}),c.memoizedState=I,c.childLanes=Mh(s,A,l),r.memoizedState=Nh,Cl(s.child,c)):(Bs(r),l=s.child,s=l.sibling,l=Qi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function Dh(s,r){return r=bc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function bc(s,r){return s=wn(22,s,null,r),s.lanes=0,s}function Ph(s,r,l){return Xr(r,s.child,null,l),s=Dh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function A_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),$d(s.return,r,l)}function kh(s,r,l,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function C_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=vt.current,I=(A&2)!==0;if(I?(A=A&1|2,r.flags|=128):A&=1,ce(vt,A),Qt(s,r,c,l),c=He?fl:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&A_(s,l,r);else if(s.tag===19)A_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&gc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),kh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&gc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}kh(r,!0,l,null,_,c);break;case"together":kh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ts(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Js|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Lo(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Qi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Qi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Vh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&lc(s)))}function hw(s,r,l){switch(r.tag){case 3:kt(r,r.stateNode.containerInfo),Os(r,Rt,s.memoizedState.cache),Hr();break;case 27:case 5:Cr(r);break;case 4:kt(r,r.stateNode.containerInfo);break;case 10:Os(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,oh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Bs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?S_(s,r,l):(Bs(r),s=ts(s,r,l),s!==null?s.sibling:null);Bs(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Lo(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return C_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(vt,vt.current),c)break;return null;case 22:return r.lanes=0,g_(s,r,l,r.pendingProps);case 24:Os(r,Rt,s.memoizedState.cache)}return ts(s,r,l)}function I_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Nt=!0;else{if(!Vh(s,l)&&(r.flags&128)===0)return Nt=!1,hw(s,r,l);Nt=(s.flags&131072)!==0}else Nt=!1,He&&(r.flags&1048576)!==0&&iy(r,fl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=$r(r.elementType),r.type=s,typeof s=="function")Fd(s)?(c=Zr(s,c),r.tag=1,r=T_(null,r,s,c,l)):(r.tag=0,r=bh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ae){r.tag=11,r=h_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=p_(null,r,s,c,l);break e}}throw r=xe(s)||s,Error(i(306,r,""))}}return r;case 0:return bh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=Zr(c,r.pendingProps),T_(s,r,c,y,l);case 3:e:{if(kt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,th(s,r),vl(r,c,null,l);var A=r.memoizedState;if(c=A.cache,Os(r,Rt,c),c!==_.cache&&Qd(r,[Rt],l,!0),_l(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=E_(s,r,c,l);break e}else if(c!==y){y=zn(Error(i(424)),r),dl(y),r=E_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(at=Hn(s.firstChild),Yt=r,He=!0,Us=null,Bn=!0,l=gy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Hr(),c===y){r=ts(s,r,l);break e}Qt(s,r,c,l)}r=r.child}return r;case 26:return Rc(s,r),s===null?(l=Uv(r.type,null,r.pendingProps,null))?r.memoizedState=l:He||(l=r.type,s=r.pendingProps,c=Hc(Pe.current).createElement(l),c[Ct]=r,c[Ft]=s,Xt(c,l,s),It(c),r.stateNode=c):r.memoizedState=Uv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Cr(r),s===null&&He&&(c=r.stateNode=Pv(r.type,r.pendingProps,Pe.current),Yt=r,Bn=!0,y=at,Ws(r.type)?(pp=y,at=Hn(c.firstChild)):at=y),Qt(s,r,r.pendingProps.children,l),Rc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&He&&((y=c=at)&&(c=Gw(c,r.type,r.pendingProps,Bn),c!==null?(r.stateNode=c,Yt=r,at=Hn(c.firstChild),Bn=!1,y=!0):y=!1),y||Ls(r)),Cr(r),y=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,up(y,_)?c=null:A!==null&&up(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=lh(s,r,sw,null,null,l),zl._currentValue=y),Rc(s,r),Qt(s,r,c,l),r.child;case 6:return s===null&&He&&((s=l=at)&&(l=Hw(l,r.pendingProps,Bn),l!==null?(r.stateNode=l,Yt=r,at=null,s=!0):s=!1),s||Ls(r)),null;case 13:return S_(s,r,l);case 4:return kt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=Xr(r,null,c,l):Qt(s,r,c,l),r.child;case 11:return h_(s,r,r.type,r.pendingProps,l);case 7:return Qt(s,r,r.pendingProps,l),r.child;case 8:return Qt(s,r,r.pendingProps.children,l),r.child;case 12:return Qt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Os(r,r.type,c.value),Qt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Jr(r),y=$t(y),c=c(y),r.flags|=1,Qt(s,r,c,l),r.child;case 14:return p_(s,r,r.type,r.pendingProps,l);case 15:return m_(s,r,r.type,r.pendingProps,l);case 19:return C_(s,r,l);case 31:return dw(s,r,l);case 22:return g_(s,r,l,r.pendingProps);case 24:return Jr(r),c=$t(Rt),s===null?(y=Zd(),y===null&&(y=ot,_=Xd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},eh(r),Os(r,Rt,y)):((s.lanes&l)!==0&&(th(s,r),vl(r,null,null,l),_l()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Os(r,Rt,c)):(c=_.cache,Os(r,Rt,c),c!==y.cache&&Qd(r,[Rt],l,!0))),Qt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ns(s){s.flags|=4}function Uh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Z_())s.flags|=8192;else throw Qr=dc,jd}else s.flags&=-16777217}function w_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!qv(r))if(Z_())s.flags|=8192;else throw Qr=dc,jd}function Nc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Vu():536870912,s.lanes|=r,Qo|=r)}function Il(s,r){if(!He)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function lt(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function pw(s,r,l){var c=r.pendingProps;switch(Hd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(Rt),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Uo(r)?ns(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Jd())),lt(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(ns(r),_!==null?(lt(r),w_(r,_)):(lt(r),Uh(r,y,null,c,l))):_?_!==s.memoizedState?(ns(r),lt(r),w_(r,_)):(lt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&ns(r),lt(r),Uh(r,y,s,c,l)),null;case 27:if(po(r),l=Pe.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return lt(r),null}s=pe.current,Uo(r)?ry(r):(s=Pv(y,c,l),r.stateNode=s,ns(r))}return lt(r),null;case 5:if(po(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return lt(r),null}if(_=pe.current,Uo(r))ry(r);else{var A=Hc(Pe.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[Ct]=r,_[Ft]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(Xt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ns(r)}}return lt(r),Uh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Pe.current,Uo(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Yt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Ct]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Sv(s.nodeValue,l)),s||Ls(r,!0)}else s=Hc(s).createTextNode(c),s[Ct]=r,r.stateNode=s}return lt(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Uo(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ct]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),s=!1}else l=Jd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(bn(r),r):(bn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return lt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Uo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Ct]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),y=!1}else y=Jd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(bn(r),r):(bn(r),null)}return bn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Nc(r,r.updateQueue),lt(r),null);case 4:return ft(),s===null&&sp(r.stateNode.containerInfo),lt(r),null;case 10:return Zi(r.type),lt(r),null;case 19:if(ee(vt),c=r.memoizedState,c===null)return lt(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Il(c,!1);else{if(gt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=gc(s),_!==null){for(r.flags|=128,Il(c,!1),s=_.updateQueue,r.updateQueue=s,Nc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)ey(l,s),l=l.sibling;return ce(vt,vt.current&1|2),He&&Xi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&ln()>kc&&(r.flags|=128,y=!0,Il(c,!1),r.lanes=4194304)}else{if(!y)if(s=gc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Nc(r,s),Il(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!He)return lt(r),null}else 2*ln()-c.renderingStartTime>kc&&l!==536870912&&(r.flags|=128,y=!0,Il(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=ln(),s.sibling=null,l=vt.current,ce(vt,y?l&1|2:l&1),He&&Xi(r,c.treeForkCount),s):(lt(r),null);case 22:case 23:return bn(r),rh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),l=r.updateQueue,l!==null&&Nc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ee(Yr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Zi(Rt),lt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function mw(s,r){switch(Hd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Zi(Rt),ft(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return po(r),null;case 31:if(r.memoizedState!==null){if(bn(r),r.alternate===null)throw Error(i(340));Hr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(bn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Hr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ee(vt),null;case 4:return ft(),null;case 10:return Zi(r.type),null;case 22:case 23:return bn(r),rh(),s!==null&&ee(Yr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Zi(Rt),null;case 25:return null;default:return null}}function R_(s,r){switch(Hd(r),r.tag){case 3:Zi(Rt),ft();break;case 26:case 27:case 5:po(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&bn(r);break;case 13:bn(r);break;case 19:ee(vt);break;case 10:Zi(r.type);break;case 22:case 23:bn(r),rh(),s!==null&&ee(Yr);break;case 24:Zi(Rt)}}function wl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(I){tt(r,r.return,I)}}function Hs(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=r;var k=l,J=I;try{J()}catch(j){tt(y,k,j)}}}c=c.next}while(c!==_)}}catch(j){tt(r,r.return,j)}}function b_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{_y(r,l)}catch(c){tt(s,s.return,c)}}}function N_(s,r,l){l.props=Zr(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){tt(s,r,c)}}function Rl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){tt(s,r,y)}}function ki(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){tt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){tt(s,r,y)}else l.current=null}function x_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){tt(s,s.return,y)}}function Lh(s,r,l){try{var c=s.stateNode;Lw(c,s.type,l,r),c[Ft]=r}catch(y){tt(s,s.return,y)}}function M_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ws(s.type)||s.tag===4}function Oh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||M_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ws(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ei));else if(c!==4&&(c===27&&Ws(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(zh(s,r,l),s=s.sibling;s!==null;)zh(s,r,l),s=s.sibling}function xc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&Ws(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(xc(s,r,l),s=s.sibling;s!==null;)xc(s,r,l),s=s.sibling}function D_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Xt(r,c,l),r[Ct]=s,r[Ft]=l}catch(_){tt(s,s.return,_)}}var is=!1,xt=!1,Fh=!1,P_=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function gw(s,r){if(s=s.containerInfo,ap=Wc,s=Kg(s),Pd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,I=-1,k=-1,J=0,j=0,ie=s,Y=null;t:for(;;){for(var W;ie!==l||y!==0&&ie.nodeType!==3||(I=A+y),ie!==_||c!==0&&ie.nodeType!==3||(k=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(W=ie.firstChild)!==null;)Y=ie,ie=W;for(;;){if(ie===s)break t;if(Y===l&&++J===y&&(I=A),Y===_&&++j===c&&(k=A),(W=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=W}l=I===-1||k===-1?null:{start:I,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(lp={focusedElem:s,selectionRange:l},Wc=!1,Bt=r;Bt!==null;)if(r=Bt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Bt=s;else for(;Bt!==null;){switch(r=Bt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var ge=Zr(l.type,y);s=c.getSnapshotBeforeUpdate(ge,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){tt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)fp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":fp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Bt=s;break}Bt=r.return}}function k_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:rs(s,l),c&4&&wl(5,l);break;case 1:if(rs(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){tt(l,l.return,A)}else{var y=Zr(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(l,l.return,A)}}c&64&&b_(l),c&512&&Rl(l,l.return);break;case 3:if(rs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{_y(s,r)}catch(A){tt(l,l.return,A)}}break;case 27:r===null&&c&4&&D_(l);case 26:case 5:rs(s,l),r===null&&c&4&&x_(l),c&512&&Rl(l,l.return);break;case 12:rs(s,l);break;case 31:rs(s,l),c&4&&L_(s,l);break;case 13:rs(s,l),c&4&&O_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Iw.bind(null,l),Kw(s,l))));break;case 22:if(c=l.memoizedState!==null||is,!c){r=r!==null&&r.memoizedState!==null||xt,y=is;var _=xt;is=c,(xt=r)&&!_?os(s,l,(l.subtreeFlags&8772)!==0):rs(s,l),is=y,xt=_}break;case 30:break;default:rs(s,l)}}function V_(s){var r=s.alternate;r!==null&&(s.alternate=null,V_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&vo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ht=null,mn=!1;function ss(s,r,l){for(l=l.child;l!==null;)U_(s,r,l),l=l.sibling}function U_(s,r,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Xn,l)}catch{}switch(l.tag){case 26:xt||ki(l,r),ss(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xt||ki(l,r);var c=ht,y=mn;Ws(l.type)&&(ht=l.stateNode,mn=!1),ss(s,r,l),Ul(l.stateNode),ht=c,mn=y;break;case 5:xt||ki(l,r);case 6:if(c=ht,y=mn,ht=null,ss(s,r,l),ht=c,mn=y,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(l.stateNode)}catch(_){tt(l,r,_)}else try{ht.removeChild(l.stateNode)}catch(_){tt(l,r,_)}break;case 18:ht!==null&&(mn?(s=ht,bv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),ia(s)):bv(ht,l.stateNode));break;case 4:c=ht,y=mn,ht=l.stateNode.containerInfo,mn=!0,ss(s,r,l),ht=c,mn=y;break;case 0:case 11:case 14:case 15:Hs(2,l,r),xt||Hs(4,l,r),ss(s,r,l);break;case 1:xt||(ki(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&N_(l,r,c)),ss(s,r,l);break;case 21:ss(s,r,l);break;case 22:xt=(c=xt)||l.memoizedState!==null,ss(s,r,l),xt=c;break;default:ss(s,r,l)}}function L_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ia(s)}catch(l){tt(r,r.return,l)}}}function O_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ia(s)}catch(l){tt(r,r.return,l)}}function yw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new P_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new P_),r;default:throw Error(i(435,s.tag))}}function Mc(s,r){var l=yw(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=ww.bind(null,s,c);c.then(y,y)}})}function gn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Ws(I.type)){ht=I.stateNode,mn=!1;break e}break;case 5:ht=I.stateNode,mn=!1;break e;case 3:case 4:ht=I.stateNode.containerInfo,mn=!0;break e}I=I.return}if(ht===null)throw Error(i(160));U_(_,A,y),ht=null,mn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)z_(r,s),r=r.sibling}var oi=null;function z_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:gn(r,s),yn(s),c&4&&(Hs(3,s,s.return),wl(3,s),Hs(5,s,s.return));break;case 1:gn(r,s),yn(s),c&512&&(xt||l===null||ki(l,l.return)),c&64&&is&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=oi;if(gn(r,s),yn(s),c&512&&(xt||l===null||ki(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Ti]||_[Ct]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Xt(_,c,l),_[Ct]=s,It(_),c=_;break e;case"link":var A=zv("link","href",y).get(c+(l.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(I,1);break t}}_=y.createElement(c),Xt(_,c,l),y.head.appendChild(_);break;case"meta":if(A=zv("meta","content",y).get(c+(l.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(I,1);break t}}_=y.createElement(c),Xt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[Ct]=s,It(_),c=_}s.stateNode=c}else Fv(y,s.type,s.stateNode);else s.stateNode=Ov(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Fv(y,s.type,s.stateNode):Ov(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Lh(s,s.memoizedProps,l.memoizedProps)}break;case 27:gn(r,s),yn(s),c&512&&(xt||l===null||ki(l,l.return)),l!==null&&c&4&&Lh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(gn(r,s),yn(s),c&512&&(xt||l===null||ki(l,l.return)),s.flags&32){y=s.stateNode;try{pn(y,"")}catch(ge){tt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Lh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Fh=!0);break;case 6:if(gn(r,s),yn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){tt(s,s.return,ge)}}break;case 3:if(Yc=null,y=oi,oi=Kc(r.containerInfo),gn(r,s),oi=y,yn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ia(r.containerInfo)}catch(ge){tt(s,s.return,ge)}Fh&&(Fh=!1,F_(s));break;case 4:c=oi,oi=Kc(s.stateNode.containerInfo),gn(r,s),yn(s),oi=c;break;case 12:gn(r,s),yn(s);break;case 31:gn(r,s),yn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Mc(s,c)));break;case 13:gn(r,s),yn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Pc=ln()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Mc(s,c)));break;case 22:y=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,J=is,j=xt;if(is=J||y,xt=j||k,gn(r,s),xt=j,is=J,yn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||k||is||xt||jr(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){k=l=r;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=k.stateNode;var ie=k.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ge){tt(k,k.return,ge)}}}else if(r.tag===6){if(l===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(ge){tt(k,k.return,ge)}}}else if(r.tag===18){if(l===null){k=r;try{var W=k.stateNode;y?Nv(W,!0):Nv(k.stateNode,!1)}catch(ge){tt(k,k.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Mc(s,l))));break;case 19:gn(r,s),yn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Mc(s,c)));break;case 30:break;case 21:break;default:gn(r,s),yn(s)}}function yn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(M_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Oh(s);xc(s,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(pn(A,""),l.flags&=-33);var I=Oh(s);xc(s,I,A);break;case 3:case 4:var k=l.stateNode.containerInfo,J=Oh(s);zh(s,J,k);break;default:throw Error(i(161))}}catch(j){tt(s,s.return,j)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function F_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;F_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function rs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)k_(s,r.alternate,r),r=r.sibling}function jr(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Hs(4,r,r.return),jr(r);break;case 1:ki(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&N_(r,r.return,l),jr(r);break;case 27:Ul(r.stateNode);case 26:case 5:ki(r,r.return),jr(r);break;case 22:r.memoizedState===null&&jr(r);break;case 30:jr(r);break;default:jr(r)}s=s.sibling}}function os(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:os(y,_,l),wl(4,_);break;case 1:if(os(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){tt(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)yy(k[y],I)}catch(J){tt(c,c.return,J)}}l&&A&64&&b_(_),Rl(_,_.return);break;case 27:D_(_);case 26:case 5:os(y,_,l),l&&c===null&&A&4&&x_(_),Rl(_,_.return);break;case 12:os(y,_,l);break;case 31:os(y,_,l),l&&A&4&&L_(y,_);break;case 13:os(y,_,l),l&&A&4&&O_(y,_);break;case 22:_.memoizedState===null&&os(y,_,l),Rl(_,_.return);break;case 30:break;default:os(y,_,l)}r=r.sibling}}function qh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&hl(l))}function Bh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&hl(s))}function ai(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)q_(s,r,l,c),r=r.sibling}function q_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ai(s,r,l,c),y&2048&&wl(9,r);break;case 1:ai(s,r,l,c);break;case 3:ai(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&hl(s)));break;case 12:if(y&2048){ai(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){tt(r,r.return,k)}}else ai(s,r,l,c);break;case 31:ai(s,r,l,c);break;case 13:ai(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?ai(s,r,l,c):bl(s,r):_._visibility&2?ai(s,r,l,c):(_._visibility|=2,Jo(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&qh(A,r);break;case 24:ai(s,r,l,c),y&2048&&Bh(r.alternate,r);break;default:ai(s,r,l,c)}}function Jo(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,I=l,k=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:Jo(_,A,I,k,y),wl(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?Jo(_,A,I,k,y):bl(_,A):(j._visibility|=2,Jo(_,A,I,k,y)),y&&J&2048&&qh(A.alternate,A);break;case 24:Jo(_,A,I,k,y),y&&J&2048&&Bh(A.alternate,A);break;default:Jo(_,A,I,k,y)}r=r.sibling}}function bl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:bl(l,c),y&2048&&qh(c.alternate,c);break;case 24:bl(l,c),y&2048&&Bh(c.alternate,c);break;default:bl(l,c)}r=r.sibling}}var Nl=8192;function Yo(s,r,l){if(s.subtreeFlags&Nl)for(s=s.child;s!==null;)B_(s,r,l),s=s.sibling}function B_(s,r,l){switch(s.tag){case 26:Yo(s,r,l),s.flags&Nl&&s.memoizedState!==null&&iR(l,oi,s.memoizedState,s.memoizedProps);break;case 5:Yo(s,r,l);break;case 3:case 4:var c=oi;oi=Kc(s.stateNode.containerInfo),Yo(s,r,l),oi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Nl,Nl=16777216,Yo(s,r,l),Nl=c):Yo(s,r,l));break;default:Yo(s,r,l)}}function G_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function xl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Bt=c,K_(c,s)}G_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)H_(s),s=s.sibling}function H_(s){switch(s.tag){case 0:case 11:case 15:xl(s),s.flags&2048&&Hs(9,s,s.return);break;case 3:xl(s);break;case 12:xl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Dc(s)):xl(s);break;default:xl(s)}}function Dc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Bt=c,K_(c,s)}G_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Hs(8,r,r.return),Dc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Dc(r));break;default:Dc(r)}s=s.sibling}}function K_(s,r){for(;Bt!==null;){var l=Bt;switch(l.tag){case 0:case 11:case 15:Hs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:hl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Bt=c;else e:for(l=s;Bt!==null;){c=Bt;var y=c.sibling,_=c.return;if(V_(c),c===l){Bt=null;break e}if(y!==null){y.return=_,Bt=y;break e}Bt=_}}}var _w={getCacheForType:function(s){var r=$t(Rt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return $t(Rt).controller.signal}},vw=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,Ue=null,Oe=0,et=0,Nn=null,Ks=!1,$o=!1,Gh=!1,as=0,gt=0,Js=0,eo=0,Hh=0,xn=0,Qo=0,Ml=null,_n=null,Kh=!1,Pc=0,J_=0,kc=1/0,Vc=null,Ys=null,Ut=0,$s=null,Xo=null,ls=0,Jh=0,Yh=null,Y_=null,Dl=0,$h=null;function Mn(){return(We&2)!==0&&Oe!==0?Oe&-Oe:H.T!==null?ep():Uu()}function $_(){if(xn===0)if((Oe&536870912)===0||He){var s=Rr;Rr<<=1,(Rr&3932160)===0&&(Rr=262144),xn=s}else xn=536870912;return s=Rn.current,s!==null&&(s.flags|=32),xn}function vn(s,r,l){(s===ot&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(Wo(s,0),Qs(s,Oe,xn,!1)),br(s,l),((We&2)===0||s!==ot)&&(s===ot&&((We&2)===0&&(eo|=l),gt===4&&Qs(s,Oe,xn,!1)),Vi(s))}function Q_(s,r,l){if((We&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Wn(s,r),y=c?Sw(s,r):Xh(s,r,!0),_=c;do{if(y===0){$o&&!c&&Qs(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!Tw(l)){y=Xh(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=s;y=Ml;var k=I.current.memoizedState.isDehydrated;if(k&&(Wo(I,A).flags|=256),A=Xh(I,A,!1),A!==2){if(Gh&&!k){I.errorRecoveryDisabledLanes|=_,eo|=_,y=4;break e}_=_n,_n=y,_!==null&&(_n===null?_n=_:_n.push.apply(_n,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Wo(s,0),Qs(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Qs(c,r,xn,!Ks);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Pc+300-ln(),10<y)){if(Qs(c,r,xn,!Ks),yi(c,0,!0)!==0)break e;ls=r,c.timeoutHandle=wv(X_.bind(null,c,l,_n,Vc,Kh,r,xn,eo,Qo,Ks,_,"Throttled",-0,0),y);break e}X_(c,l,_n,Vc,Kh,r,xn,eo,Qo,Ks,_,null,-0,0)}}break}while(!0);Vi(s)}function X_(s,r,l,c,y,_,A,I,k,J,j,ie,Y,W){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},B_(r,_,ie);var ge=(_&62914560)===_?Pc-ln():(_&4194048)===_?J_-ln():0;if(ge=sR(ie,ge),ge!==null){ls=_,s.cancelPendingCommit=ge(sv.bind(null,s,r,_,l,c,y,A,I,k,j,ie,null,Y,W)),Qs(s,_,A,!J);return}}sv(s,r,_,l,c,y,A,I,k)}function Tw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!In(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qs(s,r,l,c){r&=~Hh,r&=~eo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-yt(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&Nr(s,l,r)}function Uc(){return(We&6)===0?(Pl(0),!1):!0}function Qh(){if(Ue!==null){if(et===0)var s=Ue.return;else s=Ue,Wi=Kr=null,fh(s),qo=null,ml=0,s=Ue;for(;s!==null;)R_(s.alternate,s),s=s.return;Ue=null}}function Wo(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Fw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ls=0,Qh(),ot=s,Ue=l=Qi(s.current,null),Oe=r,et=0,Nn=null,Ks=!1,$o=Wn(s,r),Gh=!1,Qo=xn=Hh=eo=Js=gt=0,_n=Ml=null,Kh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-yt(c),_=1<<y;r|=s[y],c&=~_}return as=r,ic(),l}function W_(s,r){De=null,H.H=Al,r===Fo||r===fc?(r=hy(),et=3):r===jd?(r=hy(),et=4):et=r===Rh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Nn=r,Ue===null&&(gt=1,Ic(s,zn(r,s.current)))}function Z_(){var s=Rn.current;return s===null?!0:(Oe&4194048)===Oe?Gn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?s===Gn:!1}function j_(){var s=H.H;return H.H=Al,s===null?Al:s}function ev(){var s=H.A;return H.A=_w,s}function Lc(){gt=4,Ks||(Oe&4194048)!==Oe&&Rn.current!==null||($o=!0),(Js&134217727)===0&&(eo&134217727)===0||ot===null||Qs(ot,Oe,xn,!1)}function Xh(s,r,l){var c=We;We|=2;var y=j_(),_=ev();(ot!==s||Oe!==r)&&(Vc=null,Wo(s,r)),r=!1;var A=gt;e:do try{if(et!==0&&Ue!==null){var I=Ue,k=Nn;switch(et){case 8:Qh(),A=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(r=!0);var J=et;if(et=0,Nn=null,Zo(s,I,k,J),l&&$o){A=0;break e}break;default:J=et,et=0,Nn=null,Zo(s,I,k,J)}}Ew(),A=gt;break}catch(j){W_(s,j)}while(!0);return r&&s.shellSuspendCounter++,Wi=Kr=null,We=c,H.H=y,H.A=_,Ue===null&&(ot=null,Oe=0,ic()),A}function Ew(){for(;Ue!==null;)tv(Ue)}function Sw(s,r){var l=We;We|=2;var c=j_(),y=ev();ot!==s||Oe!==r?(Vc=null,kc=ln()+500,Wo(s,r)):$o=Wn(s,r);e:do try{if(et!==0&&Ue!==null){r=Ue;var _=Nn;t:switch(et){case 1:et=0,Nn=null,Zo(s,r,_,1);break;case 2:case 9:if(fy(_)){et=0,Nn=null,nv(r);break}r=function(){et!==2&&et!==9||ot!==s||(et=7),Vi(s)},_.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:fy(_)?(et=0,Nn=null,nv(r)):(et=0,Nn=null,Zo(s,r,_,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var I=Ue;if(A?qv(A):I.stateNode.complete){et=0,Nn=null;var k=I.sibling;if(k!==null)Ue=k;else{var J=I.return;J!==null?(Ue=J,Oc(J)):Ue=null}break t}}et=0,Nn=null,Zo(s,r,_,5);break;case 6:et=0,Nn=null,Zo(s,r,_,6);break;case 8:Qh(),gt=6;break e;default:throw Error(i(462))}}Aw();break}catch(j){W_(s,j)}while(!0);return Wi=Kr=null,H.H=c,H.A=y,We=l,Ue!==null?0:(ot=null,Oe=0,ic(),gt)}function Aw(){for(;Ue!==null&&!wd();)tv(Ue)}function tv(s){var r=I_(s.alternate,s,as);s.memoizedProps=s.pendingProps,r===null?Oc(s):Ue=r}function nv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=v_(l,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=v_(l,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:fh(r);default:R_(l,r),r=Ue=ey(r,as),r=I_(l,r,as)}s.memoizedProps=s.pendingProps,r===null?Oc(s):Ue=r}function Zo(s,r,l,c){Wi=Kr=null,fh(r),qo=null,ml=0;var y=r.return;try{if(fw(s,y,r,l,Oe)){gt=1,Ic(s,zn(l,s.current)),Ue=null;return}}catch(_){if(y!==null)throw Ue=y,_;gt=1,Ic(s,zn(l,s.current)),Ue=null;return}r.flags&32768?(He||c===1?s=!0:$o||(Oe&536870912)!==0?s=!1:(Ks=s=!0,(c===2||c===9||c===3||c===6)&&(c=Rn.current,c!==null&&c.tag===13&&(c.flags|=16384))),iv(r,s)):Oc(r)}function Oc(s){var r=s;do{if((r.flags&32768)!==0){iv(r,Ks);return}s=r.return;var l=pw(r.alternate,r,as);if(l!==null){Ue=l;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=s}while(r!==null);gt===0&&(gt=5)}function iv(s,r){do{var l=mw(s.alternate,s);if(l!==null){l.flags&=32767,Ue=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=l}while(s!==null);gt=6,Ue=null}function sv(s,r,l,c,y,_,A,I,k){s.cancelPendingCommit=null;do zc();while(Ut!==0);if((We&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Od,Nd(s,l,_,A,I,k),s===ot&&(Ue=ot=null,Oe=0),Xo=r,$s=s,ls=l,Jh=_,Yh=y,Y_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Rw(Is,function(){return uv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,y=oe.p,oe.p=2,A=We,We|=4;try{gw(s,r,l)}finally{We=A,oe.p=y,H.T=c}}Ut=1,rv(),ov(),av()}}function rv(){if(Ut===1){Ut=0;var s=$s,r=Xo,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var c=oe.p;oe.p=2;var y=We;We|=4;try{z_(r,s);var _=lp,A=Kg(s.containerInfo),I=_.focusedElem,k=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Hg(I.ownerDocument.documentElement,I)){if(k!==null&&Pd(I)){var J=k.start,j=k.end;if(j===void 0&&(j=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(j,I.value.length);else{var ie=I.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),ge=I.textContent.length,Se=Math.min(k.start,ge),rt=k.end===void 0?Se:Math.min(k.end,ge);!W.extend&&Se>rt&&(A=rt,rt=Se,Se=A);var B=Gg(I,Se),z=Gg(I,rt);if(B&&z&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var K=ie.createRange();K.setStart(B.node,B.offset),W.removeAllRanges(),Se>rt?(W.addRange(K),W.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),W.addRange(K))}}}}for(ie=[],W=I;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var te=ie[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Wc=!!ap,lp=ap=null}finally{We=y,oe.p=c,H.T=l}}s.current=r,Ut=2}}function ov(){if(Ut===2){Ut=0;var s=$s,r=Xo,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var c=oe.p;oe.p=2;var y=We;We|=4;try{k_(s,r.alternate,r)}finally{We=y,oe.p=c,H.T=l}}Ut=3}}function av(){if(Ut===4||Ut===3){Ut=0,Nu();var s=$s,r=Xo,l=ls,c=Y_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,Xo=$s=null,lv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ys=null),Ki(l),r=r.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Xn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=H.T,y=oe.p,oe.p=2,H.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var I=c[A];_(I.value,{componentStack:I.stack})}}finally{H.T=r,oe.p=y}}(ls&3)!==0&&zc(),Vi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===$h?Dl++:(Dl=0,$h=s):Dl=0,Pl(0)}}function lv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,hl(r)))}function zc(){return rv(),ov(),av(),uv()}function uv(){if(Ut!==5)return!1;var s=$s,r=Jh;Jh=0;var l=Ki(ls),c=H.T,y=oe.p;try{oe.p=32>l?32:l,H.T=null,l=Yh,Yh=null;var _=$s,A=ls;if(Ut=0,Xo=$s=null,ls=0,(We&6)!==0)throw Error(i(331));var I=We;if(We|=4,H_(_.current),q_(_,_.current,A,l),We=I,Pl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Xn,_)}catch{}return!0}finally{oe.p=y,H.T=c,lv(s,r)}}function cv(s,r,l){r=zn(l,r),r=wh(s.stateNode,r,2),s=qs(s,r,2),s!==null&&(br(s,2),Vi(s))}function tt(s,r,l){if(s.tag===3)cv(s,s,l);else for(;r!==null;){if(r.tag===3){cv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ys===null||!Ys.has(c))){s=zn(l,s),l=f_(2),c=qs(r,l,2),c!==null&&(d_(l,c,r,s),br(c,2),Vi(c));break}}r=r.return}}function Wh(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new vw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Gh=!0,y.add(l),s=Cw.bind(null,s,r,l),r.then(s,s))}function Cw(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ot===s&&(Oe&l)===l&&(gt===4||gt===3&&(Oe&62914560)===Oe&&300>ln()-Pc?(We&2)===0&&Wo(s,0):Hh|=l,Qo===Oe&&(Qo=0)),Vi(s)}function fv(s,r){r===0&&(r=Vu()),s=Br(s,r),s!==null&&(br(s,r),Vi(s))}function Iw(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),fv(s,l)}function ww(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),fv(s,l)}function Rw(s,r){return Vt(s,r)}var Fc=null,jo=null,Zh=!1,qc=!1,jh=!1,Xs=0;function Vi(s){s!==jo&&s.next===null&&(jo===null?Fc=jo=s:jo=jo.next=s),qc=!0,Zh||(Zh=!0,Nw())}function Pl(s,r){if(!jh&&qc){jh=!0;do for(var l=!1,c=Fc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-yt(42|s)+1)-1,_&=y&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,mv(c,_))}else _=Oe,_=yi(c,c===ot?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Wn(c,_)||(l=!0,mv(c,_));c=c.next}while(l);jh=!1}}function bw(){dv()}function dv(){qc=Zh=!1;var s=0;Xs!==0&&zw()&&(s=Xs);for(var r=ln(),l=null,c=Fc;c!==null;){var y=c.next,_=hv(c,r);_===0?(c.next=null,l===null?Fc=y:l.next=y,y===null&&(jo=l)):(l=c,(s!==0||(_&3)!==0)&&(qc=!0)),c=y}Ut!==0&&Ut!==5||Pl(s),Xs!==0&&(Xs=0)}function hv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-yt(_),I=1<<A,k=y[A];k===-1?((I&l)===0||(I&c)!==0)&&(y[A]=bd(I,r)):k<=r&&(s.expiredLanes|=I),_&=~I}if(r=ot,l=Oe,l=yi(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(et===2||et===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Cs(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Wn(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Cs(c),Ki(l)){case 2:case 8:l=Ga;break;case 32:l=Is;break;case 268435456:l=xu;break;default:l=Is}return c=pv.bind(null,s),l=Vt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Cs(c),s.callbackPriority=2,s.callbackNode=null,2}function pv(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(zc()&&s.callbackNode!==l)return null;var c=Oe;return c=yi(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Q_(s,c,r),hv(s,ln()),s.callbackNode!=null&&s.callbackNode===l?pv.bind(null,s):null)}function mv(s,r){if(zc())return null;Q_(s,r,!0)}function Nw(){qw(function(){(We&6)!==0?Vt(Ba,bw):dv()})}function ep(){if(Xs===0){var s=Oo;s===0&&(s=mi,mi<<=1,(mi&261888)===0&&(mi=256)),Xs=s}return Xs}function gv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ao(""+s)}function yv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function xw(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=gv((y[Ft]||null).action),A=c.submitter;A&&(r=(r=A[Ft]||null)?gv(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var I=new bi("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Xs!==0){var k=A?yv(y,A):new FormData(y);Th(l,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(I.preventDefault(),k=A?yv(y,A):new FormData(y),Th(l,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var tp=0;tp<Ld.length;tp++){var np=Ld[tp],Mw=np.toLowerCase(),Dw=np[0].toUpperCase()+np.slice(1);ri(Mw,"on"+Dw)}ri($g,"onAnimationEnd"),ri(Qg,"onAnimationIteration"),ri(Xg,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri($I,"onTransitionRun"),ri(QI,"onTransitionStart"),ri(XI,"onTransitionCancel"),ri(Wg,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function _v(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var I=c[A],k=I.instance,J=I.currentTarget;if(I=I.listener,k!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(j){nc(j)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(I=c[A],k=I.instance,J=I.currentTarget,I=I.listener,k!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(j){nc(j)}y.currentTarget=null,_=k}}}}function Le(s,r){var l=r[_o];l===void 0&&(l=r[_o]=new Set);var c=s+"__bubble";l.has(c)||(vv(r,s,2,!1),l.add(c))}function ip(s,r,l){var c=0;r&&(c|=4),vv(l,s,c,r)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function sp(s){if(!s[Bc]){s[Bc]=!0,Ja.forEach(function(l){l!=="selectionchange"&&(Pw.has(l)||ip(l,!1,s),ip(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Bc]||(r[Bc]=!0,ip("selectionchange",!1,r))}}function vv(s,r,l,c){switch($v(r)){case 2:var y=aR;break;case 8:y=lR;break;default:y=vp}l=y.bind(null,r,l,s),y=void 0,!kr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function rp(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=Ei(I),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}I=I.parentNode}}c=c.return}Ms(function(){var J=_,j=Vn(l),ie=[];e:{var Y=Zg.get(s);if(Y!==void 0){var W=bi,ge=s;switch(s){case"keypress":if(Ur(l)===0)break e;case"keydown":case"keyup":W=ju;break;case"focusin":ge="focus",W=Or;break;case"focusout":ge="blur",W=Or;break;case"beforeblur":case"afterblur":W=Or;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=E;break;case $g:case Qg:case Xg:W=Ju;break;case Wg:W=N;break;case"scroll":case"scrollend":W=sl;break;case"wheel":W=Q;break;case"copy":case"cut":case"paste":W=Yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=$i;break;case"toggle":case"beforetoggle":W=Me}var Se=(r&4)!==0,rt=!Se&&(s==="scroll"||s==="scrollend"),B=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var z=J,K;z!==null;){var te=z;if(K=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||K===null||B===null||(te=ti(z,B),te!=null&&Se.push(Vl(z,te,K))),rt)break;z=z.return}0<Se.length&&(Y=new W(Y,ge,null,l,j),ie.push({event:Y,listeners:Se}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Y&&l!==tl&&(ge=l.relatedTarget||l.fromElement)&&(Ei(ge)||ge[vi]))break e;if((W||Y)&&(Y=j.window===j?j:(Y=j.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(ge=l.relatedTarget||l.toElement,W=J,ge=ge?Ei(ge):null,ge!==null&&(rt=a(ge),Se=ge.tag,ge!==rt||Se!==5&&Se!==27&&Se!==6)&&(ge=null)):(W=null,ge=J),W!==ge)){if(Se=rl,te="onMouseLeave",B="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(Se=$i,te="onPointerLeave",B="onPointerEnter",z="pointer"),rt=W==null?Y:An(W),K=ge==null?Y:An(ge),Y=new Se(te,z+"leave",W,l,j),Y.target=rt,Y.relatedTarget=K,te=null,Ei(j)===J&&(Se=new Se(B,z+"enter",ge,l,j),Se.target=K,Se.relatedTarget=rt,te=Se),rt=te,W&&ge)t:{for(Se=kw,B=W,z=ge,K=0,te=B;te;te=Se(te))K++;te=0;for(var ve=z;ve;ve=Se(ve))te++;for(;0<K-te;)B=Se(B),K--;for(;0<te-K;)z=Se(z),te--;for(;K--;){if(B===z||z!==null&&B===z.alternate){Se=B;break t}B=Se(B),z=Se(z)}Se=null}else Se=null;W!==null&&Tv(ie,Y,W,Se,!1),ge!==null&&rt!==null&&Tv(ie,rt,ge,Se,!0)}}e:{if(Y=J?An(J):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Ye=Lg;else if(Vg(Y))if(Og)Ye=KI;else{Ye=GI;var ye=BI}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?J&&So(J.elementType)&&(Ye=Lg):Ye=HI;if(Ye&&(Ye=Ye(s,J))){Ug(ie,Ye,l,j);break e}ye&&ye(s,Y,J),s==="focusout"&&J&&Y.type==="number"&&J.memoizedProps.value!=null&&Za(Y,"number",Y.value)}switch(ye=J?An(J):window,s){case"focusin":(Vg(ye)||ye.contentEditable==="true")&&(xo=ye,kd=J,cl=null);break;case"focusout":cl=kd=xo=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Jg(ie,l,j);break;case"selectionchange":if(YI)break;case"keydown":case"keyup":Jg(ie,l,j)}var ke;if(Xe)e:{switch(s){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else No?zr(s,l)&&(ze="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(ze="onCompositionStart");ze&&(Mi&&l.locale!=="ko"&&(No||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&No&&(ke=il()):(Ri=j,nl="value"in Ri?Ri.value:Ri.textContent,No=!0)),ye=Gc(J,ze),0<ye.length&&(ze=new xi(ze,s,null,l,j),ie.push({event:ze,listeners:ye}),ke?ze.data=ke:(ke=bo(l),ke!==null&&(ze.data=ke)))),(ke=Ln?OI(s,l):zI(s,l))&&(ze=Gc(J,"onBeforeInput"),0<ze.length&&(ye=new xi("onBeforeInput","beforeinput",null,l,j),ie.push({event:ye,listeners:ze}),ye.data=ke)),xw(ie,s,J,l,j)}_v(ie,r)})}function Vl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Gc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ti(s,l),y!=null&&c.unshift(Vl(s,y,_)),y=ti(s,r),y!=null&&c.push(Vl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function kw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Tv(s,r,l,c,y){for(var _=r._reactName,A=[];l!==null&&l!==c;){var I=l,k=I.alternate,J=I.stateNode;if(I=I.tag,k!==null&&k===c)break;I!==5&&I!==26&&I!==27||J===null||(k=J,y?(J=ti(l,_),J!=null&&A.unshift(Vl(l,J,k))):y||(J=ti(l,_),J!=null&&A.push(Vl(l,J,k)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var Vw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function Ev(s){return(typeof s=="string"?s:""+s).replace(Vw,`
`).replace(Uw,"")}function Sv(s,r){return r=Ev(r),Ev(s)===r}function st(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||pn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&pn(s,""+c);break;case"className":Cn(s,"class",c);break;case"tabIndex":Cn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(s,l,c);break;case"style":el(s,c,_);break;case"data":if(r!=="object"){Cn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ao(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&st(s,r,"name",y.name,y,null),st(s,r,"formEncType",y.formEncType,y,null),st(s,r,"formMethod",y.formMethod,y,null),st(s,r,"formTarget",y.formTarget,y,null)):(st(s,r,"encType",y.encType,y,null),st(s,r,"method",y.method,y,null),st(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ao(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ei);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ao(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Le("beforetoggle",s),Le("toggle",s),To(s,"popover",c);break;case"xlinkActuate":wt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":To(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Gu.get(l)||l,To(s,l,c))}}function op(s,r,l,c,y,_){switch(l){case"style":el(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?pn(s,c):(typeof c=="number"||typeof c=="bigint")&&pn(s,""+c);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ya.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[Ft]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):To(s,l,c)}}}function Xt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,_,A,l,null)}}y&&st(s,r,"srcSet",l.srcSet,l,null),c&&st(s,r,"src",l.src,l,null);return;case"input":Le("invalid",s);var I=_=A=y=null,k=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var j=l[c];if(j!=null)switch(c){case"name":y=j;break;case"type":A=j;break;case"checked":k=j;break;case"defaultChecked":J=j;break;case"value":_=j;break;case"defaultValue":I=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:st(s,r,c,j,l,null)}}Fu(s,_,I,k,J,A,y,!1);return;case"select":Le("invalid",s),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:st(s,r,y,I,l,null)}r=_,l=A,s.multiple=!!c,r!=null?Rs(s,!!c,r,!1):l!=null&&Rs(s,!!c,l,!0);return;case"textarea":Le("invalid",s),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(I=l[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:st(s,r,A,I,l,null)}bs(s,c,y,_);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(c=l[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(s,r,k,c,l,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(c=0;c<kl.length;c++)Le(kl[c],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,J,c,l,null)}return;default:if(So(r)){for(j in l)l.hasOwnProperty(j)&&(c=l[j],c!==void 0&&op(s,r,j,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&st(s,r,I,c,l,null))}function Lw(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,I=null,k=null,J=null,j=null;for(W in l){var ie=l[W];if(l.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=ie;default:c.hasOwnProperty(W)||st(s,r,W,null,c,ie)}}for(var Y in c){var W=c[Y];if(ie=l[Y],c.hasOwnProperty(Y)&&(W!=null||ie!=null))switch(Y){case"type":_=W;break;case"name":y=W;break;case"checked":J=W;break;case"defaultChecked":j=W;break;case"value":A=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ie&&st(s,r,Y,W,c,ie)}}Eo(s,A,I,k,J,j,_,y);return;case"select":W=A=I=Y=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":W=k;default:c.hasOwnProperty(_)||st(s,r,_,null,c,k)}for(y in c)if(_=c[y],k=l[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==k&&st(s,r,y,_,c,k)}r=I,l=A,c=W,Y!=null?Rs(s,!!l,Y,!1):!!c!=!!l&&(r!=null?Rs(s,!!l,r,!0):Rs(s,!!l,l?[]:"",!1));return;case"textarea":W=Y=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:st(s,r,I,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":Y=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&st(s,r,A,y,c,_)}qu(s,Y,W);return;case"option":for(var ge in l)if(Y=l[ge],l.hasOwnProperty(ge)&&Y!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:st(s,r,ge,null,c,Y)}for(k in c)if(Y=c[k],W=l[k],c.hasOwnProperty(k)&&Y!==W&&(Y!=null||W!=null))switch(k){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:st(s,r,k,Y,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)Y=l[Se],l.hasOwnProperty(Se)&&Y!=null&&!c.hasOwnProperty(Se)&&st(s,r,Se,null,c,Y);for(J in c)if(Y=c[J],W=l[J],c.hasOwnProperty(J)&&Y!==W&&(Y!=null||W!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:st(s,r,J,Y,c,W)}return;default:if(So(r)){for(var rt in l)Y=l[rt],l.hasOwnProperty(rt)&&Y!==void 0&&!c.hasOwnProperty(rt)&&op(s,r,rt,void 0,c,Y);for(j in c)Y=c[j],W=l[j],!c.hasOwnProperty(j)||Y===W||Y===void 0&&W===void 0||op(s,r,j,Y,c,W);return}}for(var B in l)Y=l[B],l.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&st(s,r,B,null,c,Y);for(ie in c)Y=c[ie],W=l[ie],!c.hasOwnProperty(ie)||Y===W||Y==null&&W==null||st(s,r,ie,Y,c,W)}function Av(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ow(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,I=y.duration;if(_&&I&&Av(A)){for(A=0,I=y.responseEnd,c+=1;c<l.length;c++){var k=l[c],J=k.startTime;if(J>I)break;var j=k.transferSize,ie=k.initiatorType;j&&Av(ie)&&(k=k.responseEnd,A+=j*(k<I?1:(I-J)/(k-J)))}if(--c,r+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var ap=null,lp=null;function Hc(s){return s.nodeType===9?s:s.ownerDocument}function Cv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function up(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var cp=null;function zw(){var s=window.event;return s&&s.type==="popstate"?s===cp?!1:(cp=s,!0):(cp=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,Fw=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,qw=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(s){return Rv.resolve(null).then(s).catch(Bw)}:wv;function Bw(s){setTimeout(function(){throw s})}function Ws(s){return s==="head"}function bv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),ia(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Ul(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Ul(l);for(var _=l.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[Ti]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&Ul(s.ownerDocument.body);l=y}while(l);ia(r)}function Nv(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function fp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":fp(l),vo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Gw(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Ti])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Hn(s.nextSibling),s===null)break}return null}function Hw(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Hn(s.nextSibling),s===null))return null;return s}function xv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Hn(s.nextSibling),s===null))return null;return s}function dp(s){return s.data==="$?"||s.data==="$~"}function hp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Kw(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Hn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var pp=null;function Mv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Hn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Dv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Pv(s,r,l){switch(r=Hc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ul(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);vo(s)}var Kn=new Map,kv=new Set;function Kc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var us=oe.d;oe.d={f:Jw,r:Yw,D:$w,C:Qw,L:Xw,m:Ww,X:jw,S:Zw,M:eR};function Jw(){var s=us.f(),r=Uc();return s||r}function Yw(s){var r=kn(s);r!==null&&r.tag===5&&r.type==="form"?Wy(r):us.r(s)}var ea=typeof document>"u"?null:document;function Vv(s,r,l){var c=ea;if(c&&typeof r=="string"&&r){var y=hn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),kv.has(y)||(kv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Xt(r,"link",s),It(r),c.head.appendChild(r)))}}function $w(s){us.D(s),Vv("dns-prefetch",s,null)}function Qw(s,r){us.C(s,r),Vv("preconnect",s,r)}function Xw(s,r,l){us.L(s,r,l);var c=ea;if(c&&s&&r){var y='link[rel="preload"][as="'+hn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+hn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+hn(l.imageSizes)+'"]')):y+='[href="'+hn(s)+'"]';var _=y;switch(r){case"style":_=ta(s);break;case"script":_=na(s)}Kn.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Kn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Ll(_))||r==="script"&&c.querySelector(Ol(_))||(r=c.createElement("link"),Xt(r,"link",s),It(r),c.head.appendChild(r)))}}function Ww(s,r){us.m(s,r);var l=ea;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+hn(c)+'"][href="'+hn(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=na(s)}if(!Kn.has(_)&&(s=T({rel:"modulepreload",href:s},r),Kn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ol(_)))return}c=l.createElement("link"),Xt(c,"link",s),It(c),l.head.appendChild(c)}}}function Zw(s,r,l){us.S(s,r,l);var c=ea;if(c&&s){var y=Si(c).hoistableStyles,_=ta(s);r=r||"default";var A=y.get(_);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Ll(_)))I.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Kn.get(_))&&mp(s,l);var k=A=c.createElement("link");It(k),Xt(k,"link",s),k._p=new Promise(function(J,j){k.onload=J,k.onerror=j}),k.addEventListener("load",function(){I.loading|=1}),k.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Jc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(_,A)}}}function jw(s,r){us.X(s,r);var l=ea;if(l&&s){var c=Si(l).hoistableScripts,y=na(s),_=c.get(y);_||(_=l.querySelector(Ol(y)),_||(s=T({src:s,async:!0},r),(r=Kn.get(y))&&gp(s,r),_=l.createElement("script"),It(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function eR(s,r){us.M(s,r);var l=ea;if(l&&s){var c=Si(l).hoistableScripts,y=na(s),_=c.get(y);_||(_=l.querySelector(Ol(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=Kn.get(y))&&gp(s,r),_=l.createElement("script"),It(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Uv(s,r,l,c){var y=(y=Pe.current)?Kc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ta(l.href),l=Si(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ta(l.href);var _=Si(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(Ll(s)))&&!_._p&&(A.instance=_,A.state.loading=5),Kn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Kn.set(s,l),_||tR(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=na(l),l=Si(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ta(s){return'href="'+hn(s)+'"'}function Ll(s){return'link[rel="stylesheet"]['+s+"]"}function Lv(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function tR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Xt(r,"link",l),It(r),s.head.appendChild(r))}function na(s){return'[src="'+hn(s)+'"]'}function Ol(s){return"script[async]"+s}function Ov(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+hn(l.href)+'"]');if(c)return r.instance=c,It(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),It(c),Xt(c,"style",y),Jc(c,l.precedence,s),r.instance=c;case"stylesheet":y=ta(l.href);var _=s.querySelector(Ll(y));if(_)return r.state.loading|=4,r.instance=_,It(_),_;c=Lv(l),(y=Kn.get(y))&&mp(c,y),_=(s.ownerDocument||s).createElement("link"),It(_);var A=_;return A._p=new Promise(function(I,k){A.onload=I,A.onerror=k}),Xt(_,"link",c),r.state.loading|=4,Jc(_,l.precedence,s),r.instance=_;case"script":return _=na(l.src),(y=s.querySelector(Ol(_)))?(r.instance=y,It(y),y):(c=l,(y=Kn.get(_))&&(c=T({},l),gp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),It(y),Xt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Jc(c,l.precedence,s));return r.instance}function Jc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function mp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function gp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Yc=null;function zv(s,r,l){if(Yc===null){var c=new Map,y=Yc=new Map;y.set(l,c)}else y=Yc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Ti]||_[Ct]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var I=c.get(A);I?I.push(_):c.set(A,[_])}}return c}function Fv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function nR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function qv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function iR(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ta(c.href),_=r.querySelector(Ll(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=$c.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,It(_);return}_=r.ownerDocument||r,c=Lv(c),(y=Kn.get(y))&&mp(c,y),_=_.createElement("link"),It(_);var A=_;A._p=new Promise(function(I,k){A.onload=I,A.onerror=k}),Xt(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=$c.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var yp=0;function sR(s,r){return s.stylesheets&&s.count===0&&Xc(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&Xc(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&yp===0&&(yp=62500*Ow());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Xc(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>yp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function $c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Qc=null;function Xc(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Qc=new Map,r.forEach(rR,s),Qc=null,$c.call(s))}function rR(s,r){if(!(r.state.loading&4)){var l=Qc.get(s);if(l)var c=l.get(null);else{l=new Map,Qc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=$c.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var zl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function oR(s,r,l,c,y,_,A,I,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Bv(s,r,l,c,y,_,A,I,k,J,j,ie){return s=new oR(s,r,l,A,k,J,j,ie,I),r=1,_===!0&&(r|=24),_=wn(3,null,null,r),s.current=_,_.stateNode=s,r=Xd(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},eh(_),s}function Gv(s){return s?(s=Po,s):Po}function Hv(s,r,l,c,y,_){y=Gv(y),c.context===null?c.context=y:c.pendingContext=y,c=Fs(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=qs(s,c,r),l!==null&&(vn(l,s,r),yl(l,s,r))}function Kv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function _p(s,r){Kv(s,r),(s=s.alternate)&&Kv(s,r)}function Jv(s){if(s.tag===13||s.tag===31){var r=Br(s,67108864);r!==null&&vn(r,s,67108864),_p(s,67108864)}}function Yv(s){if(s.tag===13||s.tag===31){var r=Mn();r=xr(r);var l=Br(s,r);l!==null&&vn(l,s,r),_p(s,r)}}var Wc=!0;function aR(s,r,l,c){var y=H.T;H.T=null;var _=oe.p;try{oe.p=2,vp(s,r,l,c)}finally{oe.p=_,H.T=y}}function lR(s,r,l,c){var y=H.T;H.T=null;var _=oe.p;try{oe.p=8,vp(s,r,l,c)}finally{oe.p=_,H.T=y}}function vp(s,r,l,c){if(Wc){var y=Tp(c);if(y===null)rp(s,r,c,Zc,l),Qv(s,c);else if(cR(y,s,r,l,c))c.stopPropagation();else if(Qv(s,c),r&4&&-1<uR.indexOf(s)){for(;y!==null;){var _=kn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=gi(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var k=1<<31-yt(A);I.entanglements[1]|=k,A&=~k}Vi(_),(We&6)===0&&(kc=ln()+500,Pl(0))}}break;case 31:case 13:I=Br(_,2),I!==null&&vn(I,_,2),Uc(),_p(_,2)}if(_=Tp(c),_===null&&rp(s,r,c,Zc,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else rp(s,r,c,null,l)}}function Tp(s){return s=Vn(s),Ep(s)}var Zc=null;function Ep(s){if(Zc=null,s=Ei(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Zc=s,null}function $v(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case Ba:return 2;case Ga:return 8;case Is:case Rd:return 32;case xu:return 268435456;default:return 32}default:return 32}}var Sp=!1,Zs=null,js=null,er=null,Fl=new Map,ql=new Map,tr=[],uR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qv(s,r){switch(s){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(r.pointerId)}}function Bl(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=kn(r),r!==null&&Jv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function cR(s,r,l,c,y){switch(r){case"focusin":return Zs=Bl(Zs,s,r,l,c,y),!0;case"dragenter":return js=Bl(js,s,r,l,c,y),!0;case"mouseover":return er=Bl(er,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Fl.set(_,Bl(Fl.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,ql.set(_,Bl(ql.get(_)||null,s,r,l,c,y)),!0}return!1}function Xv(s){var r=Ei(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Zn(s.priority,function(){Yv(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Zn(s.priority,function(){Yv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function jc(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Tp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);tl=c,l.target.dispatchEvent(c),tl=null}else return r=kn(l),r!==null&&Jv(r),s.blockedOn=l,!1;r.shift()}return!0}function Wv(s,r,l){jc(s)&&l.delete(r)}function fR(){Sp=!1,Zs!==null&&jc(Zs)&&(Zs=null),js!==null&&jc(js)&&(js=null),er!==null&&jc(er)&&(er=null),Fl.forEach(Wv),ql.forEach(Wv)}function ef(s,r){s.blockedOn===r&&(s.blockedOn=null,Sp||(Sp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fR)))}var tf=null;function Zv(s){tf!==s&&(tf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){tf===s&&(tf=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Ep(c||l)===null)continue;break}var _=kn(l);_!==null&&(s.splice(r,3),r-=3,Th(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function ia(s){function r(k){return ef(k,s)}Zs!==null&&ef(Zs,s),js!==null&&ef(js,s),er!==null&&ef(er,s),Fl.forEach(r),ql.forEach(r);for(var l=0;l<tr.length;l++){var c=tr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<tr.length&&(l=tr[0],l.blockedOn===null);)Xv(l),l.blockedOn===null&&tr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[Ft]||null;if(typeof _=="function")A||Zv(l);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Ft]||null)I=A.formAction;else if(Ep(y)!==null)continue}else I=A.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),Zv(l)}}}function jv(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Ap(s){this._internalRoot=s}nf.prototype.render=Ap.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Mn();Hv(l,c,s,r,null,null)},nf.prototype.unmount=Ap.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Hv(s.current,2,null,s,null,null),Uc(),r[vi]=null}};function nf(s){this._internalRoot=s}nf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Uu();s={blockedOn:null,target:s,priority:r};for(var l=0;l<tr.length&&r!==0&&r<tr[l].priority;l++);tr.splice(l,0,s),l===0&&Xv(s)}};var eT=e.version;if(eT!=="19.2.4")throw Error(i(527,eT,"19.2.4"));oe.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var dR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{Xn=sf.inject(dR),Kt=sf}catch{}}return Hl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=a_,_=l_,A=u_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Bv(s,1,!1,null,null,l,c,null,y,_,A,jv),s[vi]=r.current,sp(s),new Ap(r)},Hl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=a_,A=l_,I=u_,k=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),r=Bv(s,1,!0,r,l??null,c,y,k,_,A,I,jv),r.context=Gv(null),l=r.current,c=Mn(),c=xr(c),y=Fs(c),y.callback=null,qs(l,y,c),l=c,r.current.lanes=l,br(r,l),Vi(r),s[vi]=r.current,sp(s),new nf(r)},Hl.version="19.2.4",Hl}var cT;function AR(){if(cT)return wp.exports;cT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wp.exports=SR(),wp.exports}var CR=AR();const IR=ES(CR),wR=()=>{};var fT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},RR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],g=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},AS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,g=o+2<n.length,h=g?n[o+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,R=h&63;g||(R=64,u||(S=64)),i.push(t[v],t[T],t[S],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||T==null)throw new bR;const S=a<<2|d>>4;if(i.push(S),h!==64){const R=d<<4&240|h>>2;if(i.push(R),T!==64){const P=h<<6&192|T;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NR=function(n){const e=SS(n);return AS.encodeByteArray(e,!0)},Nf=function(n){return NR(n).replace(/\./g,"")},CS=function(n){try{return AS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>xR().__FIREBASE_DEFAULTS__,DR=()=>{if(typeof process>"u"||typeof fT>"u")return;const n=fT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&CS(n[1]);return e&&JSON.parse(e)},td=()=>{try{return wR()||MR()||DR()||PR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IS=n=>{var e,t;return(t=(e=td())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},kR=n=>{const e=IS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},wS=()=>{var n;return(n=td())==null?void 0:n.config},RS=n=>{var e;return(e=td())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nf(JSON.stringify(t)),Nf(JSON.stringify(u)),""].join(".")}const eu={};function LR(){const n={prod:[],emulator:[]};for(const e of Object.keys(eu))eu[e]?n.emulator.push(e):n.prod.push(e);return n}function OR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dT=!1;function NS(n,e){if(typeof window>"u"||typeof document>"u"||!Na(window.location.host)||eu[n]===e||eu[n]||dT)return;eu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=LR().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{dT=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=OR(i),R=t("text"),P=document.getElementById(R)||document.createElement("span"),F=t("learnmore"),L=document.getElementById(F)||document.createElement("a"),$=t("preprendIcon"),ne=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;d(Z),v(L,F);const ae=h();g(ne,$),Z.append(ne,P,L,ae),document.body.appendChild(Z)}a?(P.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function FR(){var e;const n=(e=td())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HR(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JR(){try{return typeof indexedDB=="object"}catch{return!1}}function YR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="FirebaseError";class Es extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=$R,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?QR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Es(o,d,i)}}function QR(n,e){return n.replace(XR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const XR=/\{\$([^}]+)}/g;function WR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function oo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(hT(a)&&hT(u)){if(!oo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function hT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ZR(n,e){const t=new jR(n,e);return t.subscribe.bind(t)}class jR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");eb(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=xp),o.error===void 0&&(o.error=xp),o.complete===void 0&&(o.complete=xp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(n){return n&&n._delegate?n._delegate:n}class ao{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new VR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ib(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nb(n){return n===to?void 0:n}function ib(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const rb={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},ob=qe.INFO,ab={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},lb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=ab[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=ob,this._logHandler=lb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const ub=(n,e)=>e.some(t=>n instanceof t);let pT,mT;function cb(){return pT||(pT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fb(){return mT||(mT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xS=new WeakMap,$p=new WeakMap,MS=new WeakMap,Mp=new WeakMap,Vm=new WeakMap;function db(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ur(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&xS.set(t,n)}).catch(()=>{}),Vm.set(e,n),e}function hb(n){if($p.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});$p.set(n,e)}let Qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pb(n){Qp=n(Qp)}function mb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Dp(this),e,...t);return MS.set(i,e.sort?e.sort():[e]),ur(i)}:fb().includes(n)?function(...e){return n.apply(Dp(this),e),ur(xS.get(this))}:function(...e){return ur(n.apply(Dp(this),e))}}function gb(n){return typeof n=="function"?mb(n):(n instanceof IDBTransaction&&hb(n),ub(n,cb())?new Proxy(n,Qp):n)}function ur(n){if(n instanceof IDBRequest)return db(n);if(Mp.has(n))return Mp.get(n);const e=gb(n);return e!==n&&(Mp.set(n,e),Vm.set(e,n)),e}const Dp=n=>Vm.get(n);function yb(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=ur(u);return i&&u.addEventListener("upgradeneeded",g=>{i(ur(u.result),g.oldVersion,g.newVersion,ur(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{a&&g.addEventListener("close",()=>a()),o&&g.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const _b=["get","getKey","getAll","getAllKeys","count"],vb=["put","add","delete","clear"],Pp=new Map;function gT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=vb.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||_b.includes(t)))return;const a=async function(u,...d){const g=this.transaction(u,o?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&g.done]))[0]};return Pp.set(e,a),a}pb(n=>({...n,get:(e,t,i)=>gT(e,t)||n.get(e,t,i),has:(e,t)=>!!gT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Eb(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Eb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",yT="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new km("@firebase/app"),Sb="@firebase/app-compat",Ab="@firebase/analytics-compat",Cb="@firebase/analytics",Ib="@firebase/app-check-compat",wb="@firebase/app-check",Rb="@firebase/auth",bb="@firebase/auth-compat",Nb="@firebase/database",xb="@firebase/data-connect",Mb="@firebase/database-compat",Db="@firebase/functions",Pb="@firebase/functions-compat",kb="@firebase/installations",Vb="@firebase/installations-compat",Ub="@firebase/messaging",Lb="@firebase/messaging-compat",Ob="@firebase/performance",zb="@firebase/performance-compat",Fb="@firebase/remote-config",qb="@firebase/remote-config-compat",Bb="@firebase/storage",Gb="@firebase/storage-compat",Hb="@firebase/firestore",Kb="@firebase/ai",Jb="@firebase/firestore-compat",Yb="firebase",$b="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]",Qb={[Xp]:"fire-core",[Sb]:"fire-core-compat",[Cb]:"fire-analytics",[Ab]:"fire-analytics-compat",[wb]:"fire-app-check",[Ib]:"fire-app-check-compat",[Rb]:"fire-auth",[bb]:"fire-auth-compat",[Nb]:"fire-rtdb",[xb]:"fire-data-connect",[Mb]:"fire-rtdb-compat",[Db]:"fire-fn",[Pb]:"fire-fn-compat",[kb]:"fire-iid",[Vb]:"fire-iid-compat",[Ub]:"fire-fcm",[Lb]:"fire-fcm-compat",[Ob]:"fire-perf",[zb]:"fire-perf-compat",[Fb]:"fire-rc",[qb]:"fire-rc-compat",[Bb]:"fire-gcs",[Gb]:"fire-gcs-compat",[Hb]:"fire-fst",[Jb]:"fire-fst-compat",[Kb]:"fire-vertex","fire-js":"fire-js",[Yb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new Map,Xb=new Map,Zp=new Map;function _T(n,e){try{n.container.addComponent(e)}catch(t){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ea(n){const e=n.name;if(Zp.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,n);for(const t of xf.values())_T(t,n);for(const t of Xb.values())_T(t,n);return!0}function Um(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new gu("app","Firebase",Wb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=$b;function DS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Wp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw cr.create("bad-app-name",{appName:String(o)});if(t||(t=wS()),!t)throw cr.create("no-options");const a=xf.get(o);if(a){if(oo(t,a.options)&&oo(i,a.config))return a;throw cr.create("duplicate-app",{appName:o})}const u=new sb(o);for(const g of Zp.values())u.addComponent(g);const d=new Zb(t,i,u);return xf.set(o,d),d}function PS(n=Wp){const e=xf.get(n);if(!e&&n===Wp&&wS())return DS();if(!e)throw cr.create("no-app",{appName:n});return e}function fr(n,e,t){let i=Qb[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(u.join(" "));return}Ea(new ao(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="firebase-heartbeat-database",eN=1,ou="firebase-heartbeat-store";let kp=null;function kS(){return kp||(kp=yb(jb,eN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ou)}catch(t){console.warn(t)}}}}).catch(n=>{throw cr.create("idb-open",{originalErrorMessage:n.message})})),kp}async function tN(n){try{const t=(await kS()).transaction(ou),i=await t.objectStore(ou).get(VS(n));return await t.done,i}catch(e){if(e instanceof Es)ps.warn(e.message);else{const t=cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ps.warn(t.message)}}}async function vT(n,e){try{const i=(await kS()).transaction(ou,"readwrite");await i.objectStore(ou).put(e,VS(n)),await i.done}catch(t){if(t instanceof Es)ps.warn(t.message);else{const i=cr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ps.warn(i.message)}}}function VS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=1024,iN=30;class sN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=TT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>iN){const u=aN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ps.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=TT(),{heartbeatsToSend:i,unsentEntries:o}=rN(this._heartbeatsCache.heartbeats),a=Nf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ps.warn(t),""}}}function TT(){return new Date().toISOString().substring(0,10)}function rN(n,e=nN){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),ET(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ET(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class oN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JR()?YR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ET(n){return Nf(JSON.stringify({version:2,heartbeats:n})).length}function aN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n){Ea(new ao("platform-logger",e=>new Tb(e),"PRIVATE")),Ea(new ao("heartbeat",e=>new sN(e),"PRIVATE")),fr(Xp,yT,n),fr(Xp,yT,"esm2020"),fr("fire-js","")}lN("");function US(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uN=US,LS=new gu("auth","Firebase",US());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=new km("@firebase/auth");function cN(n,...e){Mf.logLevel<=qe.WARN&&Mf.warn(`Auth (${xa}): ${n}`,...e)}function yf(n,...e){Mf.logLevel<=qe.ERROR&&Mf.error(`Auth (${xa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,...e){throw Lm(n,...e)}function Oi(n,...e){return Lm(n,...e)}function OS(n,e,t){const i={...uN(),[e]:t};return new gu("auth","Firebase",i).create(e,{appName:n.name})}function ds(n){return OS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return LS.create(n,...e)}function Ce(n,e,...t){if(!n)throw Lm(e,...t)}function cs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yf(e),new Error(e)}function gs(n,e){n||cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function fN(){return ST()==="http:"||ST()==="https:"}function ST(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fN()||BR()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=zR()||GR()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n,e){gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gN=new _u(3e4,6e4);function vu(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ma(n,e,t,i,o={}){return FS(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=yu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:g,...a};return qR()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Na(n.emulatorConfig.host)&&(h.credentials="include"),zS.fetch()(await qS(n,n.config.apiHost,t,d),h)})}async function FS(n,e,t){n._canInitEmulator=!1;const i={...pN,...e};try{const o=new yN(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw rf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[g,h]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw rf(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw rf(n,"user-disabled",u);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw OS(n,v,h);ms(n,v)}}catch(o){if(o instanceof Es)throw o;ms(n,"network-request-failed",{message:String(o)})}}async function zm(n,e,t,i,o={}){const a=await Ma(n,e,t,i,o);return"mfaPendingCredential"in a&&ms(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function qS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Om(n.config,o):`${n.config.apiScheme}://${o}`;return mN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class yN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Oi(this.auth,"network-request-failed")),gN.get())})}}function rf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Oi(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(n,e){return Ma(n,"POST","/v1/accounts:delete",e)}async function Df(n,e){return Ma(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vN(n,e=!1){const t=an(n),i=await t.getIdToken(e),o=Fm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:tu(Vp(o.auth_time)),issuedAtTime:tu(Vp(o.iat)),expirationTime:tu(Vp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Vp(n){return Number(n)*1e3}function Fm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const o=CS(t);return o?JSON.parse(o):(yf("Failed to decode base64 JWT payload"),null)}catch(o){return yf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function AT(n){const e=Fm(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Es&&TN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function TN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tu(this.lastLoginAt),this.creationTime=tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(n){var T;const e=n.auth,t=await n.getIdToken(),i=await au(n,Df(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(T=o.providerUserInfo)!=null&&T.length?BS(o.providerUserInfo):[],u=AN(n.providerData,a),d=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new em(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function SN(n){const e=an(n);await Pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AN(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function BS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(n,e){const t=await FS(n,{},async()=>{const i=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await qS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:i};return n.emulatorConfig&&Na(n.emulatorConfig.host)&&(g.credentials="include"),zS.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IN(n,e){return Ma(n,"POST","/v2/accounts:revokeToken",vu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=AT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await CN(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new da;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new da,this.toJSON())}_performRefresh(){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new EN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new em(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await au(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vN(this,e)}reload(){return SN(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Pf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await au(this,_N(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:R,providerData:P,stsTokenManager:F}=t;Ce(T&&F,e,"internal-error");const L=da.fromJSON(this.name,F);Ce(typeof T=="string",e,"internal-error"),ir(i,e.name),ir(o,e.name),Ce(typeof S=="boolean",e,"internal-error"),Ce(typeof R=="boolean",e,"internal-error"),ir(a,e.name),ir(u,e.name),ir(d,e.name),ir(g,e.name),ir(h,e.name),ir(v,e.name);const $=new li({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:R,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:L,createdAt:h,lastLoginAt:v});return P&&Array.isArray(P)&&($.providerData=P.map(ne=>({...ne}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,t,i=!1){const o=new da;o.updateFromServerResponse(t);const a=new li({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Pf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?BS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new da;d.updateFromIdToken(i);const g=new li({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new em(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(g,h),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;function fs(n){gs(n instanceof Function,"Expected a class definition");let e=CT.get(n);return e?(gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,CT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}GS.type="NONE";const IT=GS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n,e,t){return`firebase:${n}:${e}:${t}`}class ha{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=_f(this.userKey,o.apiKey,a),this.fullPersistenceKey=_f("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Df(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ha(fs(IT),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||fs(IT);const u=_f(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const v=await h._get(u);if(v){let T;if(typeof v=="string"){const S=await Df(e,{idToken:v}).catch(()=>{});if(!S)break;T=await li._fromGetAccountInfoResponse(e,S,v)}else T=li._fromJSON(e,v);h!==a&&(d=T),a=h;break}}catch{}const g=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!g.length?new ha(a,e,i):(a=g[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new ha(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QS(e))return"Blackberry";if(XS(e))return"Webos";if(KS(e))return"Safari";if((e.includes("chrome/")||JS(e))&&!e.includes("edge/"))return"Chrome";if($S(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HS(n=on()){return/firefox\//i.test(n)}function KS(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JS(n=on()){return/crios\//i.test(n)}function YS(n=on()){return/iemobile/i.test(n)}function $S(n=on()){return/android/i.test(n)}function QS(n=on()){return/blackberry/i.test(n)}function XS(n=on()){return/webos/i.test(n)}function qm(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wN(n=on()){var e;return qm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function RN(){return HR()&&document.documentMode===10}function WS(n=on()){return qm(n)||$S(n)||XS(n)||QS(n)||/windows phone/i.test(n)||YS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e=[]){let t;switch(n){case"Browser":t=wT(on());break;case"Worker":t=`${wT(on())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const g=e(a);u(g)}catch(g){d(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(n,e={}){return Ma(n,"GET","/v2/passwordPolicy",vu(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=6;class MN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RT(this),this.idTokenSubscription=new RT(this),this.beforeStateQueue=new bN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Df(this,{idToken:e}),i=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Jn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(ds(this));const t=e?an(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NN(this),t=new MN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await IN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&cN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Tu(n){return an(n)}class RT{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZR(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PN(n){Bm=n}function kN(n){return Bm.loadJS(n)}function VN(){return Bm.gapiScript}function UN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(n,e){const t=Um(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(oo(a,e??{}))return o;ms(o,"already-initialized")}return t.initialize({options:e})}function ON(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function zN(n,e,t){const i=Tu(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=jS(e),{host:u,port:d}=FN(e),g=d===null?"":`:${d}`,h={url:`${a}//${u}${g}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(oo(h,i.config.emulator)&&oo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Na(u)?(bS(`${a}//${u}${g}`),NS("Auth",!0)):qN()}function jS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FN(n){const e=jS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:bT(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:bT(u)}}}function bT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,t){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(n,e){return zm(n,"POST","/v1/accounts:signInWithIdp",vu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="http://localhost";class lo extends eA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new lo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return pa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,pa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pa(e,t)}buildRequest(){const e={requestUri:BN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends tA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Eu{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return lo._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return rr.credential(t,i)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Eu{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Eu{constructor(){super("twitter.com")}static credential(e,t){return lo._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ar.credential(t,i)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(n,e){return zm(n,"POST","/v1/accounts:signUp",vu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await li._fromIdTokenResponse(e,i,o),u=NT(i);return new ys({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=NT(i);return new ys({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function NT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(n){var o;if(Jn(n.app))return Promise.reject(ds(n));const e=Tu(n);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new ys({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await GN(e,{returnSecureToken:!0}),i=await ys._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends Es{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new kf(e,t,i,o)}}function nA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(n,a,e,i):a})}async function KN(n,e,t=!1){const i=await au(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ys._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(n,e,t=!1){const{auth:i}=n;if(Jn(i.app))return Promise.reject(ds(i));const o="reauthenticate";try{const a=await au(n,nA(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=Fm(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),ys._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ms(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(n,e,t=!1){if(Jn(n.app))return Promise.reject(ds(n));const i="signIn",o=await nA(n,i,e),a=await ys._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(n,e){return zm(n,"POST","/v1/accounts:signInWithCustomToken",vu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(n,e){if(Jn(n.app))return Promise.reject(ds(n));const t=Tu(n),i=await $N(t,{token:e,returnSecureToken:!0}),o=await ys._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(o.user),o}function XN(n,e,t,i){return an(n).onIdTokenChanged(e,t,i)}function WN(n,e,t){return an(n).beforeAuthStateChanged(e,t)}function ZN(n,e,t,i){return an(n).onAuthStateChanged(e,t,i)}const Vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vf,"1"),this.storage.removeItem(Vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=1e3,e1=10;class sA extends iA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);RN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,e1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},jN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sA.type="LOCAL";const t1=sA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA extends iA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rA.type="SESSION";const oA=rA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new nd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),g=await n1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,g)=>{const h=Gm("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function s1(n){zi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function r1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function a1(){return aA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebaseLocalStorageDb",l1=1,Uf="firebaseLocalStorage",uA="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(n,e){return n.transaction([Uf],e?"readwrite":"readonly").objectStore(Uf)}function u1(){const n=indexedDB.deleteDatabase(lA);return new Su(n).toPromise()}function tm(){const n=indexedDB.open(lA,l1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Uf,{keyPath:uA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Uf)?e(i):(i.close(),await u1(),e(await tm()))})})}async function xT(n,e,t){const i=id(n,!0).put({[uA]:e,value:t});return new Su(i).toPromise()}async function c1(n,e){const t=id(n,!1).get(e),i=await new Su(t).toPromise();return i===void 0?null:i.value}function MT(n,e){const t=id(n,!0).delete(e);return new Su(t).toPromise()}const f1=800,d1=3;class cA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>d1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(a1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await r1(),!this.activeServiceWorker)return;this.sender=new i1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tm();return await xT(e,Vf,"1"),await MT(e,Vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>xT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>c1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>MT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=id(o,!1).getAll();return new Su(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cA.type="LOCAL";const h1=cA;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(n,e){return e?fs(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends eA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m1(n){return YN(n.auth,new Hm(n),n.bypassAuthState)}function g1(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),JN(t,new Hm(n),n.bypassAuthState)}async function y1(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),KN(t,new Hm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m1;case"linkViaPopup":case"linkViaRedirect":return y1;case"reauthViaPopup":case"reauthViaRedirect":return g1;default:ms(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new _u(2e3,1e4);class ua extends fA{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,ua.currentPopupAction&&ua.currentPopupAction.cancel(),ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=Gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_1.get())};e()}}ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="pendingRedirect",vf=new Map;class T1 extends fA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=vf.get(this.auth._key());if(!e){try{const i=await E1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}vf.set(this.auth._key(),e)}return this.bypassAuthState||vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E1(n,e){const t=C1(e),i=A1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function S1(n,e){vf.set(n._key(),e)}function A1(n){return fs(n._redirectPersistence)}function C1(n){return _f(v1,n.config.apiKey,n.name)}async function I1(n,e,t=!1){if(Jn(n.app))return Promise.reject(ds(n));const i=Tu(n),o=p1(i,e),u=await new T1(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=600*1e3;class R1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!dA(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Oi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w1&&this.cachedEventUids.clear(),this.cachedEventUids.has(DT(e))}saveEventToCache(e){this.cachedEventUids.add(DT(e)),this.lastProcessedEventTime=Date.now()}}function DT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(n,e={}){return Ma(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M1=/^https?/;async function D1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await N1(n);for(const t of e)try{if(P1(t))return}catch{}ms(n,"unauthorized-domain")}function P1(n){const e=jp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!M1.test(t))return!1;if(x1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new _u(3e4,6e4);function PT(){const n=zi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function V1(n){return new Promise((e,t)=>{var o,a,u;function i(){PT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PT(),t(Oi(n,"network-request-failed"))},timeout:k1.get()})}if((a=(o=zi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=zi().gapi)!=null&&u.load)i();else{const d=UN("iframefcb");return zi()[d]=()=>{gapi.load?i():t(Oi(n,"network-request-failed"))},kN(`${VN()}?onload=${d}`).catch(g=>t(g))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function U1(n){return Tf=Tf||V1(n),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=new _u(5e3,15e3),O1="__/auth/iframe",z1="emulator/auth/iframe",F1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B1(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Om(e,z1):`https://${n.config.authDomain}/${O1}`,i={apiKey:e.apiKey,appName:n.name,v:xa},o=q1.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${yu(i).slice(1)}`}async function G1(n){const e=await U1(n),t=zi().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:B1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F1,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Oi(n,"network-request-failed"),d=zi().setTimeout(()=>{a(u)},L1.get());function g(){zi().clearTimeout(d),o(i)}i.ping(g).then(g,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K1=500,J1=600,Y1="_blank",$1="http://localhost";class kT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q1(n,e,t,i=K1,o=J1){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const g={...H1,width:i.toString(),height:o.toString(),top:a,left:u},h=on().toLowerCase();t&&(d=JS(h)?Y1:t),HS(h)&&(e=e||$1,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[R,P])=>`${S}${R}=${P},`,"");if(wN(h)&&d!=="_self")return X1(e||"",d),new kT(null);const T=window.open(e||"",d,v);Ce(T,n,"popup-blocked");try{T.focus()}catch{}return new kT(T)}function X1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="__/auth/handler",Z1="emulator/auth/handler",j1=encodeURIComponent("fac");async function VT(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:xa,eventId:o};if(e instanceof tA){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",WR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Eu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await n._getAppCheckToken(),h=g?`#${j1}=${encodeURIComponent(g)}`:"";return`${ex(n)}?${yu(d).slice(1)}${h}`}function ex({config:n}){return n.emulator?Om(n,Z1):`https://${n.authDomain}/${W1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="webStorageSupport";class tx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oA,this._completeRedirectFn=I1,this._overrideRedirectResult=S1}async _openPopup(e,t,i,o){var u;gs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await VT(e,t,i,jp(),o);return Q1(e,a,Gm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await VT(e,t,i,jp(),o);return s1(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(gs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await G1(e),i=new R1(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Up,{type:Up},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Up];a!==void 0&&t(!!a),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=D1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WS()||KS()||qm()}}const nx=tx;var UT="@firebase/auth",LT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rx(n){Ea(new ao("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZS(n)},h=new DN(i,o,a,g);return ON(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ea(new ao("auth-internal",e=>{const t=Tu(e.getProvider("auth").getImmediate());return(i=>new ix(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(UT,LT,sx(n)),fr(UT,LT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=300,ax=RS("authIdTokenMaxAge")||ox;let OT=null;const lx=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ax)return;const o=t==null?void 0:t.token;OT!==o&&(OT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ux(n=PS()){const e=Um(n,"auth");if(e.isInitialized())return e.getImmediate();const t=LN(n,{popupRedirectResolver:nx,persistence:[h1,t1,oA]}),i=RS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=lx(a.toString());WN(t,u,()=>u(t.currentUser)),XN(t,d=>u(d))}}const o=IS("auth");return o&&zN(t,`http://${o}`),t}function cx(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}PN({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Oi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",cx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rx("Browser");var zT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dr,hA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,x){function b(){}b.prototype=x.prototype,M.F=x.prototype,M.prototype=new b,M.prototype.constructor=M,M.D=function(U,V,q){for(var D=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)D[xe-2]=arguments[xe];return x.prototype[V].apply(U,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,x,b){b||(b=0);const U=Array(16);if(typeof x=="string")for(var V=0;V<16;++V)U[V]=x.charCodeAt(b++)|x.charCodeAt(b++)<<8|x.charCodeAt(b++)<<16|x.charCodeAt(b++)<<24;else for(V=0;V<16;++V)U[V]=x[b++]|x[b++]<<8|x[b++]<<16|x[b++]<<24;x=M.g[0],b=M.g[1],V=M.g[2];let q=M.g[3],D;D=x+(q^b&(V^q))+U[0]+3614090360&4294967295,x=b+(D<<7&4294967295|D>>>25),D=q+(V^x&(b^V))+U[1]+3905402710&4294967295,q=x+(D<<12&4294967295|D>>>20),D=V+(b^q&(x^b))+U[2]+606105819&4294967295,V=q+(D<<17&4294967295|D>>>15),D=b+(x^V&(q^x))+U[3]+3250441966&4294967295,b=V+(D<<22&4294967295|D>>>10),D=x+(q^b&(V^q))+U[4]+4118548399&4294967295,x=b+(D<<7&4294967295|D>>>25),D=q+(V^x&(b^V))+U[5]+1200080426&4294967295,q=x+(D<<12&4294967295|D>>>20),D=V+(b^q&(x^b))+U[6]+2821735955&4294967295,V=q+(D<<17&4294967295|D>>>15),D=b+(x^V&(q^x))+U[7]+4249261313&4294967295,b=V+(D<<22&4294967295|D>>>10),D=x+(q^b&(V^q))+U[8]+1770035416&4294967295,x=b+(D<<7&4294967295|D>>>25),D=q+(V^x&(b^V))+U[9]+2336552879&4294967295,q=x+(D<<12&4294967295|D>>>20),D=V+(b^q&(x^b))+U[10]+4294925233&4294967295,V=q+(D<<17&4294967295|D>>>15),D=b+(x^V&(q^x))+U[11]+2304563134&4294967295,b=V+(D<<22&4294967295|D>>>10),D=x+(q^b&(V^q))+U[12]+1804603682&4294967295,x=b+(D<<7&4294967295|D>>>25),D=q+(V^x&(b^V))+U[13]+4254626195&4294967295,q=x+(D<<12&4294967295|D>>>20),D=V+(b^q&(x^b))+U[14]+2792965006&4294967295,V=q+(D<<17&4294967295|D>>>15),D=b+(x^V&(q^x))+U[15]+1236535329&4294967295,b=V+(D<<22&4294967295|D>>>10),D=x+(V^q&(b^V))+U[1]+4129170786&4294967295,x=b+(D<<5&4294967295|D>>>27),D=q+(b^V&(x^b))+U[6]+3225465664&4294967295,q=x+(D<<9&4294967295|D>>>23),D=V+(x^b&(q^x))+U[11]+643717713&4294967295,V=q+(D<<14&4294967295|D>>>18),D=b+(q^x&(V^q))+U[0]+3921069994&4294967295,b=V+(D<<20&4294967295|D>>>12),D=x+(V^q&(b^V))+U[5]+3593408605&4294967295,x=b+(D<<5&4294967295|D>>>27),D=q+(b^V&(x^b))+U[10]+38016083&4294967295,q=x+(D<<9&4294967295|D>>>23),D=V+(x^b&(q^x))+U[15]+3634488961&4294967295,V=q+(D<<14&4294967295|D>>>18),D=b+(q^x&(V^q))+U[4]+3889429448&4294967295,b=V+(D<<20&4294967295|D>>>12),D=x+(V^q&(b^V))+U[9]+568446438&4294967295,x=b+(D<<5&4294967295|D>>>27),D=q+(b^V&(x^b))+U[14]+3275163606&4294967295,q=x+(D<<9&4294967295|D>>>23),D=V+(x^b&(q^x))+U[3]+4107603335&4294967295,V=q+(D<<14&4294967295|D>>>18),D=b+(q^x&(V^q))+U[8]+1163531501&4294967295,b=V+(D<<20&4294967295|D>>>12),D=x+(V^q&(b^V))+U[13]+2850285829&4294967295,x=b+(D<<5&4294967295|D>>>27),D=q+(b^V&(x^b))+U[2]+4243563512&4294967295,q=x+(D<<9&4294967295|D>>>23),D=V+(x^b&(q^x))+U[7]+1735328473&4294967295,V=q+(D<<14&4294967295|D>>>18),D=b+(q^x&(V^q))+U[12]+2368359562&4294967295,b=V+(D<<20&4294967295|D>>>12),D=x+(b^V^q)+U[5]+4294588738&4294967295,x=b+(D<<4&4294967295|D>>>28),D=q+(x^b^V)+U[8]+2272392833&4294967295,q=x+(D<<11&4294967295|D>>>21),D=V+(q^x^b)+U[11]+1839030562&4294967295,V=q+(D<<16&4294967295|D>>>16),D=b+(V^q^x)+U[14]+4259657740&4294967295,b=V+(D<<23&4294967295|D>>>9),D=x+(b^V^q)+U[1]+2763975236&4294967295,x=b+(D<<4&4294967295|D>>>28),D=q+(x^b^V)+U[4]+1272893353&4294967295,q=x+(D<<11&4294967295|D>>>21),D=V+(q^x^b)+U[7]+4139469664&4294967295,V=q+(D<<16&4294967295|D>>>16),D=b+(V^q^x)+U[10]+3200236656&4294967295,b=V+(D<<23&4294967295|D>>>9),D=x+(b^V^q)+U[13]+681279174&4294967295,x=b+(D<<4&4294967295|D>>>28),D=q+(x^b^V)+U[0]+3936430074&4294967295,q=x+(D<<11&4294967295|D>>>21),D=V+(q^x^b)+U[3]+3572445317&4294967295,V=q+(D<<16&4294967295|D>>>16),D=b+(V^q^x)+U[6]+76029189&4294967295,b=V+(D<<23&4294967295|D>>>9),D=x+(b^V^q)+U[9]+3654602809&4294967295,x=b+(D<<4&4294967295|D>>>28),D=q+(x^b^V)+U[12]+3873151461&4294967295,q=x+(D<<11&4294967295|D>>>21),D=V+(q^x^b)+U[15]+530742520&4294967295,V=q+(D<<16&4294967295|D>>>16),D=b+(V^q^x)+U[2]+3299628645&4294967295,b=V+(D<<23&4294967295|D>>>9),D=x+(V^(b|~q))+U[0]+4096336452&4294967295,x=b+(D<<6&4294967295|D>>>26),D=q+(b^(x|~V))+U[7]+1126891415&4294967295,q=x+(D<<10&4294967295|D>>>22),D=V+(x^(q|~b))+U[14]+2878612391&4294967295,V=q+(D<<15&4294967295|D>>>17),D=b+(q^(V|~x))+U[5]+4237533241&4294967295,b=V+(D<<21&4294967295|D>>>11),D=x+(V^(b|~q))+U[12]+1700485571&4294967295,x=b+(D<<6&4294967295|D>>>26),D=q+(b^(x|~V))+U[3]+2399980690&4294967295,q=x+(D<<10&4294967295|D>>>22),D=V+(x^(q|~b))+U[10]+4293915773&4294967295,V=q+(D<<15&4294967295|D>>>17),D=b+(q^(V|~x))+U[1]+2240044497&4294967295,b=V+(D<<21&4294967295|D>>>11),D=x+(V^(b|~q))+U[8]+1873313359&4294967295,x=b+(D<<6&4294967295|D>>>26),D=q+(b^(x|~V))+U[15]+4264355552&4294967295,q=x+(D<<10&4294967295|D>>>22),D=V+(x^(q|~b))+U[6]+2734768916&4294967295,V=q+(D<<15&4294967295|D>>>17),D=b+(q^(V|~x))+U[13]+1309151649&4294967295,b=V+(D<<21&4294967295|D>>>11),D=x+(V^(b|~q))+U[4]+4149444226&4294967295,x=b+(D<<6&4294967295|D>>>26),D=q+(b^(x|~V))+U[11]+3174756917&4294967295,q=x+(D<<10&4294967295|D>>>22),D=V+(x^(q|~b))+U[2]+718787259&4294967295,V=q+(D<<15&4294967295|D>>>17),D=b+(q^(V|~x))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+q&4294967295}i.prototype.v=function(M,x){x===void 0&&(x=M.length);const b=x-this.blockSize,U=this.C;let V=this.h,q=0;for(;q<x;){if(V==0)for(;q<=b;)o(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<x;)if(U[V++]=M.charCodeAt(q++),V==this.blockSize){o(this,U),V=0;break}}else for(;q<x;)if(U[V++]=M[q++],V==this.blockSize){o(this,U),V=0;break}}this.h=V,this.o+=x},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;x=this.o*8;for(var b=M.length-8;b<M.length;++b)M[b]=x&255,x/=256;for(this.v(M),M=Array(16),x=0,b=0;b<4;++b)for(let U=0;U<32;U+=8)M[x++]=this.g[b]>>>U&255;return M};function a(M,x){var b=d;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=x(M)}function u(M,x){this.h=x;const b=[];let U=!0;for(let V=M.length-1;V>=0;V--){const q=M[V]|0;U&&q==x||(b[V]=q,U=!1)}this.g=b}var d={};function g(M){return-128<=M&&M<128?a(M,function(x){return new u([x|0],x<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return L(h(-M));const x=[];let b=1;for(let U=0;M>=b;U++)x[U]=M/b|0,b*=4294967296;return new u(x,0)}function v(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return L(v(M.substring(1),x));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=h(Math.pow(x,8));let U=T;for(let q=0;q<M.length;q+=8){var V=Math.min(8,M.length-q);const D=parseInt(M.substring(q,q+V),x);V<8?(V=h(Math.pow(x,V)),U=U.j(V).add(h(D))):(U=U.j(b),U=U.add(h(D)))}return U}var T=g(0),S=g(1),R=g(16777216);n=u.prototype,n.m=function(){if(F(this))return-L(this).m();let M=0,x=1;for(let b=0;b<this.g.length;b++){const U=this.i(b);M+=(U>=0?U:4294967296+U)*x,x*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(P(this))return"0";if(F(this))return"-"+L(this).toString(M);const x=h(Math.pow(M,6));var b=this;let U="";for(;;){const V=ae(b,x).g;b=$(b,V.j(x));let q=((b.g.length>0?b.g[0]:b.h)>>>0).toString(M);if(b=V,P(b))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function P(M){if(M.h!=0)return!1;for(let x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function F(M){return M.h==-1}n.l=function(M){return M=$(this,M),F(M)?-1:P(M)?0:1};function L(M){const x=M.g.length,b=[];for(let U=0;U<x;U++)b[U]=~M.g[U];return new u(b,~M.h).add(S)}n.abs=function(){return F(this)?L(this):this},n.add=function(M){const x=Math.max(this.g.length,M.g.length),b=[];let U=0;for(let V=0;V<=x;V++){let q=U+(this.i(V)&65535)+(M.i(V)&65535),D=(q>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);U=D>>>16,q&=65535,D&=65535,b[V]=D<<16|q}return new u(b,b[b.length-1]&-2147483648?-1:0)};function $(M,x){return M.add(L(x))}n.j=function(M){if(P(this)||P(M))return T;if(F(this))return F(M)?L(this).j(L(M)):L(L(this).j(M));if(F(M))return L(this.j(L(M)));if(this.l(R)<0&&M.l(R)<0)return h(this.m()*M.m());const x=this.g.length+M.g.length,b=[];for(var U=0;U<2*x;U++)b[U]=0;for(U=0;U<this.g.length;U++)for(let V=0;V<M.g.length;V++){const q=this.i(U)>>>16,D=this.i(U)&65535,xe=M.i(V)>>>16,me=M.i(V)&65535;b[2*U+2*V]+=D*me,ne(b,2*U+2*V),b[2*U+2*V+1]+=q*me,ne(b,2*U+2*V+1),b[2*U+2*V+1]+=D*xe,ne(b,2*U+2*V+1),b[2*U+2*V+2]+=q*xe,ne(b,2*U+2*V+2)}for(M=0;M<x;M++)b[M]=b[2*M+1]<<16|b[2*M];for(M=x;M<2*x;M++)b[M]=0;return new u(b,0)};function ne(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function Z(M,x){this.g=M,this.h=x}function ae(M,x){if(P(x))throw Error("division by zero");if(P(M))return new Z(T,T);if(F(M))return x=ae(L(M),x),new Z(L(x.g),L(x.h));if(F(x))return x=ae(M,L(x)),new Z(L(x.g),x.h);if(M.g.length>30){if(F(M)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var b=S,U=x;U.l(M)<=0;)b=X(b),U=X(U);var V=de(b,1),q=de(U,1);for(U=de(U,2),b=de(b,2);!P(U);){var D=q.add(U);D.l(M)<=0&&(V=V.add(b),q=D),U=de(U,1),b=de(b,1)}return x=$(M,V.j(x)),new Z(V,x)}for(V=T;M.l(x)>=0;){for(b=Math.max(1,Math.floor(M.m()/x.m())),U=Math.ceil(Math.log(b)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=h(b),D=q.j(x);F(D)||D.l(M)>0;)b-=U,q=h(b),D=q.j(x);P(q)&&(q=S),V=V.add(q),M=$(M,D)}return new Z(V,M)}n.B=function(M){return ae(this,M).h},n.and=function(M){const x=Math.max(this.g.length,M.g.length),b=[];for(let U=0;U<x;U++)b[U]=this.i(U)&M.i(U);return new u(b,this.h&M.h)},n.or=function(M){const x=Math.max(this.g.length,M.g.length),b=[];for(let U=0;U<x;U++)b[U]=this.i(U)|M.i(U);return new u(b,this.h|M.h)},n.xor=function(M){const x=Math.max(this.g.length,M.g.length),b=[];for(let U=0;U<x;U++)b[U]=this.i(U)^M.i(U);return new u(b,this.h^M.h)};function X(M){const x=M.g.length+1,b=[];for(let U=0;U<x;U++)b[U]=M.i(U)<<1|M.i(U-1)>>>31;return new u(b,M.h)}function de(M,x){const b=x>>5;x%=32;const U=M.g.length-b,V=[];for(let q=0;q<U;q++)V[q]=x>0?M.i(q+b)>>>x|M.i(q+b+1)<<32-x:M.i(q+b);return new u(V,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,hA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,dr=u}).apply(typeof zT<"u"?zT:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pA,Ql,mA,Ef,nm,gA,yA,_A;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var E=0;E<m.length;++E){var C=m[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(m,E){if(E)e:{var C=i;m=m.split(".");for(var N=0;N<m.length-1;N++){var G=m[N];if(!(G in C))break e;C=C[G]}m=m[m.length-1],N=C[m],E=E(N),E!=N&&E!=null&&e(C,m,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(E){var C=[],N;for(N in E)Object.prototype.hasOwnProperty.call(E,N)&&C.push([N,E[N]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,C){return m.call.apply(m.bind,arguments)}function h(m,E,C){return h=g,h.apply(null,arguments)}function v(m,E){var C=Array.prototype.slice.call(arguments,1);return function(){var N=C.slice();return N.push.apply(N,arguments),m.apply(this,N)}}function T(m,E){function C(){}C.prototype=E.prototype,m.Z=E.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(N,G,Q){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return E.prototype[G].apply(N,ue)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function R(m){const E=m.length;if(E>0){const C=Array(E);for(let N=0;N<E;N++)C[N]=m[N];return C}return[]}function P(m,E){for(let N=1;N<arguments.length;N++){const G=arguments[N];var C=typeof G;if(C=C!="object"?C:G?Array.isArray(G)?"array":C:"null",C=="array"||C=="object"&&typeof G.length=="number"){C=m.length||0;const Q=G.length||0;m.length=C+Q;for(let ue=0;ue<Q;ue++)m[C+ue]=G[ue]}else m.push(G)}}class F{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function L(m){u.setTimeout(()=>{throw m},0)}function $(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class ne{constructor(){this.h=this.g=null}add(E,C){const N=Z.get();N.set(E,C),this.h?this.h.next=N:this.g=N,this.h=N}}var Z=new F(()=>new ae,m=>m.reset());class ae{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let X,de=!1,M=new ne,x=()=>{const m=Promise.resolve(void 0);X=()=>{m.then(b)}};function b(){for(var m;m=$();){try{m.h.call(m.g)}catch(C){L(C)}var E=Z;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}de=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function xe(m,E){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(xe,V),xe.prototype.init=function(m,E){const C=this.type=m.type,N=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(C=="mouseover"?E=m.fromElement:C=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),H=0;function oe(m,E,C,N,G){this.listener=m,this.proxy=null,this.src=E,this.type=C,this.capture=!!N,this.ha=G,this.key=++H,this.da=this.fa=!1}function le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Te(m,E,C){for(const N in m)E.call(C,m[N],N,m)}function Ve(m,E){for(const C in m)E.call(void 0,m[C],C,m)}function O(m){const E={};for(const C in m)E[C]=m[C];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(m,E){let C,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(C in N)m[C]=N[C];for(let Q=0;Q<ee.length;Q++)C=ee[Q],Object.prototype.hasOwnProperty.call(N,C)&&(m[C]=N[C])}}function pe(m){this.src=m,this.g={},this.h=0}pe.prototype.add=function(m,E,C,N,G){const Q=m.toString();m=this.g[Q],m||(m=this.g[Q]=[],this.h++);const ue=Pe(m,E,N,G);return ue>-1?(E=m[ue],C||(E.fa=!1)):(E=new oe(E,this.src,Q,!!N,G),E.fa=C,m.push(E)),E};function Ie(m,E){const C=E.type;if(C in m.g){var N=m.g[C],G=Array.prototype.indexOf.call(N,E,void 0),Q;(Q=G>=0)&&Array.prototype.splice.call(N,G,1),Q&&(le(E),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Pe(m,E,C,N){for(let G=0;G<m.length;++G){const Q=m[G];if(!Q.da&&Q.listener==E&&Q.capture==!!C&&Q.ha==N)return G}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),kt={};function ft(m,E,C,N,G){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)ft(m,E[Q],C,N,G);return null}return C=qa(C),m&&m[me]?m.J(E,C,d(N)?!!N.capture:!1,G):Cr(m,E,C,!1,N,G)}function Cr(m,E,C,N,G,Q){if(!E)throw Error("Invalid event type");const ue=d(G)?!!G.capture:!!G;let Me=Ir(m);if(Me||(m[Ke]=Me=new pe(m)),C=Me.add(E,C,N,ue,Q),C.proxy)return C;if(N=po(),C.proxy=N,N.src=m,N.listener=C,m.addEventListener)q||(G=ue),G===void 0&&(G=!1),m.addEventListener(E.toString(),N,G);else if(m.attachEvent)m.attachEvent(pi(E.toString()),N);else if(m.addListener&&m.removeListener)m.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return C}function po(){function m(C){return E.call(m.src,m.listener,C)}const E=za;return m}function mo(m,E,C,N,G){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)mo(m,E[Q],C,N,G);else N=d(N)?!!N.capture:!!N,C=qa(C),m&&m[me]?(m=m.i,Q=String(E).toString(),Q in m.g&&(E=m.g[Q],C=Pe(E,C,N,G),C>-1&&(le(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete m.g[Q],m.h--)))):m&&(m=Ir(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Pe(E,C,N,G)),(C=m>-1?E[m]:null)&&go(C))}function go(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[me])Ie(E.i,m);else{var C=m.type,N=m.proxy;E.removeEventListener?E.removeEventListener(C,N,m.capture):E.detachEvent?E.detachEvent(pi(C),N):E.addListener&&E.removeListener&&E.removeListener(N),(C=Ir(E))?(Ie(C,m),C.h==0&&(C.src=null,E[Ke]=null)):le(m)}}}function pi(m){return m in kt?kt[m]:kt[m]="on"+m}function za(m,E){if(m.da)m=!0;else{E=new xe(E,this);const C=m.listener,N=m.ha||m.src;m.fa&&go(m),m=C.call(N,E)}return m}function Ir(m){return m=m[Ke],m instanceof pe?m:null}var Fa="__closure_events_fn_"+(Math.random()*1e9>>>0);function qa(m){return typeof m=="function"?m:(m[Fa]||(m[Fa]=function(E){return m.handleEvent(E)}),m[Fa])}function St(){U.call(this),this.i=new pe(this),this.M=this,this.G=null}T(St,U),St.prototype[me]=!0,St.prototype.removeEventListener=function(m,E,C,N){mo(this,m,E,C,N)};function Vt(m,E){var C,N=m.G;if(N)for(C=[];N;N=N.G)C.push(N);if(m=m.M,N=E.type||E,typeof E=="string")E=new V(E,m);else if(E instanceof V)E.target=E.target||m;else{var G=E;E=new V(N,m),ce(E,G)}G=!0;let Q,ue;if(C)for(ue=C.length-1;ue>=0;ue--)Q=E.g=C[ue],G=Cs(Q,N,!0,E)&&G;if(Q=E.g=m,G=Cs(Q,N,!0,E)&&G,G=Cs(Q,N,!1,E)&&G,C)for(ue=0;ue<C.length;ue++)Q=E.g=C[ue],G=Cs(Q,N,!1,E)&&G}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const C=m.g[E];for(let N=0;N<C.length;N++)le(C[N]);delete m.g[E],m.h--}}this.G=null},St.prototype.J=function(m,E,C,N){return this.i.add(String(m),E,!1,C,N)},St.prototype.K=function(m,E,C,N){return this.i.add(String(m),E,!0,C,N)};function Cs(m,E,C,N){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let G=!0;for(let Q=0;Q<E.length;++Q){const ue=E[Q];if(ue&&!ue.da&&ue.capture==C){const Me=ue.listener,_t=ue.ha||ue.src;ue.fa&&Ie(m.i,ue),G=Me.call(_t,N)!==!1&&G}}return G&&!N.defaultPrevented}function wd(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function Nu(m){m.g=wd(()=>{m.g=null,m.i&&(m.i=!1,Nu(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class ln extends U{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Nu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(m){U.call(this),this.h=m,this.g={}}T(wr,U);var Ba=[];function Ga(m){Te(m.g,function(E,C){this.g.hasOwnProperty(C)&&go(E)},m),m.g={}}wr.prototype.N=function(){wr.Z.N.call(this),Ga(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=u.JSON.stringify,Rd=u.JSON.parse,xu=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Mu(){}function Du(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){V.call(this,"d")}T(Kt,V);function Pn(){V.call(this,"c")}T(Pn,V);var yt={},Pu=null;function yo(){return Pu=Pu||new St}yt.Ia="serverreachability";function ku(m){V.call(this,yt.Ia,m)}T(ku,V);function mi(m){const E=yo();Vt(E,new ku(E))}yt.STAT_EVENT="statevent";function Rr(m,E){V.call(this,yt.STAT_EVENT,m),this.stat=E}T(Rr,V);function At(m){const E=yo();Vt(E,new Rr(E,m))}yt.Ja="timingevent";function gi(m,E){V.call(this,yt.Ja,m),this.size=E}T(gi,V);function yi(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function bd(m,E,C,N,G,Q){m.info(function(){if(m.g)if(Q){var ue="",Me=Q.split("&");for(let Xe=0;Xe<Me.length;Xe++){var _t=Me[Xe].split("=");if(_t.length>1){const dt=_t[0];_t=_t[1];const Ln=dt.split("_");ue=Ln.length>=2&&Ln[1]=="type"?ue+(dt+"="+_t+"&"):ue+(dt+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+E+`
`+C+`
`+ue})}function Vu(m,E,C,N,G,Q,ue){m.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+E+`
`+C+`
`+Q+" "+ue})}function _i(m,E,C,N){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Nd(m,C)+(N?" "+N:"")})}function br(m,E){m.info(function(){return"TIMEOUT: "+E})}Wn.prototype.info=function(){};function Nd(m,E){if(!m.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var C=Q[m];if(!(C.length<2)){var N=C[1];if(Array.isArray(N)&&!(N.length<1)){var G=N[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<N.length;ue++)N[ue]=""}}}}return Is(Q)}catch{return E}}var Nr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ha={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ka;function xr(){}T(xr,Mu),xr.prototype.g=function(){return new XMLHttpRequest},Ka=new xr;function Ki(m){return encodeURIComponent(String(m))}function Uu(m){var E=1;m=m.split(":");const C=[];for(;E>0&&m.length;)C.push(m.shift()),E--;return m.length&&C.push(m.join(":")),C}function Zn(m,E,C,N){this.j=m,this.i=E,this.l=C,this.S=N||1,this.V=new wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new jn}function jn(){this.i=null,this.g="",this.h=!1}var Ct={},Ft={};function vi(m,E,C){m.M=1,m.A=Mr(wt(E)),m.u=C,m.R=!0,_o(m,null)}function _o(m,E){m.F=Date.now(),Ti(m),m.B=wt(m.A);var C=m.B,N=m.S;Array.isArray(N)||(N=[String(N)]),So(C.i,"t",N),m.C=0,C=m.j.L,m.h=new jn,m.g=Wu(m.j,C?E:null,!m.u),m.P>0&&(m.O=new ln(h(m.Y,m,m.g),m.P)),E=m.V,C=m.g,N=m.ba;var G="readystatechange";Array.isArray(G)||(G&&(Ba[0]=G.toString()),G=Ba);for(let Q=0;Q<G.length;Q++){const ue=ft(C,G[Q],N||E.handleEvent,!1,E.h||E);if(!ue)break;E.g[ue.key]=ue}E=m.J?O(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),mi(),bd(m.i,m.v,m.B,m.l,m.S,m.u)}Zn.prototype.ba=function(m){m=m.target;const E=this.O;E&&ni(m)==3?E.j():this.Y(m)},Zn.prototype.Y=function(m){try{if(m==this.g)e:{const Me=ni(this.g),_t=this.g.ya(),Xe=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Me!=4||_t==7||(_t==8||Xe<=0?mi(3):mi(2)),Ei(this);var E=this.g.ca();this.X=E;var C=xd(this);if(this.o=E==200,Vu(this.i,this.v,this.B,this.l,this.S,Me,E),this.o){if(this.U&&!this.L){t:{if(this.g){var N,G=this.g;if((N=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var Q=N;break t}}Q=null}if(m=Q)_i(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Si(this,m);else{this.o=!1,this.m=3,At(12),An(this),kn(this);break e}}if(this.R){m=!0;let dt;for(;!this.K&&this.C<C.length;)if(dt=Ou(this,C),dt==Ft){Me==4&&(this.m=4,At(14),m=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Ct){this.m=4,At(15),_i(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else _i(this.i,this.l,dt,null),Si(this,dt);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||C.length!=0||this.h.h||(this.m=1,At(16),m=!1),this.o=this.o&&m,!m)_i(this.i,this.l,C,"[Invalid Chunked Response]"),An(this),kn(this);else if(C.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),ol(ue),ue.P=!0,At(11))}}else _i(this.i,this.l,C,null),Si(this,C);Me==4&&An(this),this.o&&!this.K&&(Me==4?Yu(this.j,this):(this.o=!1,Ti(this)))}else Yi(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),An(this),kn(this)}}}catch{}finally{}};function xd(m){if(!Lu(m))return m.g.la();const E=Jt(m.g);if(E==="")return"";let C="";const N=E.length,G=ni(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return An(m),kn(m),"";m.h.i=new u.TextDecoder}for(let Q=0;Q<N;Q++)m.h.h=!0,C+=m.h.i.decode(E[Q],{stream:!(G&&Q==N-1)});return E.length=0,m.h.g+=C,m.C=0,m.h.g}function Lu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Ou(m,E){var C=m.C,N=E.indexOf(`
`,C);return N==-1?Ft:(C=Number(E.substring(C,N)),isNaN(C)?Ct:(N+=1,N+C>E.length?Ft:(E=E.slice(N,N+C),m.C=N+C,E)))}Zn.prototype.cancel=function(){this.K=!0,An(this)};function Ti(m){m.T=Date.now()+m.H,vo(m,m.H)}function vo(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=yi(h(m.aa,m),E)}function Ei(m){m.D&&(u.clearTimeout(m.D),m.D=null)}Zn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(br(this.i,this.B),this.M!=2&&(mi(),At(17)),An(this),this.m=2,kn(this)):vo(this,this.T-m)};function kn(m){m.j.I==0||m.K||Yu(m.j,m)}function An(m){Ei(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Ga(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Si(m,E){try{var C=m.j;if(C.I!=0&&(C.g==m||Ci(C.h,m))){if(!m.L&&Ci(C.h,m)&&C.I==3){try{var N=C.Ba.g.parse(E)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)Ro(C),Ps(C);else break e;Or(C),At(18)}}else C.xa=G[1],0<C.xa-C.K&&G[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=yi(h(C.Va,C),6e3));Ai(C.h)<=1&&C.ta&&(C.ta=void 0)}else xi(C,11)}else if((m.L||C.g==m)&&Ro(C),!D(E))for(G=C.Ba.g.parse(E),E=0;E<G.length;E++){let Xe=G[E];const dt=Xe[0];if(!(dt<=C.K))if(C.K=dt,Xe=Xe[1],C.I==2)if(Xe[0]=="c"){C.M=Xe[1],C.ba=Xe[2];const Ln=Xe[3];Ln!=null&&(C.ka=Ln,C.j.info("VER="+C.ka));const Mi=Xe[4];Mi!=null&&(C.za=Mi,C.j.info("SVER="+C.za));const ii=Xe[5];ii!=null&&typeof ii=="number"&&ii>0&&(N=1.5*ii,C.O=N,C.j.info("backChannelRequestTimeoutMs_="+N)),N=C;const si=m.g;if(si){const zr=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zr){var Q=N.h;Q.g||zr.indexOf("spdy")==-1&&zr.indexOf("quic")==-1&&zr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&($a(Q,Q.h),Q.h=null))}if(N.G){const bo=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(N.wa=bo,je(N.J,N.G,bo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),N=C;var ue=m;if(N.na=Xu(N,N.L?N.ba:null,N.W),ue.L){Qa(N.h,ue);var Me=ue,_t=N.O;_t&&(Me.H=_t),Me.D&&(Ei(Me),Ti(Me)),N.g=ue}else Ku(N);C.i.length>0&&Ni(C)}else Xe[0]!="stop"&&Xe[0]!="close"||xi(C,7);else C.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?xi(C,7):sl(C):Xe[0]!="noop"&&C.l&&C.l.qa(Xe),C.A=0)}}mi(4)}catch{}}var It=class{constructor(m,E){this.g=m,this.map=E}};function Ja(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ya(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ai(m){return m.h?1:m.g?m.g.size:0}function Ci(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function $a(m,E){m.g?m.g.add(E):m.h=E}function Qa(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Ja.prototype.cancel=function(){if(this.i=Xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Xa(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const C of m.g.values())E=E.concat(C.G);return E}return R(m.i)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function To(m,E){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const N=m[C].indexOf("=");let G,Q=null;N>=0?(G=m[C].substring(0,N),Q=m[C].substring(N+1)):G=m[C],E(G,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Cn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Cn?(this.l=m.l,qt(this,m.j),this.o=m.o,this.g=m.g,ws(this,m.u),this.h=m.h,Wa(this,Gu(m.i)),this.m=m.m):m&&(E=String(m).match(zu))?(this.l=!1,qt(this,E[1]||"",!0),this.o=Ii(E[2]||""),this.g=Ii(E[3]||"",!0),ws(this,E[4]),this.h=Ii(E[5]||"",!0),Wa(this,E[6]||"",!0),this.m=Ii(E[7]||"")):(this.l=!1,this.i=new bs(null,this.l))}Cn.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Dr(E,Eo,!0),":");var C=this.g;return(C||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Dr(E,Eo,!0),"@"),m.push(Ki(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Dr(C,C.charAt(0)=="/"?Za:Fu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Dr(C,qu)),m.join("")},Cn.prototype.resolve=function(m){const E=wt(this);let C=!!m.j;C?qt(E,m.j):C=!!m.o,C?E.o=m.o:C=!!m.g,C?E.g=m.g:C=m.u!=null;var N=m.h;if(C)ws(E,m.u);else if(C=!!m.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var G=E.h.lastIndexOf("/");G!=-1&&(N=E.h.slice(0,G+1)+N)}if(G=N,G==".."||G==".")N="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){N=G.lastIndexOf("/",0)==0,G=G.split("/");const Q=[];for(let ue=0;ue<G.length;){const Me=G[ue++];Me=="."?N&&ue==G.length&&Q.push(""):Me==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),N&&ue==G.length&&Q.push("")):(Q.push(Me),N=!0)}N=Q.join("/")}else N=G}return C?E.h=N:C=m.i.toString()!=="",C?Wa(E,Gu(m.i)):C=!!m.m,C&&(E.m=m.m),E};function wt(m){return new Cn(m)}function qt(m,E,C){m.j=C?Ii(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function ws(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Wa(m,E,C){E instanceof bs?(m.i=E,Ao(m.i,m.l)):(C||(E=Dr(E,Rs)),m.i=new bs(E,m.l))}function je(m,E,C){m.i.set(E,C)}function Mr(m){return je(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ii(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Dr(m,E,C){return typeof m=="string"?(m=encodeURI(m).replace(E,hn),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function hn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Eo=/[#\/\?@]/g,Fu=/[#\?:]/g,Za=/[#\?]/g,Rs=/[#\?@]/g,qu=/#/g;function bs(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function pn(m){m.g||(m.g=new Map,m.h=0,m.i&&To(m.i,function(E,C){m.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=bs.prototype,n.add=function(m,E){pn(this),this.i=null,m=Ns(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(E),this.h+=1,this};function Bu(m,E){pn(m),E=Ns(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function ja(m,E){return pn(m),E=Ns(m,E),m.g.has(E)}n.forEach=function(m,E){pn(this),this.g.forEach(function(C,N){C.forEach(function(G){m.call(E,G,N,this)},this)},this)};function el(m,E){pn(m);let C=[];if(typeof E=="string")ja(m,E)&&(C=C.concat(m.g.get(Ns(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)C=C.concat(m[E]);return C}n.set=function(m,E){return pn(this),this.i=null,m=Ns(this,m),ja(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=el(this,m),m.length>0?String(m[0]):E):E};function So(m,E,C){Bu(m,E),C.length>0&&(m.i=null,m.g.set(Ns(m,E),R(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let N=0;N<E.length;N++){var C=E[N];const G=Ki(C);C=el(this,C);for(let Q=0;Q<C.length;Q++){let ue=G;C[Q]!==""&&(ue+="="+Ki(C[Q])),m.push(ue)}}return this.i=m.join("&")};function Gu(m){const E=new bs;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Ns(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Ao(m,E){E&&!m.j&&(pn(m),m.i=null,m.g.forEach(function(C,N){const G=N.toLowerCase();N!=G&&(Bu(this,N),So(this,G,C))},m)),m.j=E}function ei(m,E){const C=new Wn;if(u.Image){const N=new Image;N.onload=v(Vn,C,"TestLoadImage: loaded",!0,E,N),N.onerror=v(Vn,C,"TestLoadImage: error",!1,E,N),N.onabort=v(Vn,C,"TestLoadImage: abort",!1,E,N),N.ontimeout=v(Vn,C,"TestLoadImage: timeout",!1,E,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=m}else E(!1)}function tl(m,E){const C=new Wn,N=new AbortController,G=setTimeout(()=>{N.abort(),Vn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:N.signal}).then(Q=>{clearTimeout(G),Q.ok?Vn(C,"TestPingServer: ok",!0,E):Vn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(G),Vn(C,"TestPingServer: error",!1,E)})}function Vn(m,E,C,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(C)}catch{}}function xs(){this.g=new xu}function wi(m){this.i=m.Sb||null,this.h=m.ab||!1}T(wi,Mu),wi.prototype.g=function(){return new Pr(this.i,this.h)};function Pr(m,E){St.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Pr,St),n=Pr.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,ti(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Co(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Co(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Ms(this):ti(this),this.readyState==3&&Co(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Ms(this))},n.Na=function(m){this.g&&(this.response=m,Ms(this))},n.ga=function(){this.g&&Ms(this)};function Ms(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ti(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=E.next();return m.join(`\r
`)};function ti(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Un(m){let E="";return Te(m,function(C,N){E+=N,E+=":",E+=C,E+=`\r
`}),E}function kr(m,E,C){e:{for(N in C){var N=!1;break e}N=!0}N||(C=Un(C),typeof m=="string"?C!=null&&Ki(C):je(m,E,C))}function nt(m){St.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,St);var Ri=/^https?$/i,nl=["POST","PUT"];n=nt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,C,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ka.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(Q){Vr(this,Q);return}if(m=C||"",C=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)C.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Q of N.keys())C.set(Q,N.get(Q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),G=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(nl,E,void 0)>=0)||N||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of C)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Q){Vr(this,Q)}};function Vr(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,il(m),Ji(m)}function il(m){m.A||(m.A=!0,Vt(m,"complete"),Vt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Vt(this,"complete"),Vt(this,"abort"),Ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ji(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ur(this):this.Xa())},n.Xa=function(){Ur(this)};function Ur(m){if(m.h&&typeof a<"u"){if(m.v&&ni(m)==4)setTimeout(m.Ca.bind(m),0);else if(Vt(m,"readystatechange"),ni(m)==4){m.h=!1;try{const Q=m.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var N;if(N=Q===0){let ue=String(m.D).match(zu)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),N=!Ri.test(ue?ue.toLowerCase():"")}C=N}if(C)Vt(m,"complete"),Vt(m,"success");else{m.o=6;try{var G=ni(m)>2?m.g.statusText:""}catch{G=""}m.l=G+" ["+m.ca()+"]",il(m)}}finally{Ji(m)}}}}function Ji(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,E||Vt(m,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ni(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Rd(E)}};function Jt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(m){const E={};m=(m.g&&ni(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<m.length;N++){if(D(m[N]))continue;var C=Uu(m[N]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=E[G]||[];E[G]=Q,Q.push(C)}Ve(E,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(m,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||E}function Ds(m){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,m),this.Za=bi("retryDelaySeedMs",1e4,m),this.Ta=bi("forwardChannelMaxRetries",2,m),this.va=bi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ja(m&&m.concurrentRequestLimit),this.Ba=new xs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ds.prototype,n.ka=8,n.I=1,n.connect=function(m,E,C,N){At(0),this.W=m,this.H=E||{},C&&N!==void 0&&(this.H.OSID=C,this.H.OAID=N),this.F=this.X,this.J=Xu(this,null,this.W),Ni(this)};function sl(m){if(Io(m),m.I==3){var E=m.V++,C=wt(m.J);if(je(C,"SID",m.M),je(C,"RID",E),je(C,"TYPE","terminate"),Lr(m,C),E=new Zn(m,m.j,E),E.M=2,E.A=Mr(wt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=Wu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ti(E)}Qu(m)}function Ps(m){m.g&&(ol(m),m.g.cancel(),m.g=null)}function Io(m){Ps(m),m.v&&(u.clearTimeout(m.v),m.v=null),Ro(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Ni(m){if(!Ya(m.h)&&!m.m){m.m=!0;var E=m.Ea;X||x(),de||(X(),de=!0),M.add(E,m),m.D=0}}function wo(m,E){return Ai(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=yi(h(m.Ea,m,E),$u(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const G=new Zn(this,this.j,m);let Q=this.o;if(this.U&&(Q?(Q=O(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(G.J=Q,Q=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var N=this.i[C];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(E+=N,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=Hu(this,G,E),C=wt(this.J),je(C,"RID",m),je(C,"CVER",22),this.G&&je(C,"X-HTTP-Session-Id",this.G),Lr(this,C),Q&&(this.R?E="headers="+Ki(Un(Q))+"&"+E:this.u&&kr(C,this.u,Q)),$a(this.h,G),this.Ra&&je(C,"TYPE","init"),this.S?(je(C,"$req",E),je(C,"SID","null"),G.U=!0,vi(G,C,null)):vi(G,C,E),this.I=2}}else this.I==3&&(m?rl(this,m):this.i.length==0||Ya(this.h)||rl(this))};function rl(m,E){var C;E?C=E.l:C=m.V++;const N=wt(m.J);je(N,"SID",m.M),je(N,"RID",C),je(N,"AID",m.K),Lr(m,N),m.u&&m.o&&kr(N,m.u,m.o),C=new Zn(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Hu(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),$a(m.h,C),vi(C,N,E)}function Lr(m,E){m.H&&Te(m.H,function(C,N){je(E,N,C)}),m.l&&Te({},function(C,N){je(E,N,C)})}function Hu(m,E,C){C=Math.min(m.i.length,C);const N=m.l?h(m.l.Ka,m.l,m):null;e:{var G=m.i;let Me=-1;for(;;){const _t=["count="+C];Me==-1?C>0?(Me=G[0].g,_t.push("ofs="+Me)):Me=0:_t.push("ofs="+Me);let Xe=!0;for(let dt=0;dt<C;dt++){var Q=G[dt].g;const Ln=G[dt].map;if(Q-=Me,Q<0)Me=Math.max(0,G[dt].g-100),Xe=!1;else try{Q="req"+Q+"_"||"";try{var ue=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Mi,ii]of ue){let si=ii;d(ii)&&(si=Is(ii)),_t.push(Q+Mi+"="+encodeURIComponent(si))}}catch(Mi){throw _t.push(Q+"type="+encodeURIComponent("_badmap")),Mi}}catch{N&&N(Ln)}}if(Xe){ue=_t.join("&");break e}}ue=void 0}return m=m.i.splice(0,C),E.G=m,ue}function Ku(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;X||x(),de||(X(),de=!0),M.add(E,m),m.A=0}}function Or(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=yi(h(m.Da,m),$u(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=yi(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Ps(this),Ju(this))};function ol(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Ju(m){m.g=new Zn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=wt(m.na);je(E,"RID","rpc"),je(E,"SID",m.M),je(E,"AID",m.K),je(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&je(E,"TO",m.ia),je(E,"TYPE","xmlhttp"),Lr(m,E),m.u&&m.o&&kr(E,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=Mr(wt(E)),C.u=null,C.R=!0,_o(C,m)}n.Va=function(){this.C!=null&&(this.C=null,Ps(this),Or(this),At(19))};function Ro(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Yu(m,E){var C=null;if(m.g==E){Ro(m),ol(m),m.g=null;var N=2}else if(Ci(m.h,E))C=E.G,Qa(m.h,E),N=1;else return;if(m.I!=0){if(E.o)if(N==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var G=m.D;N=yo(),Vt(N,new gi(N,C)),Ni(m)}else Ku(m);else if(G=E.m,G==3||G==0&&E.X>0||!(N==1&&wo(m,E)||N==2&&Or(m)))switch(C&&C.length>0&&(E=m.h,E.i=E.i.concat(C)),G){case 1:xi(m,5);break;case 4:xi(m,10);break;case 3:xi(m,6);break;default:xi(m,2)}}}function $u(m,E){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*E}function xi(m,E){if(m.j.info("Error code "+E),E==2){var C=h(m.bb,m),N=m.Ua;const G=!N;N=new Cn(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||qt(N,"https"),Mr(N),G?ei(N.toString(),C):tl(N.toString(),C)}else At(2);m.I=0,m.l&&m.l.pa(E),Qu(m),Io(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Qu(m){if(m.I=0,m.ja=[],m.l){const E=Xa(m.h);(E.length!=0||m.i.length!=0)&&(P(m.ja,E),P(m.ja,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.oa()}}function Xu(m,E,C){var N=C instanceof Cn?wt(C):new Cn(C);if(N.g!="")E&&(N.g=E+"."+N.g),ws(N,N.u);else{var G=u.location;N=G.protocol,E=E?E+"."+G.hostname:G.hostname,G=+G.port;const Q=new Cn(null);N&&qt(Q,N),E&&(Q.g=E),G&&ws(Q,G),C&&(Q.h=C),N=Q}return C=m.G,E=m.wa,C&&E&&je(N,C,E),je(N,"VER",m.ka),Lr(m,N),N}function Wu(m,E,C){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new nt(new wi({ab:C})):new nt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}n=Zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ks(){}ks.prototype.g=function(m,E){return new un(m,E)};function un(m,E){St.call(this),this.g=new Ds(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new $i(this)}T(un,St),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){sl(this.g)},un.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=Is(m),m=C);E.i.push(new It(E.Ya++,m)),E.I==3&&Ni(E)},un.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,un.Z.N.call(this)};function ju(m){Kt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const C in E){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(ju,Kt);function ec(){Pn.call(this),this.status=1}T(ec,Pn);function $i(m){this.g=m}T($i,Zu),$i.prototype.ra=function(){Vt(this.g,"a")},$i.prototype.qa=function(m){Vt(this.g,new ju(m))},$i.prototype.pa=function(m){Vt(this.g,new ec)},$i.prototype.oa=function(){Vt(this.g,"b")},ks.prototype.createWebChannel=ks.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,_A=function(){return new ks},yA=function(){return yo()},gA=yt,nm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,Ef=Nr,Ha.COMPLETE="complete",mA=Ha,Du.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",St.prototype.listen=St.prototype.J,Ql=Du,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,pA=nt}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="12.8.0";function fx(n){Da=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new km("@firebase/firestore");function sa(){return pr.logLevel}function dx(n){pr.setLogLevel(n)}function he(n,...e){if(pr.logLevel<=qe.DEBUG){const t=e.map(Km);pr.debug(`Firestore (${Da}): ${n}`,...t)}}function _s(n,...e){if(pr.logLevel<=qe.ERROR){const t=e.map(Km);pr.error(`Firestore (${Da}): ${n}`,...t)}}function Sa(n,...e){if(pr.logLevel<=qe.WARN){const t=e.map(Km);pr.warn(`Firestore (${Da}): ${n}`,...t)}}function Km(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,vA(n,i,t)}function vA(n,e,t){let i=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw _s(i),new Error(i)}function Ze(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||vA(e,o,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class px{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mx{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let a=new so;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new so,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=a;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new so)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new TA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class gx{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class yx{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new gx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class FT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _x{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new FT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new FT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=vx(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Be(n,e){return n<e?-1:n>e?1:0}function im(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return Lp(o)===Lp(a)?Be(o,a):Lp(o)?1:-1}return Be(n.length,e.length)}const Tx=55296,Ex=57343;function Lp(n){const e=n.charCodeAt(0);return e>=Tx&&e<=Ex}function Aa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="__name__";class Li{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ae(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Li.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Be(e.length,t.length)}static compareSegments(e,t){const i=Li.isNumericId(e),o=Li.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Li.extractNumericId(e).compare(Li.extractNumericId(t)):im(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dr.fromString(e.substring(4,e.length-2))}}class ut extends Li{construct(e,t,i){return new ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const Sx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Li{construct(e,t,i){return new Zt(e,t,i)}static isValidIdentifier(e){return Sx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qT}static keyField(){return new Zt([qT])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ut.fromString(e))}static fromName(e){return new Ee(ut.fromString(e).popFirst(5))}static empty(){return new Ee(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ax(n,e,t,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BT(n){if(!Ee.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GT(n){if(Ee.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ym(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function hs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ym(n);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Au(n,e){if(!SA(n))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=-62135596800,KT=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*KT);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<HT)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KT}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Au(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Dt("string",ct._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=-1;function Cx(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new mr(o,Ee.empty(),e)}function Ix(n){return new mr(n.readTime,n.key,lu)}class mr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new mr(Re.min(),Ee.empty(),lu)}static max(){return new mr(Re.max(),Ee.empty(),lu)}}function wx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==Rx)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(g=>i(g)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let g=0;g<a;g++){const h=g;t(e[h]).next((v=>{u[h]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function Nx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ka(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=-1;function rd(n){return n==null}function Lf(n){return n===0&&1/n==-1/0}function xx(n){return typeof n=="number"&&Number.isInteger(n)&&!Lf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="";function Mx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JT(e)),e=Dx(n.get(t),e);return JT(e)}function Dx(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case AA:t+="";break;default:t+=a}}return t}function JT(n){return n+AA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Er(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Wt.RED,this.left=o??Wt.EMPTY,this.right=a??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Wt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $T(this.data.getIterator())}getIteratorFrom(e){return new $T(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class $T{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Ot(Zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IA("Invalid base64 string: "+a):a}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const Px=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=Px.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yr(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="server_timestamp",RA="__type__",bA="__previous_value__",NA="__local_write_time__";function Qm(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[RA])==null?void 0:i.stringValue)===wA}function od(n){const e=n.mapValue.fields[bA];return Qm(e)?od(e):e}function uu(n){const e=gr(n.mapValue.fields[NA].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t,i,o,a,u,d,g,h,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=v,this.apiKey=T}}const Of="(default)";class cu{constructor(e,t){this.projectId=e,this.database=t||Of}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Of}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}function Vx(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="__type__",Ux="__max__",lf={mapValue:{}},MA="__vector__",zf="value";function _r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qm(n)?4:Ox(n)?9007199254740991:Lx(n)?10:11:Ae(28295,{value:n})}function Gi(n,e){if(n===e)return!0;const t=_r(n);if(t!==_r(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uu(n).isEqual(uu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=gr(o.timestampValue),d=gr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return yr(o.bytesValue).isEqual(yr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Et(o.geoPointValue.latitude)===Et(a.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Et(o.integerValue)===Et(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Et(o.doubleValue),d=Et(a.doubleValue);return u===d?Lf(u)===Lf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Aa(n.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(YT(u)!==YT(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Gi(u[g],d[g])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function fu(n,e){return(n.values||[]).find((t=>Gi(t,e)))!==void 0}function Ca(n,e){if(n===e)return 0;const t=_r(n),i=_r(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Et(a.integerValue||a.doubleValue),g=Et(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return QT(n.timestampValue,e.timestampValue);case 4:return QT(uu(n),uu(e));case 5:return im(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=yr(a),g=yr(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),g=u.split("/");for(let h=0;h<d.length&&h<g.length;h++){const v=Be(d[h],g[h]);if(v!==0)return v}return Be(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Be(Et(a.latitude),Et(u.latitude));return d!==0?d:Be(Et(a.longitude),Et(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return XT(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,R,P,F;const d=a.fields||{},g=u.fields||{},h=(S=d[zf])==null?void 0:S.arrayValue,v=(R=g[zf])==null?void 0:R.arrayValue,T=Be(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((F=v==null?void 0:v.values)==null?void 0:F.length)||0);return T!==0?T:XT(h,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===lf.mapValue&&u===lf.mapValue)return 0;if(a===lf.mapValue)return 1;if(u===lf.mapValue)return-1;const d=a.fields||{},g=Object.keys(d),h=u.fields||{},v=Object.keys(h);g.sort(),v.sort();for(let T=0;T<g.length&&T<v.length;++T){const S=im(g[T],v[T]);if(S!==0)return S;const R=Ca(d[g[T]],h[v[T]]);if(R!==0)return R}return Be(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function QT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=gr(n),i=gr(e),o=Be(t.seconds,i.seconds);return o!==0?o:Be(t.nanos,i.nanos)}function XT(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ca(t[o],i[o]);if(a)return a}return Be(t.length,i.length)}function Ia(n){return sm(n)}function sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=gr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return yr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=sm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${sm(t.fields[u])}`;return o+"}"})(n.mapValue):Ae(61005,{value:n})}function Sf(n){switch(_r(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(n);return e?16+Sf(e):16;case 5:return 2*n.stringValue.length;case 6:return yr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Sf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Er(i.fields,((a,u)=>{o+=a.length+Sf(u)})),o})(n.mapValue);default:throw Ae(13486,{value:n})}}function rm(n){return!!n&&"integerValue"in n}function Xm(n){return!!n&&"arrayValue"in n}function WT(n){return!!n&&"nullValue"in n}function ZT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Af(n){return!!n&&"mapValue"in n}function Lx(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[xA])==null?void 0:i.stringValue)===MA}function nu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Er(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=nu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nu(n.arrayValue.values[t]);return e}return{...n}}function Ox(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ux}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(t)}setAll(e){let t=Zt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=nu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Er(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Sn(nu(this.value))}}function DA(n){const e=[];return Er(n.fields,((t,i)=>{const o=new Zt([t]);if(Af(i)){const a=DA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,Re.min(),Re.min(),Re.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,o){return new sn(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Re.min(),Re.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Re.min(),Re.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t){this.position=e,this.inclusive=t}}function jT(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Ca(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function eE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t="asc"){this.field=e,this.dir=t}}function zx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{}class Lt extends PA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new qx(e,t,i):t==="array-contains"?new Hx(e,i):t==="in"?new Kx(e,i):t==="not-in"?new Jx(e,i):t==="array-contains-any"?new Yx(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Bx(e,i):new Gx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ca(t,this.value)):t!==null&&_r(this.value)===_r(t)&&this.matchesComparison(Ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hi extends PA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Hi(e,t)}matches(e){return kA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kA(n){return n.op==="and"}function VA(n){return Fx(n)&&kA(n)}function Fx(n){for(const e of n.filters)if(e instanceof Hi)return!1;return!0}function om(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Ia(n.value);if(VA(n))return n.filters.map((e=>om(e))).join(",");{const e=n.filters.map((t=>om(t))).join(",");return`${n.op}(${e})`}}function UA(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Gi(i.value,o.value)})(n,e):n instanceof Hi?(function(i,o){return o instanceof Hi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&UA(u,o.filters[d])),!0):!1})(n,e):void Ae(19439)}function LA(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ia(t.value)}`})(n):n instanceof Hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(LA).join(" ,")+"}"})(n):"Filter"}class qx extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class Bx extends Lt{constructor(e,t){super(e,"in",t),this.keys=OA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Gx extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=OA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function OA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class Hx extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xm(t)&&fu(t.arrayValue,this.value)}}class Kx extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fu(this.value.arrayValue,t)}}class Jx extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fu(this.value.arrayValue,t)}}class Yx extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>fu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function tE(n,e=null,t=[],i=[],o=null,a=null,u=null){return new $x(n,e,t,i,o,a,u)}function Wm(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>om(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),rd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ia(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ia(i))).join(",")),e.Te=t}return e.Te}function Zm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eE(n.startAt,e.startAt)&&eE(n.endAt,e.endAt)}function am(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Qx(n,e,t,i,o,a,u,d){return new ad(n,e,t,i,o,a,u,d)}function jm(n){return new ad(n)}function nE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xx(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Wx(n){return n.collectionGroup!==null}function iu(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(Zt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new qf(a,i))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new qf(Zt.keyField(),i))}return e.Ie}function Fi(n){const e=Ne(n);return e.Ee||(e.Ee=Zx(e,iu(n))),e.Ee}function Zx(n,e){if(n.limitType==="F")return tE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new qf(o.field,a)}));const t=n.endAt?new Ff(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ff(n.startAt.position,n.startAt.inclusive):null;return tE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function lm(n,e,t){return new ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ld(n,e){return Zm(Fi(n),Fi(e))&&n.limitType===e.limitType}function zA(n){return`${Wm(Fi(n))}|lt:${n.limitType}`}function ra(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>LA(o))).join(", ")}]`),rd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ia(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ia(o))).join(",")),`Target(${i})`})(Fi(n))}; limitType=${n.limitType})`}function ud(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of iu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,g){const h=jT(u,d,g);return u.inclusive?h<=0:h<0})(i.startAt,iu(i),o)||i.endAt&&!(function(u,d,g){const h=jT(u,d,g);return u.inclusive?h>=0:h>0})(i.endAt,iu(i),o))})(n,e)}function jx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FA(n){return(e,t)=>{let i=!1;for(const o of iu(n)){const a=eM(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function eM(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const g=u.data.field(a),h=d.data.field(a);return g!==null&&h!==null?Ca(g,h):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new pt(Ee.comparator);function vs(){return tM}const qA=new pt(Ee.comparator);function Xl(...n){let e=qA;for(const t of n)e=e.insert(t.key,t);return e}function BA(n){let e=qA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function io(){return su()}function GA(){return su()}function su(){return new co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nM=new pt(Ee.comparator),iM=new Ot(Ee.comparator);function Ge(...n){let e=iM;for(const t of n)e=e.add(t);return e}const sM=new Ot(Be);function rM(){return sM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lf(e)?"-0":e}}function HA(n){return{integerValue:""+n}}function oM(n,e){return xx(e)?HA(e):eg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function aM(n,e,t){return n instanceof Bf?(function(o,a){const u={fields:{[RA]:{stringValue:wA},[NA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Qm(a)&&(a=od(a)),a&&(u.fields[bA]=a),{mapValue:u}})(t,e):n instanceof du?JA(n,e):n instanceof hu?YA(n,e):(function(o,a){const u=KA(o,a),d=iE(u)+iE(o.Ae);return rm(u)&&rm(o.Ae)?HA(d):eg(o.serializer,d)})(n,e)}function lM(n,e,t){return n instanceof du?JA(n,e):n instanceof hu?YA(n,e):t}function KA(n,e){return n instanceof Gf?(function(i){return rm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Bf extends cd{}class du extends cd{constructor(e){super(),this.elements=e}}function JA(n,e){const t=$A(e);for(const i of n.elements)t.some((o=>Gi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class hu extends cd{constructor(e){super(),this.elements=e}}function YA(n,e){let t=$A(e);for(const i of n.elements)t=t.filter((o=>!Gi(o,i)));return{arrayValue:{values:t}}}class Gf extends cd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iE(n){return Et(n.integerValue||n.doubleValue)}function $A(n){return Xm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uM(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof du&&o instanceof du||i instanceof hu&&o instanceof hu?Aa(i.elements,o.elements,Gi):i instanceof Gf&&o instanceof Gf?Gi(i.Ae,o.Ae):i instanceof Bf&&o instanceof Bf})(n.transform,e.transform)}class cM{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fd{}function QA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tg(n.key,ui.none()):new Cu(n.key,n.data,ui.none());{const t=n.data,i=Sn.empty();let o=new Ot(Zt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Sr(n.key,i,new Dn(o.toArray()),ui.none())}}function fM(n,e,t){n instanceof Cu?(function(o,a,u){const d=o.value.clone(),g=rE(o.fieldTransforms,a,u.transformResults);d.setAll(g),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Sr?(function(o,a,u){if(!Cf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=rE(o.fieldTransforms,a,u.transformResults),g=a.data;g.setAll(XA(o)),g.setAll(d),a.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ru(n,e,t,i){return n instanceof Cu?(function(a,u,d,g){if(!Cf(a.precondition,u))return d;const h=a.value.clone(),v=oE(a.fieldTransforms,g,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Sr?(function(a,u,d,g){if(!Cf(a.precondition,u))return d;const h=oE(a.fieldTransforms,g,u),v=u.data;return v.setAll(XA(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Cf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function dM(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=KA(i.transform,o||null);a!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,a))}return t||null}function sE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Aa(i,o,((a,u)=>uM(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Cu extends fd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Sr extends fd{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function XA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function rE(n,e,t){const i=new Map;Ze(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,lM(u,d,t[o]))}return i}function oE(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,aM(a,u,e))}return i}class tg extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hM extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&fM(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ru(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ru(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=GA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const g=QA(u,d);g!==null&&i.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,((t,i)=>sE(t,i)))&&Aa(this.baseMutations,e.baseMutations,((t,i)=>sE(t,i)))}}class ng{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return nM})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new ng(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Je;function yM(n){switch(n){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function WA(n){if(n===void 0)return _s("GRPC error has no .code"),re.UNKNOWN;switch(n){case Mt.OK:return re.OK;case Mt.CANCELLED:return re.CANCELLED;case Mt.UNKNOWN:return re.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return re.INTERNAL;case Mt.UNAVAILABLE:return re.UNAVAILABLE;case Mt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Mt.NOT_FOUND:return re.NOT_FOUND;case Mt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Mt.ABORTED:return re.ABORTED;case Mt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Mt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:n})}}(Je=Mt||(Mt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new dr([4294967295,4294967295],0);function aE(n){const e=_M().encode(n),t=new hA;return t.update(e),new Uint8Array(t.digest())}function lE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new dr([t,i],0),new dr([o,a],0)]}class ig{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wl(`Invalid padding: ${t}`);if(i<0)throw new Wl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=dr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(dr.fromNumber(i)));return o.compare(vM)===1&&(o=new dr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=aE(e),[i,o]=lE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ig(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=aE(e),[i,o]=lE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dd(Re.min(),o,new pt(Be),vs(),Ge())}}class Iu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Iu(i,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class ZA{constructor(e,t){this.targetId=e,this.Ce=t}}class jA{constructor(e,t,i=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class uE{constructor(){this.ve=0,this.Fe=cE(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),i=Ge();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ae(38017,{changeType:a})}})),new Iu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=cE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class TM{constructor(e){this.Ge=e,this.ze=new Map,this.je=vs(),this.He=uf(),this.Je=uf(),this.Ze=new pt(Be)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(am(a))if(i===0){const u=new Ee(a.path);this.et(t,u,sn.newNoDocument(u,Re.min()))}else Ze(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=yr(i).toUint8Array()}catch(g){if(g instanceof IA)return Sa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new ig(u,o,a)}catch(g){return Sa(g instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&am(d.target)){const g=new Ee(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,sn.newNoDocument(g,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=Ge();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new dd(e,t,this.Ze,this.je,i);return this.je=vs(),this.He=uf(),this.Je=uf(),this.Ze=new pt(Be),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new uE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ot(Be),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ot(Be),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function uf(){return new pt(Ee.comparator)}function cE(){return new pt(Ee.comparator)}const EM={asc:"ASCENDING",desc:"DESCENDING"},SM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AM={and:"AND",or:"OR"};class CM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function um(n,e){return n.useProto3Json||rd(e)?e:{value:e}}function Hf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IM(n,e){return Hf(n,e.toTimestamp())}function qi(n){return Ze(!!n,49232),Re.fromTimestamp((function(t){const i=gr(t);return new ct(i.seconds,i.nanos)})(n))}function sg(n,e){return cm(n,e).canonicalString()}function cm(n,e){const t=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tC(n){const e=ut.fromString(n);return Ze(oC(e),10190,{key:e.toString()}),e}function fm(n,e){return sg(n.databaseId,e.path)}function Op(n,e){const t=tC(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(iC(t))}function nC(n,e){return sg(n.databaseId,e)}function wM(n){const e=tC(n);return e.length===4?ut.emptyPath():iC(e)}function dm(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iC(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fE(n,e,t){return{name:fm(n,e),fields:t.value.mapValue.fields}}function RM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ae(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(Ze(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(Ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const v=h.code===void 0?re.UNKNOWN:WA(h.code);return new _e(v,h.message||"")})(u);t=new jA(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Op(n,i.document.name),a=qi(i.document.updateTime),u=i.document.createTime?qi(i.document.createTime):Re.min(),d=new Sn({mapValue:{fields:i.document.fields}}),g=sn.newFoundDocument(o,a,u,d),h=i.targetIds||[],v=i.removedTargetIds||[];t=new If(h,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Op(n,i.document),a=i.readTime?qi(i.readTime):Re.min(),u=sn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new If([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Op(n,i.document),a=i.removedTargetIds||[];t=new If([],a,o,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new gM(o,a),d=i.targetId;t=new ZA(d,u)}}return t}function bM(n,e){let t;if(e instanceof Cu)t={update:fE(n,e.key,e.value)};else if(e instanceof tg)t={delete:fm(n,e.key)};else if(e instanceof Sr)t={update:fE(n,e.key,e.data),updateMask:LM(e.fieldMask)};else{if(!(e instanceof hM))return Ae(16599,{dt:e.type});t={verify:fm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Bf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof du)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ae(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:IM(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae(27497)})(n,e.precondition)),t}function NM(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?qi(o.updateTime):qi(a);return u.isEqual(Re.min())&&(u=qi(a)),new cM(u,o.transformResults||[])})(t,e)))):[]}function xM(n,e){return{documents:[nC(n,e.path)]}}function MM(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=nC(n,o);const a=(function(h){if(h.length!==0)return rC(Hi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(S){return{field:oa(S.field),direction:kM(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=um(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function DM(n){let e=wM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ze(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=sC(T);return S instanceof Hi&&VA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(P){return new qf(aa(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,rd(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,R=T.values||[];return new Ff(R,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,R=T.values||[];return new Ff(R,S)})(t.endAt)),Qx(e,o,u,a,d,"F",g,h)}function PM(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=aa(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=aa(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=aa(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=aa(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(aa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Hi.create(t.compositeFilter.filters.map((i=>sC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function kM(n){return EM[n]}function VM(n){return SM[n]}function UM(n){return AM[n]}function oa(n){return{fieldPath:n.canonicalString()}}function aa(n){return Zt.fromServerFormat(n.fieldPath)}function rC(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(ZT(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NAN"}};if(WT(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZT(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NOT_NAN"}};if(WT(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(t.field),op:VM(t.op),value:t.value}}})(n):n instanceof Hi?(function(t){const i=t.getFilters().map((o=>rC(o)));return i.length===1?i[0]:{compositeFilter:{op:UM(t.op),filters:i}}})(n):Ae(54877,{filter:n})}function LM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function oC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function aC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t,i,o,a=Re.min(),u=Re.min(),d=jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.yt=e}}function zM(n){const e=DM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.Sn=new qM}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(mr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class qM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(ut.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lC=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(lC,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wa(0)}static ar(){return new wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="LruGarbageCollector",BM=1048576;function pE([n,e],[t,i]){const o=Be(n,t);return o===0?Be(e,i):o}class GM{constructor(e){this.Pr=e,this.buffer=new Ot(pE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();pE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(hE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ka(t)?he(hE,"Ignoring IndexedDB error during garbage collection: ",t):await Pa(t)}await this.Ar(3e5)}))}}class KM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(sd.ce);const i=new GM(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(dE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,a,u,d,g,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),sa()<=qe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function JM(n,e){return new KM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.changes=new co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ru(i.mutation,o,Dn.empty(),ct.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ge()){const o=io();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=Xl();return a.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=io();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ge())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=vs();const u=su(),d=(function(){return su()})();return t.forEach(((g,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof Sr)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),ru(v.mutation,h,v.mutation.getFieldMask(),ct.now())):u.set(h.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,a).next((g=>(g.forEach(((h,v)=>u.set(h,v))),t.forEach(((h,v)=>d.set(h,new $M(v,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=su();let o=new pt(((u,d)=>u-d)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const h=t.get(g);if(h===null)return;let v=i.get(g)||Dn.empty();v=d.applyToLocalView(h,v),i.set(g,v);const T=(o.get(d.batchId)||Ge()).add(g);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),h=g.key,v=g.value,T=GA();v.forEach((S=>{if(!a.has(S)){const R=QA(t.get(S),i.get(S));R!==null&&T.set(S,R),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return Xx(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(io());let d=lu,g=a;return u.next((h=>se.forEach(h,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,g,h,Ge()))).next((v=>({batchId:d,changes:BA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=Xl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=Xl();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(g=>{const h=(function(T,S){return new ad(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((g,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,sn.newInvalidDocument(v)))}));let d=Xl();return u.forEach(((g,h)=>{const v=a.get(g);v!==void 0&&ru(v.mutation,h,Dn.empty(),ct.now()),ud(t,h)&&(d=d.insert(g,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:qi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:zM(o.bundledQuery),readTime:qi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.overlays=new pt(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=io();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.bt(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=io(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,h=g.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&g.largestBatchId>i&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new pt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=io(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const d=io(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,v)=>d.set(h,v))),!(d.size()>=o)););return se.resolve(d)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new mM(t,i));let a=this.Lr.get(t);a===void 0&&(a=Ge(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.kr=new Ot(Gt.Kr),this.qr=new Ot(Gt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Gt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Ee(new ut([])),i=new Gt(t,e),o=new Gt(t,e+1),a=[];return this.qr.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ee(new ut([])),i=new Gt(t,e),o=new Gt(t,e+1);let a=Ge();return this.qr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Gt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||Be(e.Hr,t.Hr)}static Ur(e,t){return Be(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ot(Gt.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new pM(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Jr=this.Jr.add(new Gt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?$m:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Be);return t.forEach((o=>{const a=new Gt(o,0),u=new Gt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),se.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new Gt(new Ee(a),0);let d=new Ot(Be);return this.Jr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(g.Hr)),!0)}),u),se.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ze(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return se.forEach(t.mutations,(o=>{const a=new Gt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Gt(t,0),o=this.Jr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.ti=e,this.docs=(function(){return new pt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let i=vs();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():sn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=vs();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:h,value:{document:v}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||wx(Ix(v),i)<=0||(o.has(v.key)||ud(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ae(9500)}ni(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new tD(this)}getSize(e){return se.resolve(this.size)}}class tD extends YM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.persistence=e,this.ri=new co((t=>Wm(t)),Zm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new rg,this.targetCount=0,this.oi=wa._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t){this._i={},this.overlays={},this.ai=new sd(0),this.ui=!1,this.ui=!0,this.ci=new ZM,this.referenceDelegate=e(this),this.li=new nD(this),this.indexManager=new FM,this.remoteDocumentCache=(function(o){return new eD(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new OM(t),this.Pi=new XM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new jM(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new iD(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((a=>this.referenceDelegate.Ii(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return se.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class iD extends bx{constructor(e){super(),this.currentSequenceNumber=e}}class og{constructor(e){this.persistence=e,this.Ri=new rg,this.Ai=null}static Vi(e){return new og(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(i=>{const o=Ee.fromPath(i);return this.mi(e,o).next((a=>{a||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Kf{constructor(e,t){this.persistence=e,this.fi=new co((i=>Mx(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=JM(this,t)}static Vi(e,t){return new Kf(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sf(e.data.value)),t}wr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Ge(),o=Ge();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new ag(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return KR()?8:Nx(on())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new sD;return this.ys(e,t,u).next((d=>{if(a.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>a.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(sa()<=qe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(sa()<=qe.DEBUG&&he("QueryEngine","Query:",ra(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(sa()<=qe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):se.resolve())}gs(e,t){if(nE(t))return se.resolve(null);let i=Fi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=lm(t,null,"F"),i=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ge(...a);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.bs(t,d);return this.Ss(t,h,u,g.readTime)?this.gs(e,lm(t,null,"F")):this.Ds(e,h,t,g)}))))})))))}ps(e,t,i,o){return nE(t)||o.isEqual(Re.min())?se.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,o)?se.resolve(null):(sa()<=qe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ra(t)),this.Ds(e,u,t,Cx(o,lu)).next((d=>d)))}))}bs(e,t){let i=new Ot(FA(e));return t.forEach(((o,a)=>{ud(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ys(e,t,i){return sa()<=qe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ra(t)),this.fs.getDocumentsMatchingQuery(e,t,mr.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="LocalStore",oD=3e8;class aD{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new pt(Be),this.Fs=new co((a=>Wm(a)),Zm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function lD(n,e,t,i){return new aD(n,e,t,i)}async function cC(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let g=Ge();for(const h of o){u.push(h.batchId);for(const v of h.mutations)g=g.add(v.key)}for(const h of a){d.push(h.batchId);for(const v of h.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((h=>({Ns:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function uD(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,g,h,v){const T=h.batch,S=T.keys();let R=se.resolve();return S.forEach((P=>{R=R.next((()=>v.getEntry(g,P))).next((F=>{const L=h.docVersions.get(P);Ze(L!==null,48541),F.version.compareTo(L)<0&&(T.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),v.addEntry(F)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let g=Ge();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(g=g.add(d.batch.mutations[h].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function fC(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function cD(n,e){const t=Ne(n),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.li.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,v.addedDocuments,T))));let R=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(jt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),o=o.insert(T,R),(function(F,L,$){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=oD?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,R,v)&&d.push(t.li.updateTargetData(a,R))}));let g=vs(),h=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(fD(a,u,e.documentUpdates).next((v=>{g=v.Bs,h=v.Ls}))),!i.isEqual(Re.min())){const v=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,g,h))).next((()=>g))})).then((a=>(t.vs=o,a)))}function fD(n,e,t){let i=Ge(),o=Ge();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=vs();return t.forEach(((d,g)=>{const h=a.get(d);g.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):he(lg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",g.version)})),{Bs:u,Ls:o}}))}function dD(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=$m),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function hD(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.li.allocateTargetId(i).next((u=>(o=new lr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function hm(n,e,t){const i=Ne(n),o=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!ka(u))throw u;he(lg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function mE(n,e,t){const i=Ne(n);let o=Re.min(),a=Ge();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,v){const T=Ne(g),S=T.Fs.get(v);return S!==void 0?se.resolve(T.vs.get(S)):T.li.getTargetData(h,v)})(i,u,Fi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,d.targetId).next((g=>{a=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:Ge()))).next((d=>(pD(i,jx(e),d),{documents:d,ks:a})))))}function pD(n,e,t){let i=n.Ms.get(e)||Re.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class gE{constructor(){this.activeTargetIds=rM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mD{constructor(){this.vo=new gE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new gE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="ConnectivityMonitor";class _E{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(yE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(yE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf=null;function pm(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="RestConnection",yD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _D{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===Of?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=pm(),d=this.Qo(e,t.toUriEncodedString());he(zp,`Sending RPC '${e}' ${u}:`,d,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,a);const{host:h}=new URL(d),v=Na(h);return this.zo(e,d,g,i,v).then((T=>(he(zp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Sa(zp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Da})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Qo(e,t){const i=yD[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection",Kl=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ma extends _D{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ma.c_){const e=yA();Kl(e,gA.STAT_EVENT,(t=>{t.stat===nm.PROXY?he(tn,"STAT_EVENT: detected buffering proxy"):t.stat===nm.NOPROXY&&he(tn,"STAT_EVENT: detected no buffering proxy")})),ma.c_=!0}}zo(e,t,i,o,a){const u=pm();return new Promise(((d,g)=>{const h=new pA;h.setWithCredentials(!0),h.listenOnce(mA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ef.NO_ERROR:const T=h.getResponseJson();he(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Ef.TIMEOUT:he(tn,`RPC '${e}' ${u} timed out`),g(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:const S=h.getStatus();if(he(tn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const P=R==null?void 0:R.error;if(P&&P.status&&P.message){const F=(function($){const ne=$.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ne)>=0?ne:re.UNKNOWN})(P.status);g(new _e(F,P.message))}else g(new _e(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new _e(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{he(tn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);he(tn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=pm(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const h=a.join("");he(tn,`Creating RPC '${e}' stream ${o}: ${h}`,d);const v=u.createWebChannel(h,d);this.I_(v);let T=!1,S=!1;const R=new vD({Ho:P=>{S?he(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(T||(he(tn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),T=!0),he(tn,`RPC '${e}' stream ${o} sending:`,P),v.send(P))},Jo:()=>v.close()});return Kl(v,Ql.EventType.OPEN,(()=>{S||(he(tn,`RPC '${e}' stream ${o} transport opened.`),R.i_())})),Kl(v,Ql.EventType.CLOSE,(()=>{S||(S=!0,he(tn,`RPC '${e}' stream ${o} transport closed`),R.o_(),this.E_(v))})),Kl(v,Ql.EventType.ERROR,(P=>{S||(S=!0,Sa(tn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),R.o_(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),Kl(v,Ql.EventType.MESSAGE,(P=>{var F;if(!S){const L=P.data[0];Ze(!!L,16349);const $=L,ne=($==null?void 0:$.error)||((F=$[0])==null?void 0:F.error);if(ne){he(tn,`RPC '${e}' stream ${o} received error:`,ne);const Z=ne.status;let ae=(function(M){const x=Mt[M];if(x!==void 0)return WA(x)})(Z),X=ne.message;ae===void 0&&(ae=re.INTERNAL,X="Unknown error status: "+Z+" with message "+ne.message),S=!0,R.o_(new _e(ae,X)),v.close()}else he(tn,`RPC '${e}' stream ${o} received:`,L),R.__(L)}})),ma.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _A()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(n){return new ma(n)}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n){return new CM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ma.c_=!1;class dC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="PersistentStream";class hC{constructor(e,t,i,o,a,u,d,g){this.Ci=e,this.b_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(_s(t.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(he(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ED extends hC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RM(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?qi(u.readTime):Re.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=dm(this.serializer),t.addTarget=(function(a,u){let d;const g=u.target;if(d=am(g)?{documents:xM(a,g)}:{query:MM(a,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=eC(a,u.resumeToken);const h=um(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=Hf(a,u.snapshotVersion.toTimestamp());const h=um(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=PM(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=dm(this.serializer),t.removeTarget=e,this.K_(t)}}class SD extends hC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NM(e.writeResults,e.commitTime),i=qi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=dm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bM(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{}class CD extends AD{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,cm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(re.UNKNOWN,a.toString())}))}jo(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,cm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function ID(n,e,t,i){return new CD(n,e,t,i)}class wD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_s(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="RemoteStore";class RD{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{fo(this)&&(he(uo,"Restarting streams for network reachability change."),await(async function(g){const h=Ne(g);h.Ea.add(4),await wu(h),h.Va.set("Unknown"),h.Ea.delete(4),await pd(h)})(this))}))})),this.Va=new wD(i,o)}}async function pd(n){if(fo(n))for(const e of n.Ra)await e(!0)}async function wu(n){for(const e of n.Ra)await e(!1)}function pC(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dg(t)?fg(t):Va(t).O_()&&cg(t,e))}function ug(n,e){const t=Ne(n),i=Va(t);t.Ia.delete(e),i.O_()&&mC(t,e),t.Ia.size===0&&(i.O_()?i.L_():fo(t)&&t.Va.set("Unknown"))}function cg(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Va(n).Z_(e)}function mC(n,e){n.da.$e(e),Va(n).X_(e)}function fg(n){n.da=new TM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Va(n).start(),n.Va.ua()}function dg(n){return fo(n)&&!Va(n).x_()&&n.Ia.size>0}function fo(n){return Ne(n).Ea.size===0}function gC(n){n.da=void 0}async function bD(n){n.Va.set("Online")}async function ND(n){n.Ia.forEach(((e,t)=>{cg(n,e)}))}async function xD(n,e){gC(n),dg(n)?(n.Va.ha(e),fg(n)):n.Va.set("Unknown")}async function MD(n,e,t){if(n.Va.set("Online"),e instanceof jA&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.da.removeTarget(d))})(n,e)}catch(i){he(uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jf(n,i)}else if(e instanceof If?n.da.Xe(e):e instanceof ZA?n.da.st(e):n.da.tt(e),!t.isEqual(Re.min()))try{const i=await fC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.da.Tt(u);return d.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,h)=>{const v=a.Ia.get(g);if(!v)return;a.Ia.set(g,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),mC(a,g);const T=new lr(v.target,g,h,v.sequenceNumber);cg(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){he(uo,"Failed to raise snapshot:",i),await Jf(n,i)}}async function Jf(n,e,t){if(!ka(e))throw e;n.Ea.add(1),await wu(n),n.Va.set("Offline"),t||(t=()=>fC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(uo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await pd(n)}))}function yC(n,e){return e().catch((t=>Jf(n,t,e)))}async function md(n){const e=Ne(n),t=vr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$m;for(;DD(e);)try{const o=await dD(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,PD(e,o)}catch(o){await Jf(e,o)}_C(e)&&vC(e)}function DD(n){return fo(n)&&n.Ta.length<10}function PD(n,e){n.Ta.push(e);const t=vr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function _C(n){return fo(n)&&!vr(n).x_()&&n.Ta.length>0}function vC(n){vr(n).start()}async function kD(n){vr(n).ra()}async function VD(n){const e=vr(n);for(const t of n.Ta)e.ea(t.mutations)}async function UD(n,e,t){const i=n.Ta.shift(),o=ng.from(i,e,t);await yC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await md(n)}async function LD(n,e){e&&vr(n).Y_&&await(async function(i,o){if((function(u){return yM(u)&&u!==re.ABORTED})(o.code)){const a=i.Ta.shift();vr(i).B_(),await yC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await md(i)}})(n,e),_C(n)&&vC(n)}async function TE(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),he(uo,"RemoteStore received new credentials");const i=fo(t);t.Ea.add(3),await wu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pd(t)}async function OD(n,e){const t=Ne(n);e?(t.Ea.delete(2),await pd(t)):e||(t.Ea.add(2),await wu(t),t.Va.set("Unknown"))}function Va(n){return n.ma||(n.ma=(function(t,i,o){const a=Ne(t);return a.sa(),new ED(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:bD.bind(null,n),Yo:ND.bind(null,n),t_:xD.bind(null,n),J_:MD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),dg(n)?fg(n):n.Va.set("Unknown")):(await n.ma.stop(),gC(n))}))),n.ma}function vr(n){return n.fa||(n.fa=(function(t,i,o){const a=Ne(t);return a.sa(),new SD(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:kD.bind(null,n),t_:LD.bind(null,n),ta:VD.bind(null,n),na:UD.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await md(n)):(await n.fa.stop(),n.Ta.length>0&&(he(uo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new hg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(n,e){if(_s("AsyncQueue",`${e}: ${n}`),ka(n))return new _e(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Xl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ga;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.ga=new pt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ra{constructor(e,t,i,o,a,u,d,g,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ra(e,t,ga.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class FD{constructor(){this.queries=SE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ne(t),a=o.queries;o.queries=SE(),a.forEach(((u,d)=>{for(const g of d.ba)g.onError(i)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function SE(){return new co((n=>zA(n)),ld)}async function qD(n,e){const t=Ne(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.Da()&&(i=2):(a=new zD,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=pg(u,`Initialization of query '${ra(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&mg(t)}async function BD(n,e){const t=Ne(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?o=e.Da()?0:1:!a.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function GD(n,e){const t=Ne(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.ba)d.Fa(o)&&(i=!0);u.wa=o}}i&&mg(t)}function HD(n,e,t){const i=Ne(n),o=i.queries.get(e);if(o)for(const a of o.ba)a.onError(t);i.queries.delete(e)}function mg(n){n.Ca.forEach((e=>{e.next()}))}var mm,AE;(AE=mm||(mm={})).Ma="default",AE.Cache="cache";class KD{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.key=e}}class EC{constructor(e){this.key=e}}class JD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.eu=FA(e),this.tu=new ga(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new EE,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),R=ud(this.query,T)?T:null,P=!!S&&this.mutatedKeys.has(S.key),F=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;S&&R?S.data.isEqual(R.data)?P!==F&&(i.track({type:3,doc:R}),L=!0):this.su(S,R)||(i.track({type:2,doc:R}),L=!0,(g&&this.eu(R,g)>0||h&&this.eu(R,h)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),L=!0):S&&!R&&(i.track({type:1,doc:S}),L=!0,(g||h)&&(d=!0)),L&&(R?(u=u.add(R),a=F?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Ss:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(R,P){const F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:L})}};return F(R)-F(P)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,h=g!==this.Xa;return this.Xa=g,u.length!==0||h?{snapshot:new Ra(this.query,e.tu,a,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ge(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new EC(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new TC(i))})),t}cu(e){this.Za=e.ks,this.Ya=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gg="SyncEngine";class YD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class $D{constructor(e){this.key=e,this.hu=!1}}class QD{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new co((d=>zA(d)),ld),this.Iu=new Map,this.Eu=new Set,this.Ru=new pt(Ee.comparator),this.Au=new Map,this.Vu=new rg,this.du={},this.mu=new Map,this.fu=wa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XD(n,e,t=!0){const i=RC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await SC(i,e,t,!0),o}async function WD(n,e){const t=RC(n);await SC(t,e,!0,!1)}async function SC(n,e,t,i){const o=await hD(n.localStore,Fi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await ZD(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&pC(n.remoteStore,o),d}async function ZD(n,e,t,i,o){n.pu=(T,S,R)=>(async function(F,L,$,ne){let Z=L.view.ru($);Z.Ss&&(Z=await mE(F.localStore,L.query,!1).then((({documents:M})=>L.view.ru(M,Z))));const ae=ne&&ne.targetChanges.get(L.targetId),X=ne&&ne.targetMismatches.get(L.targetId)!=null,de=L.view.applyChanges(Z,F.isPrimaryClient,ae,X);return IE(F,L.targetId,de.au),de.snapshot})(n,T,S,R);const a=await mE(n.localStore,e,!0),u=new JD(e,a.ks),d=u.ru(a.documents),g=Iu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,g);IE(n,t,h.au);const v=new YD(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function jD(n,e,t){const i=Ne(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!ld(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await hm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ug(i.remoteStore,o.targetId),gm(i,o.targetId)})).catch(Pa)):(gm(i,o.targetId),await hm(i.localStore,o.targetId,!0))}async function eP(n,e){const t=Ne(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ug(t.remoteStore,i.targetId))}async function tP(n,e,t){const i=lP(n);try{const o=await(function(u,d){const g=Ne(u),h=ct.now(),v=d.reduce(((R,P)=>R.add(P.key)),Ge());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let P=vs(),F=Ge();return g.xs.getEntries(R,v).next((L=>{P=L,P.forEach((($,ne)=>{ne.isValidDocument()||(F=F.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,P))).next((L=>{T=L;const $=[];for(const ne of d){const Z=dM(ne,T.get(ne.key).overlayedDocument);Z!=null&&$.push(new Sr(ne.key,Z,DA(Z.value.mapValue),ui.exists(!0)))}return g.mutationQueue.addMutationBatch(R,h,$,d)})).next((L=>{S=L;const $=L.applyToLocalDocumentSet(T,F);return g.documentOverlayCache.saveOverlays(R,L.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:BA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,g){let h=u.du[u.currentUser.toKey()];h||(h=new pt(Be)),h=h.insert(d,g),u.du[u.currentUser.toKey()]=h})(i,o.batchId,t),await Ru(i,o.changes),await md(i.remoteStore)}catch(o){const a=pg(o,"Failed to persist write");t.reject(a)}}async function AC(n,e){const t=Ne(n);try{const i=await cD(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ze(u.hu,14607):o.removedDocuments.size>0&&(Ze(u.hu,42227),u.hu=!1))})),await Ru(t,i,e)}catch(i){await Pa(i)}}function CE(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const g=Ne(u);g.onlineState=d;let h=!1;g.queries.forEach(((v,T)=>{for(const S of T.ba)S.va(d)&&(h=!0)})),h&&mg(g)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nP(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new pt(Ee.comparator);u=u.insert(a,sn.newNoDocument(a,Re.min()));const d=Ge().add(a),g=new dd(Re.min(),new Map,new pt(Be),u,d);await AC(i,g),i.Ru=i.Ru.remove(a),i.Au.delete(e),yg(i)}else await hm(i.localStore,e,!1).then((()=>gm(i,e,t))).catch(Pa)}async function iP(n,e){const t=Ne(n),i=e.batch.batchId;try{const o=await uD(t.localStore,e);IC(t,i,null),CC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ru(t,o)}catch(o){await Pa(o)}}async function sP(n,e,t){const i=Ne(n);try{const o=await(function(u,d){const g=Ne(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return g.mutationQueue.lookupMutationBatch(h,d).next((T=>(Ze(T!==null,37113),v=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>g.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);IC(i,e,t),CC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ru(i,o)}catch(o){await Pa(o)}}function CC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function IC(n,e,t){const i=Ne(n);let o=i.du[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function gm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||wC(n,i)}))}function wC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(ug(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),yg(n))}function IE(n,e,t){for(const i of t)i instanceof TC?(n.Vu.addReference(i.key,e),rP(n,i)):i instanceof EC?(he(gg,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||wC(n,i.key)):Ae(19791,{wu:i})}function rP(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(he(gg,"New document in limbo: "+t),n.Eu.add(i),yg(n))}function yg(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(ut.fromString(e)),i=n.fu.next();n.Au.set(i,new $D(t)),n.Ru=n.Ru.insert(t,i),pC(n.remoteStore,new lr(Fi(jm(t.path)),i,"TargetPurposeLimboResolution",sd.ce))}}async function Ru(n,e,t){const i=Ne(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,g)=>{u.push(i.pu(g,e,t).then((h=>{var v;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){o.push(h);const T=ag.Es(g.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.J_(o),await(async function(g,h){const v=Ne(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(S=>se.forEach(S.Ts,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>se.forEach(S.Is,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!ka(T))throw T;he(lg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const R=v.vs.get(S),P=R.snapshotVersion,F=R.withLastLimboFreeSnapshotVersion(P);v.vs=v.vs.insert(S,F)}}})(i.localStore,a))}async function oP(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){he(gg,"User change. New user:",e.toKey());const i=await cC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((g=>{g.reject(new _e(re.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ru(t,i.Ns)}}function aP(n,e){const t=Ne(n),i=t.Au.get(e);if(i&&i.hu)return Ge().add(i.key);{let o=Ge();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function RC(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nP.bind(null,e),e.Pu.J_=GD.bind(null,e.eventManager),e.Pu.yu=HD.bind(null,e.eventManager),e}function lP(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sP.bind(null,e),e}class Yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lD(this.persistence,new rD,e.initialUser,this.serializer)}Cu(e){return new uC(og.Vi,this.serializer)}Du(e){return new mD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yf.provider={build:()=>new Yf};class uP extends Yf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof Kf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new HM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new uC((i=>Kf.Vi(i,t)),this.serializer)}}class ym{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oP.bind(null,this.syncEngine),await OD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FD})()}createDatastore(e){const t=hd(e.databaseInfo.databaseId),i=TD(e.databaseInfo);return ID(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new RD(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>CE(this.syncEngine,t,0)),(function(){return _E.v()?new _E:new gD})())}createSyncEngine(e,t){return(function(o,a,u,d,g,h,v){const T=new QD(o,a,u,d,g,h);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ne(o);he(uo,"RemoteStore shutting down."),a.Ea.add(5),await wu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ym.provider={build:()=>new ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="FirestoreClient";class fP{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{he(Tr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(he(Tr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function qp(n,e){n.asyncQueue.verifyOperationInProgress(),he(Tr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await cC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function wE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dP(n);he(Tr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>TE(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>TE(e.remoteStore,o))),n._onlineComponents=e}async function dP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Tr,"Using user provided OfflineComponentProvider");try{await qp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Sa("Error using user provided cache. Falling back to memory cache: "+t),await qp(n,new Yf)}}else he(Tr,"Using default OfflineComponentProvider"),await qp(n,new uP(void 0));return n._offlineComponents}async function bC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Tr,"Using user provided OnlineComponentProvider"),await wE(n,n._uninitializedComponentsProvider._online)):(he(Tr,"Using default OnlineComponentProvider"),await wE(n,new ym))),n._onlineComponents}function hP(n){return bC(n).then((e=>e.syncEngine))}async function RE(n){const e=await bC(n),t=e.eventManager;return t.onListen=XD.bind(null,e.syncEngine),t.onUnlisten=jD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eP.bind(null,e.syncEngine),t}function pP(n,e,t,i){const o=new cP(i),a=new KD(e,o,t);return n.asyncQueue.enqueueAndForget((async()=>qD(await RE(n),a))),()=>{o.Nu(),n.asyncQueue.enqueueAndForget((async()=>BD(await RE(n),a)))}}function mP(n,e){const t=new so;return n.asyncQueue.enqueueAndForget((async()=>tP(await hP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="ComponentProvider",bE=new Map;function yP(n,e,t,i,o){return new kx(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,NC(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="firestore.googleapis.com",NE=!0;class xE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xC,this.ssl=NE}else this.host=e.host,this.ssl=e.ssl??NE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BM)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ax("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new hx;switch(i.type){case"firstParty":return new yx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=bE.get(t);i&&(he(gP,"Removing Datastore"),bE.delete(t),i.terminate())})(this),Promise.resolve()}}function _P(n,e,t,i={}){var h;n=hs(n,gd);const o=Na(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(bS(`https://${d}`),NS("Firestore",!0)),a.host!==xC&&a.host!==d&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...a,host:d,ssl:o,emulatorOptions:i};if(!oo(g,u)&&(n._setSettings(g),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=nn.MOCK_USER;else{v=UR(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(S)}n._authCredentials=new px(new TA(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yd(this.firestore,e,this._query)}}class Pt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Au(t,Pt._jsonSchema))return new Pt(e,i||null,new Ee(ut.fromString(t.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Dt("string",Pt._jsonSchemaVersion),referencePath:Dt("string")};class hr extends yd{constructor(e,t,i){super(e,t,jm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Ee(e))}withConverter(e){return new hr(this.firestore,e,this._path)}}function vP(n,e,...t){if(n=an(n),EA("collection","path",e),n instanceof gd){const i=ut.fromString(e,...t);return GT(i),new hr(n,null,i)}{if(!(n instanceof Pt||n instanceof hr))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return GT(i),new hr(n.firestore,null,i)}}function ff(n,e,...t){if(n=an(n),arguments.length===1&&(e=Jm.newId()),EA("doc","path",e),n instanceof gd){const i=ut.fromString(e,...t);return BT(i),new Pt(n,null,new Ee(i))}{if(!(n instanceof Pt||n instanceof hr))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return BT(i),new Pt(n.firestore,n instanceof hr?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="AsyncQueue";class DE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dC(this,"async_queue_retry"),this._c=()=>{const i=Fp();i&&he(ME,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Fp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new so;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ka(e))throw e;he(ME,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,_s("INTERNAL UNHANDLED ERROR: ",PE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=hg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:PE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function PE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ba extends gd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new DE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DE(e),this._firestoreClient=void 0,await e}}}function TP(n,e){const t=typeof n=="object"?n:PS(),i=typeof n=="string"?n:Of,o=Um(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=kR("firestore");a&&_P(o,...a)}return o}function MC(n){if(n._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EP(n),n._firestoreClient}function EP(n){var i,o,a,u;const e=n._freezeSettings(),t=yP(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new fP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(g){const h=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(jt.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Au(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Dt("string",Yn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(Au(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Dt("string",Bi._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Au(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ci(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:Dt("string",ci._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=/^__.*__$/;class AP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Sr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cu(e,this.data,t,this.fieldTransforms)}}class DC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Sr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:n})}}class Tg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $f(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(PC(this.dataSource)&&SP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class CP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hd(e)}createContext(e,t,i,o=!1){return new Tg({dataSource:e,methodName:t,targetDoc:i,path:Zt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kC(n){const e=n._freezeSettings(),t=hd(n._databaseId);return new CP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IP(n,e,t,i,o,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,o);Eg("Data must be an object, but it was:",u,i);const d=VC(i,u);let g,h;if(a.merge)g=new Dn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=pu(e,T,t);if(!u.contains(S))throw new _e(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);OC(v,S)||v.push(S)}g=new Dn(v),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new AP(new Sn(d),g,h)}class _d extends vg{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function wP(n,e,t,i){const o=n.createContext(1,e,t);Eg("Data must be an object, but it was:",o,i);const a=[],u=Sn.empty();Er(i,((g,h)=>{const v=LC(e,g,t);h=an(h);const T=o.childContextForFieldPath(v);if(h instanceof _d)a.push(v);else{const S=vd(h,T);S!=null&&(a.push(v),u.set(v,S))}}));const d=new Dn(a);return new DC(u,d,o.fieldTransforms)}function RP(n,e,t,i,o,a){const u=n.createContext(1,e,t),d=[pu(e,i,t)],g=[o];if(a.length%2!=0)throw new _e(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(pu(e,a[S])),g.push(a[S+1]);const h=[],v=Sn.empty();for(let S=d.length-1;S>=0;--S)if(!OC(h,d[S])){const R=d[S];let P=g[S];P=an(P);const F=u.childContextForFieldPath(R);if(P instanceof _d)h.push(R);else{const L=vd(P,F);L!=null&&(h.push(R),v.set(R,L))}}const T=new Dn(h);return new DC(v,T,u.fieldTransforms)}function vd(n,e){if(UC(n=an(n)))return Eg("Unsupported field value:",e,n),VC(n,e);if(n instanceof vg)return(function(i,o){if(!PC(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let g=vd(d,o.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),a.push(g),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=an(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return oM(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ct.fromDate(i);return{timestampValue:Hf(o.serializer,a)}}if(i instanceof ct){const a=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hf(o.serializer,a)}}if(i instanceof Bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:eC(o.serializer,i._byteString)};if(i instanceof Pt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ci)return(function(u,d){const g=u instanceof ci?u.toArray():u;return{mapValue:{fields:{[xA]:{stringValue:MA},[zf]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return eg(d.serializer,v)}))}}}}}})(i,o);if(aC(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Ym(i)}`)})(n,e)}function VC(n,e){const t={};return CA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(n,((i,o)=>{const a=vd(o,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function UC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Bi||n instanceof Yn||n instanceof Pt||n instanceof vg||n instanceof ci||aC(n))}function Eg(n,e,t){if(!UC(t)||!SA(t)){const i=Ym(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function pu(n,e,t){if((e=an(e))instanceof _g)return e._internalPath;if(typeof e=="string")return LC(n,e);throw $f("Field path arguments must be of type string or ",n,!1,void 0,t)}const bP=new RegExp("[~\\*/\\[\\]]");function LC(n,e,t){if(e.search(bP)>=0)throw $f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _g(...e.split("."))._internalPath}catch{throw $f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $f(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${i}`),u&&(g+=` in document ${o}`),g+=")"),new _e(re.INVALID_ARGUMENT,d+n+g)}function OC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{convertValue(e,t="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Er(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[zf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>Et(u.doubleValue)));return new ci(t)}convertGeoPoint(e){return new Bi(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=od(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const t=gr(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ut.fromString(e);Ze(oC(i),9688,{name:e});const o=new cu(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(t)||_s(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC extends NP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}const kE="@firebase/firestore",VE="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(pu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xP extends FC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function DP(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ro extends FC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(pu("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ro._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",ro._jsonSchema={type:Dt("string",ro._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class wf extends ro{data(e={}){return super.data(e)}}class ya{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new wf(this._firestore,this._userDataWriter,i.key,i,new Zl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const g=new wf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Zl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const g=new wf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Zl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:PP(d.type),doc:g,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:Dt("string",ya._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};function LE(n,e,t){n=hs(n,Pt);const i=hs(n.firestore,ba),o=DP(n.converter,e,t),a=kC(i);return Sg(i,[IP(a,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ui.none())])}function kP(n,e,t,...i){n=hs(n,Pt);const o=hs(n.firestore,ba),a=kC(o);let u;return u=typeof(e=an(e))=="string"||e instanceof _g?RP(a,"updateDoc",n._key,e,t,i):wP(a,"updateDoc",n._key,e),Sg(o,[u.toMutation(n._key,ui.exists(!0))])}function VP(n){return Sg(hs(n.firestore,ba),[new tg(n._key,ui.none())])}function OE(n,...e){var h,v,T;n=an(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||UE(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(UE(e[i])){const S=e[i];e[i]=(h=S.next)==null?void 0:h.bind(S),e[i+1]=(v=S.error)==null?void 0:v.bind(S),e[i+2]=(T=S.complete)==null?void 0:T.bind(S)}let a,u,d;if(n instanceof Pt)u=hs(n.firestore,ba),d=jm(n._key.path),a={next:S=>{e[i]&&e[i](UP(u,n,S))},error:e[i+1],complete:e[i+2]};else{const S=hs(n,yd);u=hs(S.firestore,ba),d=S._query;const R=new zC(u);a={next:P=>{e[i]&&e[i](new ya(u,R,S,P))},error:e[i+1],complete:e[i+2]},MP(n._query)}const g=MC(u);return pP(g,d,o,a)}function Sg(n,e){const t=MC(n);return mP(t,e)}function UP(n,e,t){const i=t.docs.get(e._key),o=new zC(n);return new ro(n,o,e._key,i,new Zl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){fx(xa),Ea(new ao("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new ba(new mx(i.getProvider("auth-internal")),new _x(u,i.getProvider("app-check-internal")),Vx(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),fr(kE,VE,e),fr(kE,VE,"esm2020")})();var LP="firebase",OP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(LP,OP,"app");dx("silent");const Jl=typeof window<"u"&&window.__app_id?window.__app_id:"default-app-id",zP=typeof window<"u"&&window.__firebase_config?window.__firebase_config:"{}",zE=typeof window<"u"&&window.__initial_auth_token?window.__initial_auth_token:null;let Bp=null,Ui=null,_a=null;try{const n=JSON.parse(zP);Object.keys(n).length>0?(Bp=DS(n),Ui=TP(Bp),_a=ux(Bp)):console.warn("Firebase config is empty.")}catch(n){console.error("Error initializing Firebase:",n)}const FP=async()=>{if(_a)try{zE?await QN(_a,zE):await HN(_a)}catch(n){console.error("Auth error:",n)}},FE=[{id:1,name:"Klawiatura Custom 60%",price:899.99,description:"Kompaktowy design, hot-swap, aluminiowa obudowa.",category:"Klawiatury",icon:"",image:"https://images.unsplash.com/photo-1595225476474-87563907a212?q=80&w=800&auto=format&fit=crop"},{id:2,name:"Myszka E-Sports Pro V2",price:349,description:"Ultralekka (55g), sensor PAW3395, 4000Hz Polling Rate.",category:"Myszki",icon:"",image:"https://images.unsplash.com/photo-1527814050087-3793815479db?q=80&w=800&auto=format&fit=crop"},{id:3,name:"Gateron Yellow Switches (x90)",price:129.5,description:"Liniowe, 50g siy nacisku, fabrycznie lubrykowane.",category:"Switche",icon:"",image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?q=80&w=800&auto=format&fit=crop"},{id:4,name:"Keycapy PBT Doubleshot 'Aqua'",price:199.9,description:"Profil Cherry, PBT, trwae nadruki w kolorze Soft Cyan.",category:"Keycapy",icon:"",image:"https://images.unsplash.com/photo-1626218174358-77b7f9a46058?q=80&w=800&auto=format&fit=crop"},{id:5,name:"Podkadka Control XL",price:159.99,description:"Tekstura control, rozmiar 900x400mm, antypolizgowa podstawa.",category:"Akcesoria",icon:"",image:"https://images.unsplash.com/photo-1615663245857-ac93bb7c39e7?q=80&w=800&auto=format&fit=crop"},{id:6,name:"Kabel Coiled Aviator V2",price:149,description:"Podwjny oplot, zcze typu Aviator, kolor Electric Pink.",category:"Akcesoria",icon:"",image:"https://images.unsplash.com/photo-1563191911-e65f8655ebf9?q=80&w=800&auto=format&fit=crop"}],Gp={heroTitle:"PRECYZJA W KADYM KLIKU",heroSubtitle:"TWJ EKWIPUNEK, TWOJE ZASADY.",heroDescription:"Odkryj sprzt klasy turniejowej i ekosystem czci do penej personalizacji. Myszki, Klawiatury, Switche, Keycapy  wyselekcjonowane przez profesjonalistw.",heroBgUrl:"https://img.freepik.com/free-vector/abstract-realistic-technology-particle-background_52683-33064.jpg?semt=ais_hybrid&w=740&q=80",productsTitle:" SELEKCJA CLICK HOUSE: READY TO SHIP",customTitle:" MODYFIKUJ BEZ OGRANICZE",customBgUrl:"https://images.unsplash.com/photo-1555680202-c86f0e12f086?q=80&w=2070&auto=format&fit=crop",aboutTitle:"NIE JESTEMY KOLEJNYM MARKETEM. JESTEMY EKSPERTAMI.",aboutBgUrl:"https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=2070&auto=format&fit=crop",contactTitle:" WESPRZYJ SI WIEDZ EKSPERTA",contactBgUrl:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?q=80&w=2070&auto=format&fit=crop"},qP="admin@demo.com",BP="admin";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HP=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),qE=n=>{const e=HP(n);return e.charAt(0).toUpperCase()+e.slice(1)},qC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),KP=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=Fe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...d},g)=>Fe.createElement("svg",{ref:g,...JP,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:qC("lucide",o),...!a&&!KP(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,v])=>Fe.createElement(h,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=(n,e)=>{const t=Fe.forwardRef(({className:i,...o},a)=>Fe.createElement(YP,{ref:a,iconNode:e,className:qC(`lucide-${GP(qE(n))}`,`lucide-${n}`,i),...o}));return t.displayName=qE(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BC=zt("circle-check-big",$P);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],BE=zt("credit-card",QP);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],WP=zt("key",XP);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ag=zt("loader",ZP);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],e2=zt("lock",jP);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],n2=zt("mail",t2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],s2=zt("menu",i2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M5 12h14",key:"1ays0h"}]],o2=zt("minus",r2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],l2=zt("pen",a2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cg=zt("plus",u2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],f2=zt("save",c2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],h2=zt("send",d2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],m2=zt("shopping-cart",p2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Hp=zt("sparkles",g2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],GC=zt("trash-2",y2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],v2=zt("truck",_2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],E2=zt("user",T2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],A2=zt("wrench",S2);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bu=zt("x",C2),I2=({cartCount:n,cartTotal:e,onCartClick:t,onAdminClick:i,onLoginClick:o,isAdmin:a})=>{const[u,d]=Fe.useState(!1);return w.jsxs("header",{className:"sticky top-0 z-50 bg-ch-bg-medium bg-opacity-90 backdrop-blur-md shadow-2xl border-b border-gray-700",children:[w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center py-4",children:[w.jsxs("a",{href:"#hero",className:"flex items-center space-x-2 text-3xl font-heading text-ch-primary hover:text-ch-secondary transition-colors duration-300",children:[w.jsx("div",{className:"border border-ch-primary p-1 rounded animate-pulse-glow",children:w.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 9l2 2 2-2"})]})}),w.jsx("span",{className:"hidden sm:inline",children:"Click House"}),w.jsx("span",{className:"sm:hidden",children:"CH"})]}),w.jsxs("nav",{className:"hidden md:flex space-x-10",children:[w.jsx("a",{href:"#hero",className:"text-ch-text-light hover:text-ch-primary transition",children:"Start"}),w.jsx("a",{href:"#products",className:"text-ch-text-light hover:text-ch-primary transition",children:"Produkty"}),w.jsx("a",{href:"#custom",className:"text-ch-text-light hover:text-ch-primary transition",children:"Customizacja"}),w.jsx("a",{href:"#about",className:"text-ch-text-light hover:text-ch-primary transition",children:"Przewaga"}),w.jsx("a",{href:"#contact",className:"text-ch-text-light hover:text-ch-primary transition",children:"Kontakt"})]}),w.jsxs("div",{className:"flex items-center space-x-4",children:[a?w.jsxs("button",{onClick:i,className:"relative p-2 rounded-lg bg-ch-primary text-ch-bg-dark hover:bg-[#8d5ed8] transition duration-300 shadow-neon",title:"Panel CMS",children:[w.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full animate-pulse"}),w.jsx(A2,{size:24})]}):w.jsxs("button",{onClick:o,className:"p-2 rounded-lg bg-[#202020] text-ch-primary hover:bg-[#303030] transition duration-300 border border-ch-primary/50 text-sm px-4 flex items-center gap-2",children:[w.jsx(E2,{size:16})," ",w.jsx("span",{className:"hidden lg:inline",children:"Admin"})]}),w.jsxs("button",{onClick:t,className:"relative p-2 rounded-lg bg-ch-secondary text-ch-bg-dark hover:bg-[#59b2cc] transition duration-300 shadow-cyan-glow flex items-center gap-2",children:[w.jsx(m2,{size:24}),n>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"absolute -top-1 -right-1 bg-ch-primary text-white text-xs w-5 h-5 flex items-center justify-center rounded-full font-bold border-2 border-ch-bg-medium animate-bounce",children:n}),w.jsxs("span",{className:"hidden sm:block font-bold ml-1",children:[e.toFixed(2)," z"]})]})]}),w.jsx("button",{className:"md:hidden text-ch-primary focus:outline-none",onClick:()=>d(!u),children:w.jsx(s2,{size:28})})]})]}),u&&w.jsx("nav",{className:"md:hidden bg-ch-bg-medium border-t border-gray-800",children:w.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 flex flex-col",children:[w.jsx("a",{href:"#hero",onClick:()=>d(!1),className:"px-3 py-2 rounded-md text-base font-medium text-ch-text-light hover:bg-[#202020] hover:text-ch-primary",children:"Start"}),w.jsx("a",{href:"#products",onClick:()=>d(!1),className:"px-3 py-2 rounded-md text-base font-medium text-ch-text-light hover:bg-[#202020] hover:text-ch-primary",children:"Produkty"}),w.jsx("a",{href:"#custom",onClick:()=>d(!1),className:"px-3 py-2 rounded-md text-base font-medium text-ch-text-light hover:bg-[#202020] hover:text-ch-primary",children:"Customizacja"}),w.jsx("a",{href:"#about",onClick:()=>d(!1),className:"px-3 py-2 rounded-md text-base font-medium text-ch-text-light hover:bg-[#202020] hover:text-ch-primary",children:"Przewaga"}),w.jsx("a",{href:"#contact",onClick:()=>d(!1),className:"px-3 py-2 rounded-md text-base font-medium text-ch-text-light hover:bg-[#202020] hover:text-ch-primary",children:"Kontakt"})]})})]})},w2=({data:n})=>{const[e,t]=Fe.useState(0);return Fe.useEffect(()=>{const i=()=>{t(window.scrollY*.3)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]),w.jsxs("section",{id:"hero",className:"relative min-h-[90vh] flex items-center justify-center bg-cover bg-center bg-no-repeat bg-fixed overflow-hidden",style:{backgroundImage:`url('${n.heroBgUrl}')`},children:[w.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 backdrop-blur-[2px] z-10"}),w.jsxs("div",{className:"relative z-20 max-w-5xl mx-auto px-4 pt-24 pb-48 text-center animate-fade-in",style:{transform:`translateY(${e}px)`},children:[w.jsx("h2",{className:"text-5xl md:text-7xl font-heading text-ch-tertiary mb-4 leading-none tracking-tighter drop-shadow-lg",children:n.heroTitle}),w.jsx("h1",{className:"text-3xl md:text-5xl font-heading text-ch-primary mb-8 leading-tight tracking-wide drop-shadow-md",children:n.heroSubtitle}),w.jsx("p",{className:"text-lg md:text-xl text-ch-gray max-w-3xl mx-auto mb-12 font-sans font-light",children:n.heroDescription}),w.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6",children:[w.jsx("a",{href:"#products",className:"bg-ch-primary text-ch-bg-dark py-4 px-10 rounded-xl font-extrabold text-lg hover:bg-[#8d5ed8] transition duration-300 shadow-xl hover:scale-[1.03] active:scale-95",children:" Sklep | Produkty"}),w.jsx("a",{href:"#custom",className:"bg-transparent border-2 border-ch-secondary text-ch-secondary py-4 px-10 rounded-xl font-bold text-lg hover:bg-ch-secondary hover:text-ch-bg-dark transition duration-300 shadow-xl hover:scale-[1.03] active:scale-95",children:" Customizacja"})]})]})]})},R2=({products:n,title:e,onAddToCart:t})=>w.jsx("section",{id:"products",className:"py-20",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[w.jsx("h3",{className:"text-4xl font-heading text-ch-primary text-center mb-12 border-b-2 border-ch-secondary/50 pb-3",children:e}),w.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-2 gap-8",children:n.map(i=>w.jsxs("div",{className:"group bg-ch-bg-medium rounded-xl overflow-hidden border border-gray-800 shadow-xl flex flex-col justify-between hover:-translate-y-2 hover:shadow-neon transition-all duration-300",children:[w.jsxs("div",{className:"relative overflow-hidden",children:[w.jsx("img",{src:i.image,alt:i.name,className:"w-full h-48 object-cover transform group-hover:scale-110 transition duration-500",onError:o=>{o.target.src="https://placehold.co/400x300/181818/F500FF?text=Produkt"}}),w.jsxs("span",{className:"absolute top-2 left-2 bg-ch-primary/90 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg",children:[i.icon," ",i.category]})]}),w.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-xl font-heading text-ch-tertiary mb-1 group-hover:text-ch-secondary transition-colors",children:i.name}),w.jsx("p",{className:"text-sm text-ch-gray mb-3",children:i.description})]}),w.jsxs("div",{className:"mt-4",children:[w.jsxs("p",{className:"text-3xl font-bold text-ch-secondary mb-3",children:[i.price.toFixed(2)," z"]}),w.jsxs("button",{onClick:()=>t(i.id),className:"w-full bg-ch-secondary text-ch-bg-dark py-2 rounded-lg font-bold hover:bg-[#59b2cc] transition duration-300 transform hover:scale-[1.02] active:scale-95 shadow-cyan-glow/50 flex items-center justify-center gap-2",children:[w.jsx(Cg,{size:18})," Dodaj do Koszyka"]})]})]})]},i.id))})]})}),b2=({isOpen:n,onClose:e,items:t,userId:i,onUpdateQuantity:o,onRemove:a,onCheckout:u})=>{const d=t.reduce((g,h)=>g+h.price*h.quantity,0);return w.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-ch-bg-medium z-[100] shadow-2xl p-6 flex flex-col border-l border-ch-secondary transform transition-transform duration-300 ${n?"translate-x-0":"translate-x-full"}`,children:[w.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-gray-700",children:[w.jsx("h3",{className:"text-2xl font-heading text-ch-secondary",children:" Twj Koszyk"}),w.jsx("button",{onClick:e,className:"text-ch-primary hover:text-white transition duration-200",children:w.jsx(bu,{size:24})})]}),w.jsx("div",{className:"flex-grow overflow-y-auto mt-4 space-y-4",children:t.length===0?w.jsx("p",{className:"text-ch-gray py-4 text-center",children:"Twj koszyk jest pusty."}):w.jsx("ul",{className:"space-y-4",children:t.map(g=>w.jsxs("li",{className:"flex justify-between items-center pb-2 border-b border-gray-800 last:border-0 animate-fade-in",children:[w.jsxs("div",{className:"flex-grow pr-2",children:[w.jsx("p",{className:"font-bold text-ch-text-light text-sm",children:g.name}),w.jsxs("p",{className:"text-xs text-ch-gray",children:[g.price.toFixed(2)," z x ",g.quantity]})]}),w.jsxs("div",{className:"flex items-center space-x-2 shrink-0",children:[w.jsx("button",{onClick:()=>o(g.id,-1),className:"text-ch-secondary hover:text-white p-1 rounded-full border border-ch-secondary hover:bg-[#202020]",children:w.jsx(o2,{size:12})}),w.jsx("span",{className:"text-sm w-4 text-center",children:g.quantity}),w.jsx("button",{onClick:()=>o(g.id,1),className:"text-ch-secondary hover:text-white p-1 rounded-full border border-ch-secondary hover:bg-[#202020]",children:w.jsx(Cg,{size:12})}),w.jsx("button",{onClick:()=>a(g.id),className:"text-red-500 hover:text-red-400 ml-1",children:w.jsx(GC,{size:16})})]})]},g.id))})}),w.jsxs("div",{className:"pt-4 mt-4 border-t-2 border-ch-primary",children:[w.jsxs("div",{className:"flex justify-between items-center text-xl font-bold mb-4",children:[w.jsx("span",{children:"Suma:"}),w.jsxs("span",{className:"text-ch-secondary",children:[d.toFixed(2)," z"]})]}),w.jsx("button",{onClick:u,disabled:t.length===0,className:`w-full py-3 rounded-lg font-bold transition duration-300 shadow-neon flex items-center justify-center ${t.length===0?"bg-gray-600 cursor-not-allowed opacity-50":"bg-ch-primary text-ch-bg-dark hover:bg-[#8d5ed8]"}`,children:"DALEJ DO PATNOCI "})]}),i&&w.jsxs("p",{className:"mt-4 text-[10px] text-ch-gray break-all text-center",children:["ID: ",i]})]})};var N2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let x2,M2;function D2(){return{geminiUrl:x2,vertexUrl:M2}}function P2(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=D2();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ss{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let h=0;h<g.length;h++){const v=g[h];p(v,e.slice(a+1),t[h])}else for(const h of g)p(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];p(g[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function k2(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let g=0;g<o.length;g++)if(o[g]==="*"){d=g;break}if(d!==-1&&a.length>d)for(let g=d;g<a.length;g++){const h=a[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}_m(n,o,a,0,u)}}function _m(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])_m(g,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),g={};for(const h of d)g[h]=u[h];for(const[h,v]of Object.entries(g)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,v)}for(const h of d)delete u[h]}}else{const u=n;a in u&&_m(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ig(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V2(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function U2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],O2(u)),e}function L2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],z2(u)),e}function O2(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>F2(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function z2(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>q2(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function F2(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],Y2(t)),e}function q2(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],$2(t)),e}function B2(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function G2(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function H2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],K2(u)),e}function K2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function HC(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],J2(u)),e}function J2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function Y2(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Ig(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function $2(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Ig(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var GE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(GE||(GE={}));var HE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(HE||(HE={}));var KE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(KE||(KE={}));var En;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(En||(En={}));var JE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(JE||(JE={}));var YE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(YE||(YE={}));var $E;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($E||($E={}));var QE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(QE||(QE={}));var XE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(XE||(XE={}));var WE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(WE||(WE={}));var ZE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(ZE||(ZE={}));var jE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(jE||(jE={}));var e0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(e0||(e0={}));var t0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(t0||(t0={}));var n0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(n0||(n0={}));var i0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(i0||(i0={}));var s0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(s0||(s0={}));var r0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(r0||(r0={}));var o0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(o0||(o0={}));var a0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(a0||(a0={}));var l0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(l0||(l0={}));var Qf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Qf||(Qf={}));var u0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(u0||(u0={}));var c0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(c0||(c0={}));var f0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(f0||(f0={}));var vm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vm||(vm={}));var d0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(d0||(d0={}));var h0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(h0||(h0={}));var Tm;(function(n){n.COLLECTION="COLLECTION"})(Tm||(Tm={}));var p0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(p0||(p0={}));var m0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(m0||(m0={}));var g0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(g0||(g0={}));var y0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(y0||(y0={}));var _0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(_0||(_0={}));var v0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(v0||(v0={}));var T0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(T0||(T0={}));var E0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(E0||(E0={}));var S0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(S0||(S0={}));var A0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(A0||(A0={}));var C0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(C0||(C0={}));var I0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(I0||(I0={}));var w0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(w0||(w0={}));var R0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(R0||(R0={}));var b0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(b0||(b0={}));var N0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(N0||(N0={}));var x0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(x0||(x0={}));var M0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(M0||(M0={}));var D0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(D0||(D0={}));var P0;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(P0||(P0={}));var k0;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(k0||(k0={}));var V0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(V0||(V0={}));var U0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(U0||(U0={}));var L0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(L0||(L0={}));var O0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(O0||(O0={}));var z0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(z0||(z0={}));var F0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(F0||(F0={}));var ca;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ca||(ca={}));class Em{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Yl{get text(){var e,t,i,o,a,u,d,g;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const T=[];for(const S of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[R,P]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(P!==null||P!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,a,u,d,g;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const T of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,g;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,g,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,g,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class q0{}class B0{}class Q2{}class X2{}class W2{}class Z2{}class G0{}class H0{}class K0{}class j2{}class Xf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Xf;let o;const a=e;return t?o=L2(a):o=U2(a),Object.assign(i,o),i}}class J0{}class Y0{}class $0{}class Q0{}class ek{}class tk{}class nk{}class wg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new wg,a=H2(e);return Object.assign(i,a),i}}class ik{}class sk{}class rk{}class ok{}class X0{}class ak{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(d))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class lk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Rg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Rg,a=HC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function KC(n,e){const t=Qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function JC(n){return Array.isArray(n)?n.map(e=>Wf(e)):[Wf(n)]}function Wf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function YC(n){const e=Wf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $C(n){const e=Wf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function W0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function QC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>W0(e)):[W0(n)]}function Sm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Z0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function j0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Sm(n)?n:{role:"user",parts:QC(n)}}function bg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=rn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Z0(n)||j0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],i=Sm(n[0]);for(const o of n){const a=Sm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(Z0(o)||j0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:QC(t)}),e}function uk(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(En).includes(t[0].toUpperCase())?t[0].toUpperCase():En.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(En).includes(i.toUpperCase())?i.toUpperCase():En.TYPE_UNSPECIFIED})}}function va(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&uk(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(En).includes(d.toUpperCase())?d.toUpperCase():En.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=va(d);else if(i.includes(u)){const g=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}g.push(va(h))}e[u]=g}else if(o.includes(u)){const g={};for(const[h,v]of Object.entries(d))g[h]=va(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Ng(n){return va(n)}function xg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Mg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ua(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=va(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=va(e.response));return n}function La(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function ck(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function As(n,e){if(typeof e!="string")throw new Error("name must be a string");return ck(n,e,"cachedContents")}function XC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ar(n){return Ig(n)}function fk(n){return n!=null&&typeof n=="object"&&"name"in n}function dk(n){return n!=null&&typeof n=="object"&&"video"in n}function hk(n){return n!=null&&typeof n=="object"&&"uri"in n}function WC(n){var e;let t;if(fk(n)&&(t=n.name),!(hk(n)&&(t=n.uri,t===void 0))&&!(dk(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ZC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function jC(n){for(const e of["models","tunedModels","publisherModels"])if(pk(n,e))return n[e];return[]}function pk(n,e){return n!==null&&typeof n=="object"&&e in n}function mk(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function gk(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=mk(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function eI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function yk(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Oa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function nI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _k(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Zk(u))),p(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function vk(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function Tk(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Rf(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&p(e,["state"],nI(o));const a=f(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&p(e,["model"],g);const h=f(n,["metadata","output"]);return h!=null&&p(e,["dest"],_k(tI(h))),e}function Am(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["state"]);o!=null&&p(e,["state"],nI(o));const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&p(e,["endTime"],g);const h=f(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const v=f(n,["model"]);v!=null&&p(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&p(e,["src"],Ek(T));const S=f(n,["outputConfig"]);S!=null&&p(e,["dest"],vk(tI(S)));const R=f(n,["completionStats"]);return R!=null&&p(e,["completionStats"],R),e}function Ek(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function Sk(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Wk(n,u))),p(t,["requests","requests"],a)}return t}function Ak(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ck(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Ik(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Oa(n,i)),t}function wk(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Oa(n,i)),t}function Rk(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],bk(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&p(e,["index"],g);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),p(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function bk(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function iI(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>rV(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function Nk(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function xk(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],Tk(yk(o))),t}function eS(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Qe(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],Sk(n,eI(n,o)));const a=f(e,["config"]);return a!=null&&Nk(a,t),t}function Mk(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],Qe(n,i));const o=f(e,["src"]);o!=null&&p(t,["inputConfig"],Ak(eI(n,o)));const a=f(e,["config"]);return a!=null&&xk(a,t),t}function Dk(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function Pk(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Qe(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],Fk(n,o));const a=f(e,["config"]);return a!=null&&Dk(a,t),t}function kk(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Oa(n,i)),t}function Vk(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Oa(n,i)),t}function Uk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function Lk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function Ok(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=bg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(p(t,["_self"],zk(o,t)),k2(t,{"requests[].*":"requests[].request.*"})),t}function zk(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Fk(n,e){const t={},i=f(e,["fileName"]);i!=null&&p(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&p(t,["requests"],Ok(n,o)),t}function qk(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Bk(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gk(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&p(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Hk(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],iI(rn(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&p(i,["presencePenalty"],R);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const F=f(e,["seed"]);F!=null&&p(i,["seed"],F);const L=f(e,["responseMimeType"]);L!=null&&p(i,["responseMimeType"],L);const $=f(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],Ng($));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&p(i,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let D=Z;Array.isArray(D)&&(D=D.map(xe=>oV(xe))),p(t,["safetySettings"],D)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let D=La(ae);Array.isArray(D)&&(D=D.map(xe=>lV(Ua(xe)))),p(t,["tools"],D)}const X=f(e,["toolConfig"]);if(t!==void 0&&X!=null&&p(t,["toolConfig"],aV(X)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=f(e,["cachedContent"]);t!==void 0&&de!=null&&p(t,["cachedContent"],As(n,de));const M=f(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&p(i,["mediaResolution"],x);const b=f(e,["speechConfig"]);if(b!=null&&p(i,["speechConfig"],xg(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&p(i,["thinkingConfig"],U);const V=f(e,["imageConfig"]);V!=null&&p(i,["imageConfig"],Xk(V));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&p(i,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Kk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>Rk(h))),p(e,["candidates"],g)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function Jk(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Oa(n,i)),t}function Yk(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Oa(n,i)),t}function $k(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Qk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Xk(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Wk(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["request","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let d=$n(o);Array.isArray(d)&&(d=d.map(g=>iI(g))),p(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(t,["request","generationConfig"],Hk(n,u,f(t,["request"],{}))),t}function Zk(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],Kk(t));const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["error"]);return o!=null&&p(e,["error"],o),e}function jk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function eV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function tV(n){const e={},t=f(n,["config"]);return t!=null&&jk(t,e),e}function nV(n){const e={},t=f(n,["config"]);return t!=null&&eV(t,e),e}function iV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Rf(u))),p(e,["batchJobs"],a)}return e}function sV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Am(u))),p(e,["batchJobs"],a)}return e}function rV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],qk(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],Bk(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],Ck(g));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function oV(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function aV(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],Gk(i)),e}function lV(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],$k(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],Qk(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ts;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ts||(Ts={}));class ho{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uV extends Ss{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(Ts.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=eS(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,g=d.requests,h=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}h.push(T)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Mk(this.apiClient,e);return d=fe("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Am(v))}else{const h=eS(this.apiClient,e);return d=fe("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Rf(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Pk(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>Rf(g))}}async get(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Yk(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Am(v))}else{const h=Jk(this.apiClient,e);return d=fe("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Rf(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const g=wk(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=Ik(this.apiClient,e);u=fe("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=nV(e);return d=fe("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sV(v),S=new X0;return Object.assign(S,T),S})}else{const h=tV(e);return d=fe("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=iV(v),S=new X0;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Vk(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Lk(v))}else{const h=kk(this.apiClient,e);return d=fe("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Uk(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cV(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function tS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>PV(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function fV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=$n(u);Array.isArray(v)&&(v=v.map(T=>tS(T))),p(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],tS(rn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>VV(T))),p(e,["tools"],v)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],kV(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function dV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=$n(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],rn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>UV(S))),p(e,["tools"],T)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),t}function hV(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],KC(n,i));const o=f(e,["config"]);return o!=null&&fV(o,t),t}function pV(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],KC(n,i));const o=f(e,["config"]);return o!=null&&dV(o,t),t}function mV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],As(n,i)),t}function gV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],As(n,i)),t}function yV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function _V(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function vV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function TV(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EV(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&p(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SV(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function AV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],As(n,i)),t}function CV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],As(n,i)),t}function IV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function wV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function RV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function bV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function NV(n){const e={},t=f(n,["config"]);return t!=null&&RV(t,e),e}function xV(n){const e={},t=f(n,["config"]);return t!=null&&bV(t,e),e}function MV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function DV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function PV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],vV(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],TV(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],cV(g));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function kV(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],EV(i)),e}function VV(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],IV(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],wV(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function UV(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>SV(S))),p(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],g);const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function LV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function OV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function zV(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],As(n,i));const o=f(e,["config"]);return o!=null&&LV(o,t),t}function FV(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],As(n,i));const o=f(e,["config"]);return o!=null&&OV(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qV extends Ss{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(Ts.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=pV(this.apiClient,e);return d=fe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=hV(this.apiClient,e);return d=fe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=CV(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=AV(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=gV(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_V(v),S=new $0;return Object.assign(S,T),S})}else{const h=mV(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=yV(v),S=new $0;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=FV(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=zV(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=xV(e);return d=fe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=DV(v),S=new Q0;return Object.assign(S,T),S})}else{const h=NV(e);return d=fe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=MV(v),S=new Q0;return Object.assign(S,T),S})}}}function Zf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function nS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(n){return this instanceof we?(this.v=n,this):new we(n)}function fi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(R){return function(P){return Promise.resolve(P).then(R,T)}}function d(R,P){i[R]&&(o[R]=function(F){return new Promise(function(L,$){a.push([R,F,L,$])>1||g(R,F)})},P&&(o[R]=P(o[R])))}function g(R,P){try{h(i[R](P))}catch(F){S(a[0][3],F)}}function h(R){R.value instanceof we?Promise.resolve(R.value.v).then(v,T):S(a[0][2],R)}function v(R){g("next",R)}function T(R){g("throw",R)}function S(R,P){R(P),a.shift(),a.length&&g(a[0][0],a[0][1])}}function di(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof nS=="function"?nS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,g){u=n[a](u),o(d,g,u.done,u.value)})}}function o(a,u,d,g){Promise.resolve(g).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BV(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:sI(t)}function sI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function GV(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!sI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class HV{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new KV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class KV{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),GV(a)}async sendMessage(e){var t;await this.sendPromise;const i=rn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const g=await o,h=(u=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=h?[h]:[];this.recordHistory(i,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=rn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?iS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return fi(this,arguments,function*(){var o,a,u,d,g,h;const v=[];try{for(var T=!0,S=di(e),R;R=yield we(S.next()),o=R.done,!o;T=!0){d=R.value,T=!1;const P=d;if(BV(P)){const F=(h=(g=P.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;F!==void 0&&v.push(F)}yield yield we(P)}}catch(P){a={error:P}}finally{try{!T&&!o&&(u=S.return)&&(yield we(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...iS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,mu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JV(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function YV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function $V(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],WC(t)),e}function QV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function XV(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],WC(t)),e}function WV(n){const e={},t=f(n,["uris"]);return t!=null&&p(e,["uris"],t),e}function ZV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function jV(n){const e={},t=f(n,["config"]);return t!=null&&ZV(t,e),e}function eU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}function tU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nU extends Ss{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(Ts.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jV(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=eU(g),v=new ik;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JV(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=YV(g),v=new sk;return Object.assign(v,h),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XV(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$V(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=QV(g),v=new rk;return Object.assign(v,h),v})}}async registerFilesInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=WV(e);return a=fe("files:register",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=tU(g),v=new ok;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bf(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function iU(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>vU(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function sU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function rU(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function oU(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function aU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=f(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&p(e,["responseMimeType"],R);const P=f(n,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const F=f(n,["responseSchema"]);F!=null&&p(e,["responseSchema"],F);const L=f(n,["routingConfig"]);L!=null&&p(e,["routingConfig"],L);const $=f(n,["seed"]);$!=null&&p(e,["seed"],$);const ne=f(n,["speechConfig"]);ne!=null&&p(e,["speechConfig"],ne);const Z=f(n,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const ae=f(n,["temperature"]);ae!=null&&p(e,["temperature"],ae);const X=f(n,["thinkingConfig"]);X!=null&&p(e,["thinkingConfig"],X);const de=f(n,["topK"]);de!=null&&p(e,["topK"],de);const M=f(n,["topP"]);if(M!=null&&p(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function lU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function uU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function cU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Mg(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],iU(rn(P)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let de=La(F);Array.isArray(de)&&(de=de.map(M=>EU(Ua(M)))),p(e,["setup","tools"],de)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&p(e,["setup","sessionResumption"],TU(L));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&p(e,["setup","contextWindowCompression"],ae);const X=f(n,["proactivity"]);if(e!==void 0&&X!=null&&p(e,["setup","proactivity"],X),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function fU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],aU(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Mg(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],rn(P));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let M=La(F);Array.isArray(M)&&(M=M.map(x=>SU(Ua(x)))),p(e,["setup","tools"],M)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&p(e,["setup","sessionResumption"],L);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&p(e,["setup","contextWindowCompression"],ae);const X=f(n,["proactivity"]);e!==void 0&&X!=null&&p(e,["setup","proactivity"],X);const de=f(n,["explicitVadSignal"]);return e!==void 0&&de!=null&&p(e,["setup","explicitVadSignal"],de),t}function dU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],cU(o,t)),t}function hU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],fU(o,t)),t}function pU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function mU(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function gU(n){const e={},t=f(n,["media"]);if(t!=null){let h=JC(t);Array.isArray(h)&&(h=h.map(v=>bf(v))),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],bf($C(i)));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],bf(YC(a)));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function yU(n){const e={},t=f(n,["media"]);if(t!=null){let h=JC(t);Array.isArray(h)&&(h=h.map(v=>v)),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],$C(i));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],YC(a));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function _U(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],AU(u));const d=f(n,["goAway"]);d!=null&&p(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=f(n,["voiceActivityDetectionSignal"]);h!=null&&p(e,["voiceActivityDetectionSignal"],h);const v=f(n,["voiceActivity"]);return v!=null&&p(e,["voiceActivity"],CU(v)),e}function vU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],sU(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],rU(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],bf(g));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function TU(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EU(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],lU(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],uU(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function SU(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>oU(S))),p(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],g);const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function AU(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(P=>P)),p(e,["promptTokensDetails"],R)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let R=h;Array.isArray(R)&&(R=R.map(P=>P)),p(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(P=>P)),p(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(P=>P)),p(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}function CU(n){const e={},t=f(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IU(n,e){const t={},i=f(n,["data"]);if(i!=null&&p(t,["data"],i),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function wU(n,e){const t={},i=f(n,["content"]);i!=null&&p(t,["content"],i);const o=f(n,["citationMetadata"]);o!=null&&p(t,["citationMetadata"],RU(o));const a=f(n,["tokenCount"]);a!=null&&p(t,["tokenCount"],a);const u=f(n,["finishReason"]);u!=null&&p(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&p(t,["avgLogprobs"],d);const g=f(n,["groundingMetadata"]);g!=null&&p(t,["groundingMetadata"],g);const h=f(n,["index"]);h!=null&&p(t,["index"],h);const v=f(n,["logprobsResult"]);v!=null&&p(t,["logprobsResult"],v);const T=f(n,["safetyRatings"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(P=>P)),p(t,["safetyRatings"],R)}const S=f(n,["urlContextMetadata"]);return S!=null&&p(t,["urlContextMetadata"],S),t}function RU(n,e){const t={},i=f(n,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["citations"],o)}return t}function bU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["contents"]);if(a!=null){let u=$n(a);Array.isArray(u)&&(u=u.map(d=>d)),p(i,["contents"],u)}return i}function NU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["tokensInfo"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["tokensInfo"],a)}return t}function xU(n,e){const t={},i=f(n,["values"]);i!=null&&p(t,["values"],i);const o=f(n,["statistics"]);return o!=null&&p(t,["statistics"],MU(o)),t}function MU(n,e){const t={},i=f(n,["truncated"]);i!=null&&p(t,["truncated"],i);const o=f(n,["token_count"]);return o!=null&&p(t,["tokenCount"],o),t}function Td(n,e){const t={},i=f(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>FL(u))),p(t,["parts"],a)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function DU(n,e){const t={},i=f(n,["controlType"]);i!=null&&p(t,["controlType"],i);const o=f(n,["enableControlImageComputation"]);return o!=null&&p(t,["computeControl"],o),t}function PU(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function kU(n,e,t){const i={},o=f(n,["systemInstruction"]);e!==void 0&&o!=null&&p(e,["systemInstruction"],rn(o));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>lI(g))),p(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],IL(u)),i}function VU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>Td(g))),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&PU(u),i}function UU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>g)),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&kU(u,i),i}function LU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["totalTokens"]);o!=null&&p(t,["totalTokens"],o);const a=f(n,["cachedContentTokenCount"]);return a!=null&&p(t,["cachedContentTokenCount"],a),t}function OU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["totalTokens"]);return o!=null&&p(t,["totalTokens"],o),t}function zU(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function FU(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function qU(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function BU(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function GU(n,e,t){const i={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&p(e,["parameters","guidanceScale"],g);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&p(e,["parameters","includeRaiReason"],R);const P=f(n,["language"]);e!==void 0&&P!=null&&p(e,["parameters","language"],P);const F=f(n,["outputMimeType"]);e!==void 0&&F!=null&&p(e,["parameters","outputOptions","mimeType"],F);const L=f(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","compressionQuality"],L);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&p(e,["parameters","addWatermark"],$);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&p(e,["labels"],ne);const Z=f(n,["editMode"]);e!==void 0&&Z!=null&&p(e,["parameters","editMode"],Z);const ae=f(n,["baseSteps"]);return e!==void 0&&ae!=null&&p(e,["parameters","editConfig","baseSteps"],ae),i}function HU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(h=>JL(h))),p(i,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&GU(d,i),i}function KU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Ed(u))),p(t,["generatedImages"],a)}return t}function JU(n,e,t){const i={},o=f(n,["taskType"]);e!==void 0&&o!=null&&p(e,["requests[]","taskType"],o);const a=f(n,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function YU(n,e,t){const i={},o=f(n,["taskType"]);e!==void 0&&o!=null&&p(e,["instances[]","task_type"],o);const a=f(n,["title"]);e!==void 0&&a!=null&&p(e,["instances[]","title"],a);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&p(e,["instances[]","mimeType"],d);const g=f(n,["autoTruncate"]);return e!==void 0&&g!=null&&p(e,["parameters","autoTruncate"],g),i}function $U(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["contents"]);if(a!=null){let g=bg(n,a);Array.isArray(g)&&(g=g.map(h=>h)),p(i,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&JU(u,i);const d=f(e,["model"]);return d!==void 0&&p(i,["requests[]","model"],Qe(n,d)),i}function QU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["contents"]);if(a!=null){let d=bg(n,a);Array.isArray(d)&&(d=d.map(g=>g)),p(i,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&YU(u,i),i}function XU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["embeddings"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),p(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function WU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions[]","embeddings"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>xU(d))),p(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function ZU(n,e){const t={},i=f(n,["endpoint"]);i!=null&&p(t,["name"],i);const o=f(n,["deployedModelId"]);return o!=null&&p(t,["deployedModelId"],o),t}function jU(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&p(t,["fileUri"],i);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function eL(n,e){const t={},i=f(n,["id"]);i!=null&&p(t,["id"],i);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const a=f(n,["name"]);if(a!=null&&p(t,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function tL(n,e){const t={},i=f(n,["allowedFunctionNames"]);i!=null&&p(t,["allowedFunctionNames"],i);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function nL(n,e){const t={},i=f(n,["description"]);i!=null&&p(t,["description"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["parameters"]);a!=null&&p(t,["parameters"],a);const u=f(n,["parametersJsonSchema"]);u!=null&&p(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&p(t,["response"],d);const g=f(n,["responseJsonSchema"]);if(g!=null&&p(t,["responseJsonSchema"],g),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function iL(n,e,t,i){const o={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],Td(rn(a)));const u=f(e,["temperature"]);u!=null&&p(o,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(o,["topP"],d);const g=f(e,["topK"]);g!=null&&p(o,["topK"],g);const h=f(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const v=f(e,["maxOutputTokens"]);v!=null&&p(o,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&p(o,["stopSequences"],T);const S=f(e,["responseLogprobs"]);S!=null&&p(o,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&p(o,["logprobs"],R);const P=f(e,["presencePenalty"]);P!=null&&p(o,["presencePenalty"],P);const F=f(e,["frequencyPenalty"]);F!=null&&p(o,["frequencyPenalty"],F);const L=f(e,["seed"]);L!=null&&p(o,["seed"],L);const $=f(e,["responseMimeType"]);$!=null&&p(o,["responseMimeType"],$);const ne=f(e,["responseSchema"]);ne!=null&&p(o,["responseSchema"],Ng(ne));const Z=f(e,["responseJsonSchema"]);if(Z!=null&&p(o,["responseJsonSchema"],Z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ae=f(e,["safetySettings"]);if(t!==void 0&&ae!=null){let xe=ae;Array.isArray(xe)&&(xe=xe.map(me=>YL(me))),p(t,["safetySettings"],xe)}const X=f(e,["tools"]);if(t!==void 0&&X!=null){let xe=La(X);Array.isArray(xe)&&(xe=xe.map(me=>eO(Ua(me)))),p(t,["tools"],xe)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],jL(de)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&p(t,["cachedContent"],As(n,M));const x=f(e,["responseModalities"]);x!=null&&p(o,["responseModalities"],x);const b=f(e,["mediaResolution"]);b!=null&&p(o,["mediaResolution"],b);const U=f(e,["speechConfig"]);if(U!=null&&p(o,["speechConfig"],xg(U)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&p(o,["thinkingConfig"],V);const q=f(e,["imageConfig"]);q!=null&&p(o,["imageConfig"],xL(q));const D=f(e,["enableEnhancedCivicAnswers"]);if(D!=null&&p(o,["enableEnhancedCivicAnswers"],D),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function sL(n,e,t,i){const o={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],rn(a));const u=f(e,["temperature"]);u!=null&&p(o,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(o,["topP"],d);const g=f(e,["topK"]);g!=null&&p(o,["topK"],g);const h=f(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const v=f(e,["maxOutputTokens"]);v!=null&&p(o,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&p(o,["stopSequences"],T);const S=f(e,["responseLogprobs"]);S!=null&&p(o,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&p(o,["logprobs"],R);const P=f(e,["presencePenalty"]);P!=null&&p(o,["presencePenalty"],P);const F=f(e,["frequencyPenalty"]);F!=null&&p(o,["frequencyPenalty"],F);const L=f(e,["seed"]);L!=null&&p(o,["seed"],L);const $=f(e,["responseMimeType"]);$!=null&&p(o,["responseMimeType"],$);const ne=f(e,["responseSchema"]);ne!=null&&p(o,["responseSchema"],Ng(ne));const Z=f(e,["responseJsonSchema"]);Z!=null&&p(o,["responseJsonSchema"],Z);const ae=f(e,["routingConfig"]);ae!=null&&p(o,["routingConfig"],ae);const X=f(e,["modelSelectionConfig"]);X!=null&&p(o,["modelConfig"],X);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let le=de;Array.isArray(le)&&(le=le.map(Te=>Te)),p(t,["safetySettings"],le)}const M=f(e,["tools"]);if(t!==void 0&&M!=null){let le=La(M);Array.isArray(le)&&(le=le.map(Te=>lI(Ua(Te)))),p(t,["tools"],le)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&p(t,["toolConfig"],x);const b=f(e,["labels"]);t!==void 0&&b!=null&&p(t,["labels"],b);const U=f(e,["cachedContent"]);t!==void 0&&U!=null&&p(t,["cachedContent"],As(n,U));const V=f(e,["responseModalities"]);V!=null&&p(o,["responseModalities"],V);const q=f(e,["mediaResolution"]);q!=null&&p(o,["mediaResolution"],q);const D=f(e,["speechConfig"]);D!=null&&p(o,["speechConfig"],xg(D));const xe=f(e,["audioTimestamp"]);xe!=null&&p(o,["audioTimestamp"],xe);const me=f(e,["thinkingConfig"]);me!=null&&p(o,["thinkingConfig"],me);const H=f(e,["imageConfig"]);if(H!=null&&p(o,["imageConfig"],ML(H)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const oe=f(e,["modelArmorConfig"]);return t!==void 0&&oe!=null&&p(t,["modelArmorConfig"],oe),o}function sS(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>Td(g))),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(i,["generationConfig"],iL(n,u,i)),i}function rS(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>g)),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(i,["generationConfig"],sL(n,u,i)),i}function oS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(v=>wU(v))),p(t,["candidates"],h)}const a=f(n,["modelVersion"]);a!=null&&p(t,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&p(t,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&p(t,["usageMetadata"],g),t}function aS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["candidates"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(T=>T)),p(t,["candidates"],v)}const a=f(n,["createTime"]);a!=null&&p(t,["createTime"],a);const u=f(n,["modelVersion"]);u!=null&&p(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&p(t,["promptFeedback"],d);const g=f(n,["responseId"]);g!=null&&p(t,["responseId"],g);const h=f(n,["usageMetadata"]);return h!=null&&p(t,["usageMetadata"],h),t}function rL(n,e,t){const i={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=f(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&p(e,["parameters","includeSafetyAttributes"],h);const v=f(n,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const T=f(n,["language"]);e!==void 0&&T!=null&&p(e,["parameters","language"],T);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const R=f(n,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&p(e,["parameters","outputOptions","compressionQuality"],R),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=f(n,["imageSize"]);if(e!==void 0&&P!=null&&p(e,["parameters","sampleImageSize"],P),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function oL(n,e,t){const i={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&p(e,["parameters","guidanceScale"],g);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&p(e,["parameters","includeRaiReason"],R);const P=f(n,["language"]);e!==void 0&&P!=null&&p(e,["parameters","language"],P);const F=f(n,["outputMimeType"]);e!==void 0&&F!=null&&p(e,["parameters","outputOptions","mimeType"],F);const L=f(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","compressionQuality"],L);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&p(e,["parameters","addWatermark"],$);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&p(e,["labels"],ne);const Z=f(n,["imageSize"]);e!==void 0&&Z!=null&&p(e,["parameters","sampleImageSize"],Z);const ae=f(n,["enhancePrompt"]);return e!==void 0&&ae!=null&&p(e,["parameters","enhancePrompt"],ae),i}function aL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&rL(u,i),i}function lL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&oL(u,i),i}function uL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>EL(d))),p(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],oI(a)),t}function cL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Ed(d))),p(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],aI(a)),t}function fL(n,e,t){const i={},o=f(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&p(e,["parameters","resolution"],d);const g=f(n,["personGeneration"]);if(e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(n,["negativePrompt"]);e!==void 0&&h!=null&&p(e,["parameters","negativePrompt"],h);const v=f(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&p(e,["parameters","enhancePrompt"],v),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&p(e,["instances[0]","lastFrame"],Sd(T));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let R=S;Array.isArray(R)&&(R=R.map(P=>hO(P))),p(e,["instances[0]","referenceImages"],R)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function dL(n,e,t){const i={},o=f(n,["numberOfVideos"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=f(n,["aspectRatio"]);e!==void 0&&h!=null&&p(e,["parameters","aspectRatio"],h);const v=f(n,["resolution"]);e!==void 0&&v!=null&&p(e,["parameters","resolution"],v);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&p(e,["parameters","pubsubTopic"],S);const R=f(n,["negativePrompt"]);e!==void 0&&R!=null&&p(e,["parameters","negativePrompt"],R);const P=f(n,["enhancePrompt"]);e!==void 0&&P!=null&&p(e,["parameters","enhancePrompt"],P);const F=f(n,["generateAudio"]);e!==void 0&&F!=null&&p(e,["parameters","generateAudio"],F);const L=f(n,["lastFrame"]);e!==void 0&&L!=null&&p(e,["instances[0]","lastFrame"],hi(L));const $=f(n,["referenceImages"]);if(e!==void 0&&$!=null){let ae=$;Array.isArray(ae)&&(ae=ae.map(X=>pO(X))),p(e,["instances[0]","referenceImages"],ae)}const ne=f(n,["mask"]);e!==void 0&&ne!=null&&p(e,["instances[0]","mask"],dO(ne));const Z=f(n,["compressionQuality"]);return e!==void 0&&Z!=null&&p(e,["parameters","compressionQuality"],Z),i}function hL(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const a=f(n,["done"]);a!=null&&p(t,["done"],a);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&p(t,["response"],yL(d)),t}function pL(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const a=f(n,["done"]);a!=null&&p(t,["done"],a);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response"]);return d!=null&&p(t,["response"],_L(d)),t}function mL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&p(i,["instances[0]","image"],Sd(u));const d=f(e,["video"]);d!=null&&p(i,["instances[0]","video"],uI(d));const g=f(e,["source"]);g!=null&&vL(g,i);const h=f(e,["config"]);return h!=null&&fL(h,i),i}function gL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&p(i,["instances[0]","image"],hi(u));const d=f(e,["video"]);d!=null&&p(i,["instances[0]","video"],cI(d));const g=f(e,["source"]);g!=null&&TL(g,i);const h=f(e,["config"]);return h!=null&&dL(h,i),i}function yL(n,e){const t={},i=f(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>AL(d))),p(t,["generatedVideos"],u)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function _L(n,e){const t={},i=f(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>CL(d))),p(t,["generatedVideos"],u)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function vL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Sd(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],uI(u)),i}function TL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],hi(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],cI(u)),i}function EL(n,e){const t={},i=f(n,["_self"]);i!=null&&p(t,["image"],DL(i));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const a=f(n,["_self"]);return a!=null&&p(t,["safetyAttributes"],oI(a)),t}function Ed(n,e){const t={},i=f(n,["_self"]);i!=null&&p(t,["image"],rI(i));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const a=f(n,["_self"]);a!=null&&p(t,["safetyAttributes"],aI(a));const u=f(n,["prompt"]);return u!=null&&p(t,["enhancedPrompt"],u),t}function SL(n,e){const t={},i=f(n,["_self"]);i!=null&&p(t,["mask"],rI(i));const o=f(n,["labels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["labels"],a)}return t}function AL(n,e){const t={},i=f(n,["video"]);return i!=null&&p(t,["video"],cO(i)),t}function CL(n,e){const t={},i=f(n,["_self"]);return i!=null&&p(t,["video"],fO(i)),t}function IL(n,e){const t={},i=f(n,["modelSelectionConfig"]);i!=null&&p(t,["modelConfig"],i);const o=f(n,["responseJsonSchema"]);o!=null&&p(t,["responseJsonSchema"],o);const a=f(n,["audioTimestamp"]);a!=null&&p(t,["audioTimestamp"],a);const u=f(n,["candidateCount"]);u!=null&&p(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&p(t,["enableAffectiveDialog"],d);const g=f(n,["frequencyPenalty"]);g!=null&&p(t,["frequencyPenalty"],g);const h=f(n,["logprobs"]);h!=null&&p(t,["logprobs"],h);const v=f(n,["maxOutputTokens"]);v!=null&&p(t,["maxOutputTokens"],v);const T=f(n,["mediaResolution"]);T!=null&&p(t,["mediaResolution"],T);const S=f(n,["presencePenalty"]);S!=null&&p(t,["presencePenalty"],S);const R=f(n,["responseLogprobs"]);R!=null&&p(t,["responseLogprobs"],R);const P=f(n,["responseMimeType"]);P!=null&&p(t,["responseMimeType"],P);const F=f(n,["responseModalities"]);F!=null&&p(t,["responseModalities"],F);const L=f(n,["responseSchema"]);L!=null&&p(t,["responseSchema"],L);const $=f(n,["routingConfig"]);$!=null&&p(t,["routingConfig"],$);const ne=f(n,["seed"]);ne!=null&&p(t,["seed"],ne);const Z=f(n,["speechConfig"]);Z!=null&&p(t,["speechConfig"],Z);const ae=f(n,["stopSequences"]);ae!=null&&p(t,["stopSequences"],ae);const X=f(n,["temperature"]);X!=null&&p(t,["temperature"],X);const de=f(n,["thinkingConfig"]);de!=null&&p(t,["thinkingConfig"],de);const M=f(n,["topK"]);M!=null&&p(t,["topK"],M);const x=f(n,["topP"]);if(x!=null&&p(t,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function wL(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function RL(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function bL(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&p(t,["enableWidget"],i),t}function NL(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(n,["timeRangeFilter"]);return i!=null&&p(t,["timeRangeFilter"],i),t}function xL(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const o=f(n,["imageSize"]);if(o!=null&&p(t,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function ML(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const o=f(n,["imageSize"]);o!=null&&p(t,["imageSize"],o);const a=f(n,["personGeneration"]);a!=null&&p(t,["personGeneration"],a);const u=f(n,["outputMimeType"]);u!=null&&p(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&p(t,["imageOutputOptions","compressionQuality"],d),t}function DL(n,e){const t={},i=f(n,["bytesBase64Encoded"]);i!=null&&p(t,["imageBytes"],Ar(i));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function rI(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["imageBytes"],Ar(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function Sd(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(n,["imageBytes"]);i!=null&&p(t,["bytesBase64Encoded"],Ar(i));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function hi(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const o=f(n,["imageBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Ar(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function PL(n,e,t,i){const o={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&p(t,["_url","models_url"],ZC(n,g)),o}function kL(n,e,t,i){const o={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&p(t,["_url","models_url"],ZC(n,g)),o}function VL(n,e,t){const i={},o=f(e,["config"]);return o!=null&&PL(n,o,i),i}function UL(n,e,t){const i={},o=f(e,["config"]);return o!=null&&kL(n,o,i),i}function LL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["_self"]);if(a!=null){let u=jC(a);Array.isArray(u)&&(u=u.map(d=>Cm(d))),p(t,["models"],u)}return t}function OL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["_self"]);if(a!=null){let u=jC(a);Array.isArray(u)&&(u=u.map(d=>Im(d))),p(t,["models"],u)}return t}function zL(n,e){const t={},i=f(n,["maskMode"]);i!=null&&p(t,["maskMode"],i);const o=f(n,["segmentationClasses"]);o!=null&&p(t,["maskClasses"],o);const a=f(n,["maskDilation"]);return a!=null&&p(t,["dilation"],a),t}function Cm(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const a=f(n,["description"]);a!=null&&p(t,["description"],a);const u=f(n,["version"]);u!=null&&p(t,["version"],u);const d=f(n,["_self"]);d!=null&&p(t,["tunedModelInfo"],tO(d));const g=f(n,["inputTokenLimit"]);g!=null&&p(t,["inputTokenLimit"],g);const h=f(n,["outputTokenLimit"]);h!=null&&p(t,["outputTokenLimit"],h);const v=f(n,["supportedGenerationMethods"]);v!=null&&p(t,["supportedActions"],v);const T=f(n,["temperature"]);T!=null&&p(t,["temperature"],T);const S=f(n,["maxTemperature"]);S!=null&&p(t,["maxTemperature"],S);const R=f(n,["topP"]);R!=null&&p(t,["topP"],R);const P=f(n,["topK"]);P!=null&&p(t,["topK"],P);const F=f(n,["thinking"]);return F!=null&&p(t,["thinking"],F),t}function Im(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const a=f(n,["description"]);a!=null&&p(t,["description"],a);const u=f(n,["versionId"]);u!=null&&p(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>ZU(R))),p(t,["endpoints"],S)}const g=f(n,["labels"]);g!=null&&p(t,["labels"],g);const h=f(n,["_self"]);h!=null&&p(t,["tunedModelInfo"],nO(h));const v=f(n,["defaultCheckpointId"]);v!=null&&p(t,["defaultCheckpointId"],v);const T=f(n,["checkpoints"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>R)),p(t,["checkpoints"],S)}return t}function FL(n,e){const t={},i=f(n,["mediaResolution"]);i!=null&&p(t,["mediaResolution"],i);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const a=f(n,["executableCode"]);a!=null&&p(t,["executableCode"],a);const u=f(n,["fileData"]);u!=null&&p(t,["fileData"],jU(u));const d=f(n,["functionCall"]);d!=null&&p(t,["functionCall"],eL(d));const g=f(n,["functionResponse"]);g!=null&&p(t,["functionResponse"],g);const h=f(n,["inlineData"]);h!=null&&p(t,["inlineData"],IU(h));const v=f(n,["text"]);v!=null&&p(t,["text"],v);const T=f(n,["thought"]);T!=null&&p(t,["thought"],T);const S=f(n,["thoughtSignature"]);S!=null&&p(t,["thoughtSignature"],S);const R=f(n,["videoMetadata"]);return R!=null&&p(t,["videoMetadata"],R),t}function qL(n,e){const t={},i=f(n,["productImage"]);return i!=null&&p(t,["image"],hi(i)),t}function BL(n,e,t){const i={},o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&p(e,["parameters","baseSteps"],a);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&p(e,["parameters","safetySetting"],g);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const v=f(n,["addWatermark"]);e!==void 0&&v!=null&&p(e,["parameters","addWatermark"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&p(e,["parameters","enhancePrompt"],R);const P=f(n,["labels"]);return e!==void 0&&P!=null&&p(e,["labels"],P),i}function GL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["source"]);a!=null&&KL(a,i);const u=f(e,["config"]);return u!=null&&BL(u,i),i}function HL(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Ed(a))),p(t,["generatedImages"],o)}return t}function KL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["personImage"]);e!==void 0&&a!=null&&p(e,["instances[0]","personImage","image"],hi(a));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>qL(g))),p(e,["instances[0]","productImages"],d)}return i}function JL(n,e){const t={},i=f(n,["referenceImage"]);i!=null&&p(t,["referenceImage"],hi(i));const o=f(n,["referenceId"]);o!=null&&p(t,["referenceId"],o);const a=f(n,["referenceType"]);a!=null&&p(t,["referenceType"],a);const u=f(n,["maskImageConfig"]);u!=null&&p(t,["maskImageConfig"],zL(u));const d=f(n,["controlImageConfig"]);d!=null&&p(t,["controlImageConfig"],DU(d));const g=f(n,["styleImageConfig"]);g!=null&&p(t,["styleImageConfig"],g);const h=f(n,["subjectImageConfig"]);return h!=null&&p(t,["subjectImageConfig"],h),t}function oI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const a=f(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function aI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const a=f(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function YL(n,e){const t={},i=f(n,["category"]);if(i!=null&&p(t,["category"],i),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(t,["threshold"],o),t}function $L(n,e){const t={},i=f(n,["image"]);return i!=null&&p(t,["image"],hi(i)),t}function QL(n,e,t){const i={},o=f(n,["mode"]);e!==void 0&&o!=null&&p(e,["parameters","mode"],o);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&p(e,["parameters","maxPredictions"],a);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&p(e,["parameters","maskDilation"],d);const g=f(n,["binaryColorThreshold"]);e!==void 0&&g!=null&&p(e,["parameters","binaryColorThreshold"],g);const h=f(n,["labels"]);return e!==void 0&&h!=null&&p(e,["labels"],h),i}function XL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["source"]);a!=null&&ZL(a,i);const u=f(e,["config"]);return u!=null&&QL(u,i),i}function WL(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>SL(a))),p(t,["generatedMasks"],o)}return t}function ZL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],hi(a));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],$L(u)),i}function jL(n,e){const t={},i=f(n,["retrievalConfig"]);i!=null&&p(t,["retrievalConfig"],i);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],tL(o)),t}function eO(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["computerUse"]);i!=null&&p(t,["computerUse"],i);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const a=f(n,["codeExecution"]);if(a!=null&&p(t,["codeExecution"],a),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>S)),p(t,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],bL(d));const g=f(n,["googleSearch"]);g!=null&&p(t,["googleSearch"],NL(g));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(t,["googleSearchRetrieval"],h);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function lI(n,e){const t={},i=f(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(n,["codeExecution"]);a!=null&&p(t,["codeExecution"],a);const u=f(n,["enterpriseWebSearch"]);u!=null&&p(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>nL(R))),p(t,["functionDeclarations"],S)}const g=f(n,["googleMaps"]);g!=null&&p(t,["googleMaps"],g);const h=f(n,["googleSearch"]);h!=null&&p(t,["googleSearch"],h);const v=f(n,["googleSearchRetrieval"]);v!=null&&p(t,["googleSearchRetrieval"],v);const T=f(n,["urlContext"]);return T!=null&&p(t,["urlContext"],T),t}function tO(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const a=f(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function nO(n,e){const t={},i=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const a=f(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function iO(n,e,t){const i={},o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function sO(n,e,t){const i={},o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function rO(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","name"],Qe(n,o));const a=f(e,["config"]);return a!=null&&iO(a,i),i}function oO(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["config"]);return a!=null&&sO(a,i),i}function aO(n,e,t){const i={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&p(e,["parameters","includeRaiReason"],d);const g=f(n,["outputMimeType"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","mimeType"],g);const h=f(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","compressionQuality"],h);const v=f(n,["enhanceInputImage"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],v);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const S=f(n,["labels"]);e!==void 0&&S!=null&&p(e,["labels"],S);const R=f(n,["numberOfImages"]);e!==void 0&&R!=null&&p(e,["parameters","sampleCount"],R);const P=f(n,["mode"]);return e!==void 0&&P!=null&&p(e,["parameters","mode"],P),i}function lO(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=f(e,["image"]);a!=null&&p(i,["instances[0]","image"],hi(a));const u=f(e,["upscaleFactor"]);u!=null&&p(i,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&aO(d,i),i}function uO(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Ed(u))),p(t,["generatedImages"],a)}return t}function cO(n,e){const t={},i=f(n,["uri"]);i!=null&&p(t,["uri"],i);const o=f(n,["encodedVideo"]);o!=null&&p(t,["videoBytes"],Ar(o));const a=f(n,["encoding"]);return a!=null&&p(t,["mimeType"],a),t}function fO(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["uri"],i);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["videoBytes"],Ar(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function dO(n,e){const t={},i=f(n,["image"]);i!=null&&p(t,["_self"],hi(i));const o=f(n,["maskMode"]);return o!=null&&p(t,["maskMode"],o),t}function hO(n,e){const t={},i=f(n,["image"]);i!=null&&p(t,["image"],Sd(i));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function pO(n,e){const t={},i=f(n,["image"]);i!=null&&p(t,["image"],hi(i));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function uI(n,e){const t={},i=f(n,["uri"]);i!=null&&p(t,["uri"],i);const o=f(n,["videoBytes"]);o!=null&&p(t,["encodedVideo"],Ar(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["encoding"],a),t}function cI(n,e){const t={},i=f(n,["uri"]);i!=null&&p(t,["gcsUri"],i);const o=f(n,["videoBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Ar(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mO(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function gO(n){const e={},t=f(n,["config"]);return t!=null&&mO(t,e),e}function yO(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function _O(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&yO(i,e),e}function vO(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function TO(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),t}function EO(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],AO(u)),e}function SO(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&p(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&TO(o,e),e}function AO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function CO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function IO(n){const e={},t=f(n,["config"]);return t!=null&&CO(t,e),e}function wO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function fI(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function RO(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&fI(i,e),e}function bO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NO="Content-Type",xO="X-Server-Timeout",MO="User-Agent",wm="x-goog-api-client",DO="1.39.0",PO=`google-genai-sdk/${DO}`,kO="v1beta1",VO="v1beta";class UO{constructor(e){var t,i,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:kO}else{if(!this.clientOptions.apiKey)throw new mu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:VO,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Tm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&LO(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await lS(o),new Em(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await lS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return fi(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield we(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(v,{stream:!0});try{const P=JSON.parse(T);if("error"in P){const F=JSON.parse(JSON.stringify(P.error)),L=F.status,$=F.code,ne=`got status: ${L}. ${JSON.stringify(P)}`;if($>=400&&$<600)throw new mu({message:ne,status:$})}}catch(P){if(P.name==="ApiError")throw P}u+=T;let S=-1,R=0;for(;;){S=-1,R=0;for(const L of g){const $=u.indexOf(L);$!==-1&&(S===-1||$<S)&&(S=$,R=L.length)}if(S===-1)break;const P=u.substring(0,S);u=u.substring(S+R);const F=P.trim();if(F.startsWith(d)){const L=F.substring(d.length).trim();try{const $=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield we(new Em($))}catch($){throw new Error(`exception parsing stream chunk ${L}. ${$}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=PO+" "+this.clientOptions.userAgentExtra;return e[MO]=t,e[wm]=t,e[NO]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(xO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const g={file:o},h=this.getFileName(e),v=fe("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,h,g,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),g=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&fI(i,T);const S=await this.fetchUploadUrl(h,d,g,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function lS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new mu({message:o,status:t}):new Error(o)}}function LO(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],v=d[g];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),d[g]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OO="mcp_used/unknown";let zO=!1;function dI(n){for(const e of n)if(FO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zO}function hI(n){var e;const t=(e=n[wm])!==null&&e!==void 0?e:"";n[wm]=(t+` ${OO}`).trimStart()}function FO(n){return n!==null&&typeof n=="object"&&n instanceof Dg}function qO(n){return fi(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield we(t.listTools({cursor:o}));for(const d of u.tools)yield yield we(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class Dg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Dg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,di(qO(v))),h;h=await g.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),gk(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function BO(n,e,t){const i=new lk;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class GO{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=JO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const v=new Promise(Z=>{h=Z}),T=e.callbacks,S=function(){h({})},R=this.apiClient,P={onopen:S,onmessage:Z=>{BO(R,T.onmessage,Z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(Z){}},F=this.webSocketFactory.create(g,KO(u),P);F.connect(),await v;const ne={setup:{model:Qe(this.apiClient,e.model)}};return F.send(JSON.stringify(ne)),new HO(F,this.apiClient)}}class HO{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=mU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=pU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ca.PLAY)}pause(){this.sendPlaybackControl(ca.PAUSE)}stop(){this.sendPlaybackControl(ca.STOP)}resetContext(){this.sendPlaybackControl(ca.RESET_CONTEXT)}close(){this.conn.close()}}function KO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function JO(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function $O(n,e,t){const i=new ak;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=_U(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class QO{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new GO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&dI(e.config.tools)&&hI(T);const S=jO(T);if(this.apiClient.isVertexAI()){const b=this.apiClient.getProject(),U=this.apiClient.getLocation(),V=this.apiClient.getApiKey(),q=!!b&&!!U||!!V;this.apiClient.getCustomBaseUrl()&&!q?v=g:(v=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const b=this.apiClient.getApiKey();let U="BidiGenerateContent",V="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",V="access_token"),v=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${U}?${V}=${b}`}let R=()=>{};const P=new Promise(b=>{R=b}),F=e.callbacks,L=function(){var b;(b=F==null?void 0:F.onopen)===null||b===void 0||b.call(F),R({})},$=this.apiClient,ne={onopen:L,onmessage:b=>{$O($,F.onmessage,b)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(b){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(b){}},Z=this.webSocketFactory.create(v,ZO(S),ne);Z.connect(),await P;let ae=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const b=this.apiClient.getProject(),U=this.apiClient.getLocation();b&&U&&(ae=`projects/${b}/locations/${U}/`+ae)}let X={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qf.AUDIO]}:e.config.responseModalities=[Qf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const de=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const b of de)if(this.isCallableTool(b)){const U=b;M.push(await U.tool())}else M.push(b);M.length>0&&(e.config.tools=M);const x={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=hU(this.apiClient,x):X=dU(this.apiClient,x),delete X.config,Z.send(JSON.stringify(X)),new WO(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const XO={turnComplete:!0};class WO{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=$n(t.turns),e.isVertexAI()||(i=i.map(o=>Td(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(YO)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},XO),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:yU(e)}:t={realtimeInput:gU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function ZO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function jO(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uS=10;function cS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ta(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ta(n){return"callTool"in n&&typeof n.callTool=="function"}function e4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ta(o)))!==null&&i!==void 0?i:!1}function fS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ta(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function dS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t4 extends Ss{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!e4(t)||cS(t.config))return await this.generateContentInternal(g);const h=fS(t);if(h.length>0){const F=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let v,T;const S=$n(g.contents),R=(a=(o=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:uS;let P=0;for(;P<R&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const F=v.candidates[0].content,L=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ta($)){const Z=await $.callTool(v.functionCalls);L.push(...Z)}P++,T={role:"user",parts:L},g.contents=$n(g.contents),g.contents.push(F),g.contents.push(T),dS(g.config)&&(S.push(F),S.push(T))}return dS(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),cS(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=fS(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((o=g==null?void 0:g.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:u.push(g);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ho(Ts.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async g=>Ta(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&dI(e.config.tools)){const g=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),hI(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ta(u)){const d=u,g=await d.tool();for(const h of(o=g.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:uS;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(h,v,T){return fi(this,arguments,function*(){for(var S,R,P,F,L,$;d<a;){u&&(d++,u=!1);const X=yield we(h.processParamsMaybeAddMcpUsage(T)),de=yield we(h.generateContentStreamInternal(X)),M=[],x=[];try{for(var ne=!0,Z=(R=void 0,di(de)),ae;ae=yield we(Z.next()),S=ae.done,!S;ne=!0){F=ae.value,ne=!1;const b=F;if(yield yield we(b),b.candidates&&(!((L=b.candidates[0])===null||L===void 0)&&L.content)){x.push(b.candidates[0].content);for(const U of($=b.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<a&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const V=yield we(v.get(U.functionCall.name).callTool([U.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(b){R={error:b}}finally{try{!ne&&!S&&(P=Z.return)&&(yield we(P.call(Z)))}finally{if(R)throw R.error}}if(M.length>0){u=!0;const b=new Yl;b.candidates=[{content:{role:"user",parts:M}}],yield yield we(b);const U=[];U.push(...x),U.push({role:"user",parts:M});const V=$n(T.contents).concat(U);T.contents=V}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=rS(this.apiClient,e);return d=fe("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=aS(v),S=new Yl;return Object.assign(S,T),S})}else{const h=sS(this.apiClient,e);return d=fe("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=oS(v),S=new Yl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=rS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return fi(this,arguments,function*(){var S,R,P,F;try{for(var L=!0,$=di(T),ne;ne=yield we($.next()),S=ne.done,!S;L=!0){F=ne.value,L=!1;const Z=F,ae=aS(yield we(Z.json()),e);ae.sdkHttpResponse={headers:Z.headers};const X=new Yl;Object.assign(X,ae),yield yield we(X)}}catch(Z){R={error:Z}}finally{try{!L&&!S&&(P=$.return)&&(yield we(P.call($)))}finally{if(R)throw R.error}}})})}else{const h=sS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return fi(this,arguments,function*(){var S,R,P,F;try{for(var L=!0,$=di(T),ne;ne=yield we($.next()),S=ne.done,!S;L=!0){F=ne.value,L=!1;const Z=F,ae=oS(yield we(Z.json()),e);ae.sdkHttpResponse={headers:Z.headers};const X=new Yl;Object.assign(X,ae),yield yield we(X)}}catch(Z){R={error:Z}}finally{try{!L&&!S&&(P=$.return)&&(yield we(P.call($)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=QU(this.apiClient,e);return d=fe("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=WU(v),S=new q0;return Object.assign(S,T),S})}else{const h=$U(this.apiClient,e);return d=fe("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=XU(v),S=new q0;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=lL(this.apiClient,e);return d=fe("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=cL(v),S=new B0;return Object.assign(S,T),S})}else{const h=aL(this.apiClient,e);return d=fe("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=uL(v),S=new B0;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=HU(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=KU(g),v=new Q2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=lO(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=uO(g),v=new X2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=GL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=HL(g),v=new W2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=XL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=WL(g),v=new Z2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=RL(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}else{const h=wL(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}}async listInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=UL(this.apiClient,e);return d=fe("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=OL(v),S=new G0;return Object.assign(S,T),S})}else{const h=VL(this.apiClient,e);return d=fe("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=LL(v),S=new G0;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=oO(this.apiClient,e);return d=fe("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}else{const h=rO(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}}async delete(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=FU(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=BU(v),S=new H0;return Object.assign(S,T),S})}else{const h=zU(this.apiClient,e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=qU(v),S=new H0;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=UU(this.apiClient,e);return d=fe("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=OU(v),S=new K0;return Object.assign(S,T),S})}else{const h=VU(this.apiClient,e);return d=fe("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=LU(v),S=new K0;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=bU(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=NU(g),v=new j2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=gL(this.apiClient,e);return d=fe("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=pL(v),S=new Xf;return Object.assign(S,T),S})}else{const h=mL(this.apiClient,e);return d=fe("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=hL(v),S=new Xf;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n4 extends Ss{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=G2(e);return d=fe("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=B2(e);return d=fe("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=V2(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i4(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function s4(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>h4(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function r4(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],d4(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),i}function o4(n,e){const t={},i=f(e,["config"]);return i!=null&&p(t,["config"],r4(n,i,t)),t}function a4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function l4(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function u4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function c4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function f4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Mg(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],s4(rn(P)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let de=La(F);Array.isArray(de)&&(de=de.map(M=>m4(Ua(M)))),p(e,["setup","tools"],de)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&p(e,["setup","sessionResumption"],p4(L));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&p(e,["setup","contextWindowCompression"],ae);const X=f(n,["proactivity"]);if(e!==void 0&&X!=null&&p(e,["setup","proactivity"],X),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function d4(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],f4(o,t)),t}function h4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],a4(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],l4(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],i4(g));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function p4(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function m4(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],u4(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],c4(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function y4(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=g4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];a&&g.push(a),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class _4 extends Ss{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=o4(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=y4(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v4(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function T4(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&v4(i,e),e}function E4(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function S4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function A4(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&S4(i,e),e}function C4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I4 extends Ss{constructor(e){super(),this.apiClient=e,this.list=async t=>new ho(Ts.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=E4(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=T4(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=A4(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=C4(g),v=new ek;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w4 extends Ss{constructor(e,t=new I4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new ho(Ts.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gO(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vO(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_O(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IO(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=wO(g),v=new tk;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RO(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=bO(g),v=new nk;return Object.assign(v,h),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SO(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=EO(g),v=new wg;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return pI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const R4=()=>pI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const bm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qn extends Error{}class dn extends Qn{constructor(e,t,i,o){super(`${dn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Ad({message:i,cause:bm(t)});const a=t;return e===400?new gI(e,a,i,o):e===401?new yI(e,a,i,o):e===403?new _I(e,a,i,o):e===404?new vI(e,a,i,o):e===409?new TI(e,a,i,o):e===422?new EI(e,a,i,o):e===429?new SI(e,a,i,o):e>=500?new AI(e,a,i,o):new dn(e,a,i,o)}}class Nm extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ad extends dn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class mI extends Ad{constructor({message:e}={}){super({message:e??"Request timed out."})}}class gI extends dn{}class yI extends dn{}class _I extends dn{}class vI extends dn{}class TI extends dn{}class EI extends dn{}class SI extends dn{}class AI extends dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const b4=/^[a-z][a-z0-9+.-]*:/i,N4=n=>b4.test(n);let xm=n=>(xm=Array.isArray,xm(n));const x4=xm;let M4=x4;const hS=M4;function D4(n){if(!n)return!0;for(const e in n)return!1;return!0}function P4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const k4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Qn(`${n} must be an integer`);if(e<0)throw new Qn(`${n} must be a positive integer`);return e},V4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const la="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const O4=()=>{var n,e,t,i,o;const a=L4();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":mS(Deno.build.os),"X-Stainless-Arch":pS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":mS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":pS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=z4();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function z4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const pS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",mS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let df;const F4=()=>df??(df=O4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function CI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function B4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return CI({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function II(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function G4(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H4=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wI=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Kp(n,e,t){return wI(),new File(n,e??"unknown_file",t)}function K4(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const J4=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RI=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Y4=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&RI(n),$4=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Q4(n,e,t){if(wI(),n=await n,Y4(n))return n instanceof File?n:Kp([await n.arrayBuffer()],n.name);if($4(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Kp(await Mm(o),e,t)}const i=await Mm(n);if(e||(e=K4(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return Kp(i,e,t)}async function Mm(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(RI(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(J4(n))try{for(var d=!0,g=di(n),h;h=await g.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const v=o;u.push(...await Mm(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${X4(n)}`)}return u}function X4(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bI{constructor(e){this._client=e}}bI._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NI(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const gS=Object.freeze(Object.create(null)),W4=(n=NI)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((v,T,S)=>{var R,P,F;/[?#]/.test(T)&&(o=!0);const L=i[S];let $=(o?encodeURIComponent:n)(""+L);return S!==i.length&&(L==null||typeof L=="object"&&L.toString===((F=Object.getPrototypeOf((P=Object.getPrototypeOf((R=L.hasOwnProperty)!==null&&R!==void 0?R:gS))!==null&&P!==void 0?P:gS))===null||F===void 0?void 0:F.toString))&&($=L+"",a.push({start:v.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),v+T+(S===i.length?"":$)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((v,T)=>v.start-T.start),a.length>0){let v=0;const T=a.reduce((S,R)=>{const P=" ".repeat(R.start-v),F="^".repeat(R.length);return v=R.start+R.length,S+P+F},"");throw new Qn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),hf=W4(NI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xI extends bI{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=Zf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Qn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Qn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(hf`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(hf`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(hf`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Zf(a,["api_version"]);return this._client.get(hf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}xI._key=Object.freeze(["interactions"]);class MI extends xI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z4(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let pf;function Pg(n){let e;return(pf??(e=new globalThis.TextEncoder,pf=e.encode.bind(e)))(n)}let mf;function yS(n){let e;return(mf??(e=new globalThis.TextDecoder,mf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Pg(e):e;this.buffer=Z4([this.buffer,t]);const i=[];let o;for(;(o=j4(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(yS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=yS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Cd.NEWLINE_CHARS=new Set([`
`,"\r"]);Cd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function j4(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function e3(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jf={off:0,error:200,warn:300,info:400,debug:500},_S=(n,e,t)=>{if(n){if(P4(jf,n))return n;fn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(jf))}`)}};function jl(){}function gf(n,e,t){return!e||jf[n]>jf[t]?jl:e[n].bind(e)}const t3={error:jl,warn:jl,info:jl,debug:jl};let vS=new WeakMap;function fn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return t3;const o=vS.get(t);if(o&&o[0]===i)return o[1];const a={error:gf("error",t,i),warn:gf("warn",t,i),info:gf("info",t,i),debug:gf("debug",t,i)};return vS.set(t,[i,a]),a}const no=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?fn(i):console;function u(){return fi(this,arguments,function*(){var g,h,v,T;if(o)throw new Qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var R=!0,P=di(n3(e,t)),F;F=yield we(P.next()),g=F.done,!g;R=!0){T=F.value,R=!1;const L=T;if(!S)if(L.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield we(JSON.parse(L.data))}catch($){throw a.error("Could not parse message into JSON:",L.data),a.error("From chunk:",L.raw),$}}}catch(L){h={error:L}}finally{try{!R&&!g&&(v=P.return)&&(yield we(v.call(P)))}finally{if(h)throw h.error}}S=!0}catch(L){if(Rm(L))return yield we(void 0);throw L}finally{S||t.abort()}})}return new fa(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return fi(this,arguments,function*(){var g,h,v,T;const S=new Cd,R=II(e);try{for(var P=!0,F=di(R),L;L=yield we(F.next()),g=L.done,!g;P=!0){T=L.value,P=!1;const $=T;for(const ne of S.decode($))yield yield we(ne)}}catch($){h={error:$}}finally{try{!P&&!g&&(v=F.return)&&(yield we(v.call(F)))}finally{if(h)throw h.error}}for(const $ of S.flush())yield yield we($)})}function u(){return fi(this,arguments,function*(){var g,h,v,T;if(o)throw new Qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var R=!0,P=di(a()),F;F=yield we(P.next()),g=F.done,!g;R=!0){T=F.value,R=!1;const L=T;S||L&&(yield yield we(JSON.parse(L)))}}catch(L){h={error:L}}finally{try{!R&&!g&&(v=P.return)&&(yield we(v.call(P)))}finally{if(h)throw h.error}}S=!0}catch(L){if(Rm(L))return yield we(void 0);throw L}finally{S||t.abort()}})}return new fa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new fa(()=>o(e),this.controller,this.client),new fa(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return CI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=Pg(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function n3(n,e){return fi(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Qn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Qn("Attempted to iterate over a response with no body");const d=new s3,g=new Cd,h=II(n.body);try{for(var v=!0,T=di(i3(h)),S;S=yield we(T.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const R=u;for(const P of g.decode(R)){const F=d.decode(P);F&&(yield yield we(F))}}}catch(R){o={error:R}}finally{try{!v&&!i&&(a=T.return)&&(yield we(a.call(T)))}finally{if(o)throw o.error}}for(const R of g.flush()){const P=d.decode(R);P&&(yield yield we(P))}})}function i3(n){return fi(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,g=di(n),h;h=yield we(g.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const v=a;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Pg(v):v;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let R;for(;(R=e3(u))!==-1;)yield yield we(u.slice(0,R)),u=u.slice(R)}}catch(v){i={error:v}}finally{try{!d&&!t&&(o=g.return)&&(yield we(o.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield we(u))})}class s3{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=r3(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function r3(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function o3(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return fn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):fa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),h=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return fn(n).debug(`[${i}] response parsed`,no({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kg extends Promise{constructor(e,t,i=o3){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new kg(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DI=Symbol("brand.privateNullableHeaders");function*a3(n){if(!n)return;if(DI in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():hS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=hS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const $l=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of a3(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[DI]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jp=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=N2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PI;class Id{constructor(e){var t,i,o,a,u,d,g,{baseURL:h=Jp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Jp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Zf(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(i=R.timeout)!==null&&i!==void 0?i:Id.DEFAULT_TIMEOUT,this.logger=(o=R.logger)!==null&&o!==void 0?o:console;const P="warn";this.logLevel=P,this.logLevel=(u=(a=_S(R.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:_S(Jp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=R.fetch)!==null&&g!==void 0?g:q4(),this.encoder=H4,this._options=R,this.apiKey=v,this.apiVersion=T,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=$l([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return $l([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return $l([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Qn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${la}`}defaultIdempotencyKey(){return`stainless-node-retry-${R4()}`}makeStatusError(e,t,i,o){return dn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=N4(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return D4(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new kg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,g=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:h,url:v,timeout:T}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(h,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(fn(this).debug(`[${S}] sending request`,no({retryOfRequestLogID:i,method:d.method,url:v,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Nm;const F=new AbortController,L=await this.fetchWithTimeout(v,h,T,F).catch(bm),$=Date.now();if(L instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Nm;const ae=Rm(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(t)return fn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - ${Z}`),fn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (${Z})`,no({retryOfRequestLogID:i,url:v,durationMs:$-P,message:L.message})),this.retryRequest(d,t,i??S);throw fn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - error; no more retries left`),fn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (error; no more retries left)`,no({retryOfRequestLogID:i,url:v,durationMs:$-P,message:L.message})),ae?new mI:new Ad({cause:L})}const ne=`[${S}${R}] ${h.method} ${v} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${$-P}ms`;if(!L.ok){const Z=await this.shouldRetry(L);if(t&&Z){const b=`retrying, ${t} attempts remaining`;return await G4(L.body),fn(this).info(`${ne} - ${b}`),fn(this).debug(`[${S}] response error (${b})`,no({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:$-P})),this.retryRequest(d,t,i??S,L.headers)}const ae=Z?"error; no more retries left":"error; not retryable";fn(this).info(`${ne} - ${ae}`);const X=await L.text().catch(b=>bm(b).message),de=V4(X),M=de?void 0:X;throw fn(this).debug(`[${S}] response error (${ae})`,no({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,message:M,durationMs:Date.now()-P})),this.makeStatusError(L.status,de,M,L.headers)}return fn(this).info(ne),fn(this).debug(`[${S}] response start`,no({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:$-P})),{response:L,options:d,controller:F,requestLogID:S,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,g=Zf(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:o.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const g=o==null?void 0:o.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await U4(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:g,query:h,defaultBaseURL:v}=u,T=this.buildURL(g,h,v);"timeout"in u&&k4("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=$l([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),F4()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=$l([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:B4(e)}:this.encoder({body:e,headers:i})}}Id.DEFAULT_TIMEOUT=6e4;class Ht extends Id{constructor(){super(...arguments),this.interactions=new MI(this)}}PI=Ht;Ht.GeminiNextGenAPIClient=PI;Ht.GeminiNextGenAPIClientError=Qn;Ht.APIError=dn;Ht.APIConnectionError=Ad;Ht.APIConnectionTimeoutError=mI;Ht.APIUserAbortError=Nm;Ht.NotFoundError=vI;Ht.ConflictError=TI;Ht.RateLimitError=SI;Ht.BadRequestError=gI;Ht.AuthenticationError=yI;Ht.InternalServerError=AI;Ht.PermissionDeniedError=_I;Ht.UnprocessableEntityError=EI;Ht.toFile=Q4;Ht.Interactions=MI;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function u3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function c3(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function f3(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function d3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function h3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const X=f(n,["validationDataset"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec"],Yp(X))}else if(o==="PREFERENCE_TUNING"){const X=f(n,["validationDataset"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec"],Yp(X))}else if(o==="DISTILLATION"){const X=f(n,["validationDataset"]);e!==void 0&&X!=null&&p(e,["distillationSpec"],Yp(X))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const X=f(n,["epochCount"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],X)}else if(d==="PREFERENCE_TUNING"){const X=f(n,["epochCount"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],X)}else if(d==="DISTILLATION"){const X=f(n,["epochCount"]);e!==void 0&&X!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],X)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const X=f(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],X)}else if(g==="PREFERENCE_TUNING"){const X=f(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],X)}else if(g==="DISTILLATION"){const X=f(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],X)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const X=f(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],X)}else if(h==="PREFERENCE_TUNING"){const X=f(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],X)}else if(h==="DISTILLATION"){const X=f(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],X)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const X=f(n,["adapterSize"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],X)}else if(v==="PREFERENCE_TUNING"){const X=f(n,["adapterSize"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],X)}else if(v==="DISTILLATION"){const X=f(n,["adapterSize"]);e!==void 0&&X!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],X)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const X=f(n,["tuningMode"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","tuningMode"],X)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&p(e,["customBaseModel"],S);let R=f(t,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const X=f(n,["batchSize"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],X)}let P=f(t,["config","method"]);if(P===void 0&&(P="SUPERVISED_FINE_TUNING"),P==="SUPERVISED_FINE_TUNING"){const X=f(n,["learningRate"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],X)}const F=f(n,["labels"]);e!==void 0&&F!=null&&p(e,["labels"],F);const L=f(n,["beta"]);e!==void 0&&L!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],L);const $=f(n,["baseTeacherModel"]);e!==void 0&&$!=null&&p(e,["distillationSpec","baseTeacherModel"],$);const ne=f(n,["tunedTeacherModelSource"]);e!==void 0&&ne!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],ne);const Z=f(n,["sftLossWeightMultiplier"]);e!==void 0&&Z!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],Z);const ae=f(n,["outputUri"]);return e!==void 0&&ae!=null&&p(e,["outputUri"],ae),i}function p3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&I3(a);const u=f(n,["config"]);return u!=null&&d3(u,t),t}function m3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&w3(a,t,e);const u=f(n,["config"]);return u!=null&&h3(u,t,e),t}function g3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function y3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function _3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function v3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function T3(n,e){const t={},i=f(n,["config"]);return i!=null&&_3(i,t),t}function E3(n,e){const t={},i=f(n,["config"]);return i!=null&&v3(i,t),t}function S3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>kI(d))),p(t,["tuningJobs"],u)}return t}function A3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Dm(d))),p(t,["tuningJobs"],u)}return t}function C3(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["model"],i);const o=f(n,["name"]);return o!=null&&p(t,["endpoint"],o),t}function I3(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["examples","examples"],o)}return t}function w3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(o==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function kI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],XC(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=f(n,["description"]);v!=null&&p(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&p(t,["tunedModel"],C3(S)),t}function Dm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],XC(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&p(t,["endTime"],g);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=f(n,["error"]);v!=null&&p(t,["error"],v);const T=f(n,["description"]);T!=null&&p(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&p(t,["tunedModel"],R);const P=f(n,["preTunedModel"]);P!=null&&p(t,["preTunedModel"],P);const F=f(n,["supervisedTuningSpec"]);F!=null&&p(t,["supervisedTuningSpec"],F);const L=f(n,["preferenceOptimizationSpec"]);L!=null&&p(t,["preferenceOptimizationSpec"],L);const $=f(n,["distillationSpec"]);$!=null&&p(t,["distillationSpec"],$);const ne=f(n,["tuningDataStats"]);ne!=null&&p(t,["tuningDataStats"],ne);const Z=f(n,["encryptionSpec"]);Z!=null&&p(t,["encryptionSpec"],Z);const ae=f(n,["partnerModelTuningSpec"]);ae!=null&&p(t,["partnerModelTuningSpec"],ae);const X=f(n,["customBaseModel"]);X!=null&&p(t,["customBaseModel"],X);const de=f(n,["experiment"]);de!=null&&p(t,["experiment"],de);const M=f(n,["labels"]);M!=null&&p(t,["labels"],M);const x=f(n,["outputUri"]);x!=null&&p(t,["outputUri"],x);const b=f(n,["pipelineJob"]);b!=null&&p(t,["pipelineJob"],b);const U=f(n,["serviceAccount"]);U!=null&&p(t,["serviceAccount"],U);const V=f(n,["tunedModelDisplayName"]);V!=null&&p(t,["tunedModelDisplayName"],V);const q=f(n,["veoTuningSpec"]);return q!=null&&p(t,["veoTuningSpec"],q),t}function R3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(n,["done"]);u!=null&&p(t,["done"],u);const d=f(n,["error"]);return d!=null&&p(t,["error"],d),t}function Yp(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&p(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b3 extends Ss{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(Ts.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:vm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=y3(e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Dm(v))}else{const h=g3(e);return d=fe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>kI(v))}}async listInternal(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=E3(e);return d=fe("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=A3(v),S=new J0;return Object.assign(S,T),S})}else{const h=T3(e);return d=fe("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=S3(v),S=new J0;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=u3(e);return d=fe("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=f3(v),S=new Y0;return Object.assign(S,T),S})}else{const h=l3(e);return d=fe("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=c3(v),S=new Y0;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=m3(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>Dm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=p3(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>R3(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const x3=1024*1024*8,M3=3,D3=1e3,P3=2,ed="x-goog-upload-status";async function k3(n,e,t){var i;const o=await VI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[ed])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function V3(n,e,t){var i;const o=await VI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[ed])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=HC(a),d=new Rg;return Object.assign(d,u),d}async function VI(n,e,t){var i,o;let a=0,u=0,d=new Em(new Response),g="upload";for(a=n.size;u<a;){const h=Math.min(x3,a-u),v=n.slice(u,u+h);u+h>=a&&(g+=", finalize");let T=0,S=D3;for(;T<M3&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[ed]));)T++,await L3(S),S=S*P3;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[ed])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function U3(n){return{size:n.size,type:n.type}}function L3(n){return new Promise(e=>setTimeout(e,n))}class O3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k3(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await V3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await U3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z3{create(e,t,i){return new F3(e,t,i)}}class F3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TS="x-goog-api-key";class q3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(TS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(TS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B3="gl-node/";class UI{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=P2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new q3(this.apiKey);this.apiClient=new UO({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:B3+"web",uploader:new O3,downloader:new N3}),this.models=new t4(this.apiClient),this.live=new QO(this.apiClient,o,new z3),this.batches=new uV(this.apiClient),this.chats=new HV(this.models,this.apiClient),this.caches=new qV(this.apiClient),this.files=new nU(this.apiClient),this.operations=new n4(this.apiClient),this.authTokens=new _4(this.apiClient),this.tunings=new b3(this.apiClient),this.fileSearchStores=new w4(this.apiClient)}}const G3=async n=>{const e="PLACEHOLDER_API_KEY",t=new UI({apiKey:e});try{const i=await t.models.generateContent({model:"gemini-3-pro-preview",contents:`Create a single gaming product based on this description: "${n}". 
                 Return JSON with: name (string), price (number, typical gaming price in PLN), 
                 description (string, max 100 chars), category (string, e.g. Klawiatury, Myszki), 
                 icon (string, single emoji). Language: Polish.`,config:{responseMimeType:"application/json",responseSchema:{type:En.OBJECT,properties:{name:{type:En.STRING},price:{type:En.NUMBER},description:{type:En.STRING},category:{type:En.STRING},icon:{type:En.STRING}}}}});return i.text?JSON.parse(i.text):null}catch(i){return console.error("AI Metadata Error:",i),null}},H3=async n=>{var i,o,a;const e="PLACEHOLDER_API_KEY",t=new UI({apiKey:e});try{const u=await t.models.generateContent({model:"gemini-3-pro-image-preview",contents:{parts:[{text:`Professional product photography of ${n}, studio lighting, dark background, neon accents, high quality, 4k, centralized composition.`}]},config:{imageConfig:{aspectRatio:"1:1",imageSize:"1K"}}});for(const d of((a=(o=(i=u.candidates)==null?void 0:i[0])==null?void 0:o.content)==null?void 0:a.parts)||[])if(d.inlineData)return`data:image/png;base64,${d.inlineData.data}`;return null}catch(u){return console.error("AI Image Error:",u),null}},K3=({isOpen:n,onClose:e,data:t,products:i,onSaveData:o,onSaveProduct:a,onDeleteProduct:u})=>{const[d,g]=Fe.useState("content"),[h,v]=Fe.useState(t),[T,S]=Fe.useState({}),[R,P]=Fe.useState(!1),[F,L]=Fe.useState(""),[$,ne]=Fe.useState(!1);Fe.useEffect(()=>{v(t)},[t]);const Z=b=>{const{name:U,value:V}=b.target;v(q=>({...q,[U]:V}))},ae=b=>{b.preventDefault(),o(h)},X=b=>{b.preventDefault(),T.name&&T.price!==void 0&&!isNaN(T.price)?(a(T),P(!1),S({})):alert("Prosz poda nazw i poprawn cen produktu.")},de=b=>{S(b),P(!0)},M=()=>{S({name:"",price:0,description:"",category:"Inne",icon:"",image:""}),P(!0)},x=async()=>{if(F.trim()){if(window.aistudio)try{await window.aistudio.hasSelectedApiKey()||await window.aistudio.openSelectKey()}catch(b){console.error("AI Studio Key Error",b)}ne(!0);try{const b=await G3(F);if(!b)throw new Error("Nie udao si wygenerowa danych.");const U=await H3(F+", "+b.name);S({name:b.name,price:b.price,description:b.description,category:b.category,icon:b.icon,image:U||"https://placehold.co/400x400?text=AI+Error"}),P(!0),L("")}catch(b){console.error(b),alert("Bd generowania AI. Sprawd klucz API.")}finally{ne(!1)}}};return w.jsxs("div",{className:`fixed inset-y-0 right-0 w-96 bg-ch-bg-medium z-[100] shadow-2xl flex flex-col border-l-4 border-ch-primary transform transition-transform duration-300 ${n?"translate-x-0":"translate-x-full"}`,children:[w.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-700",children:[w.jsx("h3",{className:"text-2xl font-heading text-ch-primary",children:" CMS Panel"}),w.jsx("button",{onClick:e,className:"text-ch-primary hover:text-white transition duration-200",children:w.jsx(bu,{size:24})})]}),w.jsxs("div",{className:"flex border-b border-gray-700",children:[w.jsx("button",{onClick:()=>g("content"),className:`flex-1 py-3 font-bold transition-colors ${d==="content"?"bg-ch-primary text-ch-bg-dark":"text-ch-gray hover:text-white"}`,children:"Tre Strony"}),w.jsxs("button",{onClick:()=>g("products"),className:`flex-1 py-3 font-bold transition-colors ${d==="products"?"bg-ch-primary text-ch-bg-dark":"text-ch-gray hover:text-white"}`,children:["Produkty (",i.length,")"]})]}),w.jsx("div",{className:"flex-grow overflow-y-auto p-6 custom-scrollbar",children:d==="content"?w.jsxs("form",{onSubmit:ae,className:"space-y-4 pb-12",children:[w.jsx("h4",{className:"text-xl font-heading text-ch-tertiary border-b border-gray-700 pb-2",children:"Sekcja HERO"}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"Tytu Gwny"}),w.jsx("input",{type:"text",name:"heroTitle",value:h.heroTitle||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm focus:border-ch-primary outline-none"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"Podtytu"}),w.jsx("input",{type:"text",name:"heroSubtitle",value:h.heroSubtitle||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm focus:border-ch-primary outline-none"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"Opis"}),w.jsx("textarea",{rows:3,name:"heroDescription",value:h.heroDescription||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm focus:border-ch-primary outline-none"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"URL Obrazu Ta Hero"}),w.jsx("input",{type:"text",name:"heroBgUrl",value:h.heroBgUrl||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm focus:border-ch-primary outline-none"})]}),w.jsx("h4",{className:"text-xl font-heading text-ch-tertiary border-b border-gray-700 pb-2 pt-4",children:"Inne Sekcje"}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"Tytu Produktw"}),w.jsx("input",{type:"text",name:"productsTitle",value:h.productsTitle||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"Tytu Customizacji"}),w.jsx("input",{type:"text",name:"customTitle",value:h.customTitle||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"To Customizacji (URL)"}),w.jsx("input",{type:"text",name:"customBgUrl",value:h.customBgUrl||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"Tytu 'O Nas'"}),w.jsx("input",{type:"text",name:"aboutTitle",value:h.aboutTitle||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"To 'O Nas' (URL)"}),w.jsx("input",{type:"text",name:"aboutBgUrl",value:h.aboutBgUrl||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"Tytu Kontaktu"}),w.jsx("input",{type:"text",name:"contactTitle",value:h.contactTitle||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm"})]}),w.jsxs("label",{className:"block",children:[w.jsx("span",{className:"text-ch-gray text-sm",children:"To Kontaktu (URL)"}),w.jsx("input",{type:"text",name:"contactBgUrl",value:h.contactBgUrl||"",onChange:Z,className:"w-full p-2 rounded bg-[#181818] border border-gray-700 mt-1 text-sm"})]}),w.jsxs("button",{type:"submit",className:"w-full bg-ch-secondary text-ch-bg-dark py-3 rounded-lg font-bold hover:bg-[#59b2cc] transition duration-300 shadow-xl flex items-center justify-center gap-2 mt-4",children:[w.jsx(f2,{size:18})," ZAPISZ WSZYSTKIE ZMIANY"]})]}):w.jsx("div",{className:"space-y-4 pb-12",children:R?w.jsxs("form",{onSubmit:X,className:"space-y-3 animate-fade-in bg-[#181818] p-4 rounded-lg border border-ch-primary",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("h4",{className:"font-bold text-ch-primary",children:T.id?"Edytuj Produkt":"Nowy Produkt"}),w.jsx("button",{type:"button",onClick:()=>P(!1),className:"text-gray-500 hover:text-white",children:"Anuluj"})]}),T.image&&w.jsxs("div",{className:"mb-2 text-center",children:[w.jsx("img",{src:T.image,alt:"Preview",className:"h-32 w-full object-cover rounded border border-gray-700"}),w.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Podgld zdjcia"})]}),w.jsx("input",{type:"text",placeholder:"Nazwa",required:!0,value:T.name||"",onChange:b=>S({...T,name:b.target.value}),className:"w-full p-2 rounded bg-ch-bg-dark border border-gray-600 text-sm"}),w.jsx("input",{type:"number",step:"0.01",placeholder:"Cena (z)",required:!0,value:T.price,onChange:b=>S({...T,price:parseFloat(b.target.value)}),className:"w-full p-2 rounded bg-ch-bg-dark border border-gray-600 text-sm"}),w.jsx("input",{type:"text",placeholder:"Kategoria (np. Myszki)",required:!0,value:T.category||"",onChange:b=>S({...T,category:b.target.value}),className:"w-full p-2 rounded bg-ch-bg-dark border border-gray-600 text-sm"}),w.jsx("input",{type:"text",placeholder:"Ikona (Emoji)",value:T.icon||"",onChange:b=>S({...T,icon:b.target.value}),className:"w-full p-2 rounded bg-ch-bg-dark border border-gray-600 text-sm"}),w.jsx("input",{type:"text",placeholder:"URL Obrazka",required:!0,value:T.image||"",onChange:b=>S({...T,image:b.target.value}),className:"w-full p-2 rounded bg-ch-bg-dark border border-gray-600 text-sm"}),w.jsx("textarea",{placeholder:"Opis produktu",rows:3,value:T.description||"",onChange:b=>S({...T,description:b.target.value}),className:"w-full p-2 rounded bg-ch-bg-dark border border-gray-600 text-sm"}),w.jsx("button",{type:"submit",className:"w-full bg-ch-primary text-ch-bg-dark py-2 rounded font-bold hover:bg-[#d900e3]",children:"ZAPISZ PRODUKT"})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"bg-[#101010] p-4 rounded-lg border border-ch-primary/50 mb-6 relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:w.jsx(Hp,{size:100})}),w.jsxs("h4",{className:"text-ch-primary font-heading mb-2 flex items-center gap-2",children:[w.jsx(Hp,{size:18})," AI Generator Produktw"]}),w.jsx("p",{className:"text-xs text-ch-gray mb-3",children:"Wpisz co chcesz doda, a AI stworzy opis i zdjcie (Nano Banana Pro)."}),w.jsx("textarea",{value:F,onChange:b=>L(b.target.value),placeholder:"np. Futurystyczna podkadka pod mysz z podwietleniem RGB...",className:"w-full bg-[#181818] border border-gray-700 rounded p-2 text-sm text-white mb-2 focus:border-ch-primary outline-none",rows:2}),w.jsx("button",{onClick:x,disabled:$||!F,className:`w-full py-2 rounded font-bold text-sm flex items-center justify-center gap-2 transition ${$?"bg-gray-700 cursor-wait":"bg-gradient-to-r from-ch-primary to-purple-600 text-white hover:opacity-90"}`,children:$?w.jsxs(w.Fragment,{children:[w.jsx(Ag,{className:"animate-spin",size:16})," Generowanie..."]}):w.jsxs(w.Fragment,{children:[w.jsx(Hp,{size:16})," Generuj Produkt"]})})]}),w.jsxs("button",{onClick:M,className:"w-full bg-[#202020] text-ch-gray hover:text-white border border-gray-700 py-3 rounded-lg font-bold hover:bg-[#2a2a2a] transition duration-300 flex items-center justify-center gap-2 mb-4",children:[w.jsx(Cg,{size:18})," Rczne dodawanie"]}),w.jsx("div",{className:"space-y-3",children:i.map(b=>w.jsxs("div",{className:"bg-[#181818] p-3 rounded-lg flex items-center justify-between border border-gray-700",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("img",{src:b.image,className:"w-10 h-10 rounded object-cover",alt:""}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold text-sm text-white truncate w-32",children:b.name}),w.jsxs("p",{className:"text-xs text-ch-gray",children:[b.price.toFixed(2)," z"]})]})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>de(b),className:"text-ch-secondary hover:text-white p-1",children:w.jsx(l2,{size:16})}),w.jsx("button",{onClick:()=>u(b.id),className:"text-red-500 hover:text-white p-1",children:w.jsx(GC,{size:16})})]})]},b.id))})]})})})]})},J3=({isOpen:n,onClose:e,onLoginSuccess:t,onLoginFail:i})=>{const[o,a]=Fe.useState(""),[u,d]=Fe.useState("");if(!n)return null;const g=h=>{h.preventDefault(),o===qP&&u===BP?(t(),a(""),d("")):i()};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-[1000] flex items-center justify-center p-4 backdrop-blur-sm",children:w.jsxs("div",{className:"bg-ch-bg-medium p-8 rounded-xl shadow-neon max-w-sm w-full relative animate-fade-in border border-ch-primary/20",children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-ch-gray hover:text-ch-primary transition",children:w.jsx(bu,{size:24})}),w.jsx("div",{className:"flex items-center gap-2 mb-6 justify-center",children:w.jsx("div",{className:"bg-ch-primary/10 p-3 rounded-full",children:w.jsx(e2,{className:"text-ch-primary",size:28})})}),w.jsx("h4",{className:"text-2xl font-heading text-center text-white mb-2",children:"Panel Admina"}),w.jsx("p",{className:"text-sm text-ch-gray text-center mb-6",children:"Zaloguj si, aby zarzdza sklepem."}),w.jsxs("form",{onSubmit:g,className:"space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx(n2,{className:"absolute left-3 top-3.5 text-ch-gray",size:18}),w.jsx("input",{type:"email",placeholder:"Email",value:o,onChange:h=>a(h.target.value),required:!0,className:"w-full p-3 pl-10 rounded-lg bg-[#181818] border border-gray-700 focus:border-ch-primary focus:ring-1 focus:ring-ch-primary transition duration-200 outline-none text-white text-sm"})]}),w.jsxs("div",{className:"relative",children:[w.jsx(WP,{className:"absolute left-3 top-3.5 text-ch-gray",size:18}),w.jsx("input",{type:"password",placeholder:"Haso",value:u,onChange:h=>d(h.target.value),required:!0,className:"w-full p-3 pl-10 rounded-lg bg-[#181818] border border-gray-700 focus:border-ch-primary focus:ring-1 focus:ring-ch-primary transition duration-200 outline-none text-white text-sm"})]}),w.jsx("button",{type:"submit",className:"w-full bg-ch-secondary text-ch-bg-dark py-3 rounded-lg font-bold hover:bg-[#59b2cc] transition duration-300 transform active:scale-95 shadow-lg mt-2",children:"ZALOGUJ SI"})]}),w.jsxs("p",{className:"mt-4 text-[10px] text-center text-gray-600",children:["Demo Credentials: ",w.jsx("span",{className:"text-gray-500",children:"admin@demo.com / admin"})]})]})})},Y3=({notification:n,onClose:e})=>{Fe.useEffect(()=>{const i=setTimeout(()=>{e(n.id)},4e3);return()=>clearTimeout(i)},[n.id,e]);let t="bg-ch-primary";return n.type==="error"&&(t="bg-red-600"),n.type==="success"&&(t="bg-ch-secondary text-ch-bg-dark"),w.jsxs("div",{className:`${t} text-white px-4 py-3 rounded-lg shadow-xl mb-3 flex items-center justify-between min-w-[300px] animate-fade-in transition-all duration-300`,children:[w.jsxs("span",{className:"font-medium mr-2",children:[n.type==="success"&&"Sukces! ",n.type==="error"&&"Bd! ",n.type==="info"&&"Info: ",w.jsx("span",{className:"font-normal",children:n.message})]}),w.jsx("button",{onClick:()=>e(n.id),className:"hover:opacity-75",children:w.jsx(bu,{size:18})})]})},$3=({isOpen:n,onClose:e,items:t,total:i,onPaymentSuccess:o})=>{const[a,u]=Fe.useState("form"),[d,g]=Fe.useState({name:"",email:"",address:"",card:""});if(!n)return null;const h=v=>{v.preventDefault(),u("processing"),setTimeout(()=>{u("success"),setTimeout(()=>{o(),u("form"),g({name:"",email:"",address:"",card:""})},2500)},2e3)};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-[200] flex items-center justify-center p-4 backdrop-blur-sm",children:w.jsxs("div",{className:"bg-ch-bg-medium w-full max-w-2xl rounded-2xl shadow-neon border border-ch-secondary/30 overflow-hidden flex flex-col md:flex-row relative animate-fade-in",children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-ch-gray hover:text-white z-10",children:w.jsx(bu,{size:24})}),w.jsxs("div",{className:"md:w-1/3 bg-[#101010] p-6 border-r border-gray-800",children:[w.jsx("h4",{className:"text-ch-secondary font-heading text-xl mb-4",children:"Twj Koszyk"}),w.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar mb-4",children:t.map(v=>w.jsxs("div",{className:"flex justify-between text-sm",children:[w.jsx("span",{className:"text-gray-300 truncate w-24",children:v.name}),w.jsxs("span",{className:"text-gray-500",children:["x",v.quantity]}),w.jsxs("span",{className:"text-white",children:[(v.price*v.quantity).toFixed(0)," z"]})]},v.id))}),w.jsxs("div",{className:"border-t border-gray-700 pt-4 flex justify-between items-center text-lg font-bold",children:[w.jsx("span",{children:"Razem:"}),w.jsxs("span",{className:"text-ch-primary",children:[i.toFixed(2)," z"]})]})]}),w.jsxs("div",{className:"md:w-2/3 p-8 relative",children:[a==="form"&&w.jsxs("form",{onSubmit:h,className:"space-y-4",children:[w.jsxs("h3",{className:"text-2xl font-heading text-white mb-6 flex items-center gap-2",children:[w.jsx(BE,{className:"text-ch-primary"})," Patno"]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx("input",{type:"text",placeholder:"Imi i Nazwisko",required:!0,value:d.name,onChange:v=>g({...d,name:v.target.value}),className:"w-full bg-[#181818] border border-gray-700 p-3 rounded text-white focus:border-ch-secondary outline-none"}),w.jsx("input",{type:"email",placeholder:"Email",required:!0,value:d.email,onChange:v=>g({...d,email:v.target.value}),className:"w-full bg-[#181818] border border-gray-700 p-3 rounded text-white focus:border-ch-secondary outline-none"})]}),w.jsx("input",{type:"text",placeholder:"Adres dostawy",required:!0,value:d.address,onChange:v=>g({...d,address:v.target.value}),className:"w-full bg-[#181818] border border-gray-700 p-3 rounded text-white focus:border-ch-secondary outline-none"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",placeholder:"Numer Karty (Symulacja)",required:!0,value:d.card,onChange:v=>g({...d,card:v.target.value}),className:"w-full bg-[#181818] border border-gray-700 p-3 rounded text-white focus:border-ch-secondary outline-none pl-10"}),w.jsx(BE,{className:"absolute left-3 top-3.5 text-gray-500",size:18})]}),w.jsxs("div",{className:"flex gap-4 text-xs text-gray-500 py-2",children:[w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(v2,{size:14})," Darmowa dostawa"]}),w.jsx("div",{className:"flex items-center gap-1",children:" Szyfrowanie SSL"})]}),w.jsxs("button",{type:"submit",className:"w-full bg-ch-primary text-ch-bg-dark font-bold py-4 rounded-xl hover:bg-[#d900e3] transition shadow-neon mt-4",children:["ZAPA ",i.toFixed(2)," PLN"]})]}),a==="processing"&&w.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[w.jsx(Ag,{className:"animate-spin text-ch-secondary",size:64}),w.jsx("p",{className:"text-xl font-heading animate-pulse",children:"Przetwarzanie patnoci..."})]}),a==="success"&&w.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4 text-center",children:[w.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center shadow-neon",children:w.jsx(BC,{className:"text-white",size:48})}),w.jsx("h3",{className:"text-3xl font-heading text-white",children:"Sukces!"}),w.jsx("p",{className:"text-gray-400",children:"Twoje zamwienie zostao przyjte do realizacji."})]})]})]})})},Q3=({cmsData:n})=>w.jsxs("section",{id:"custom",className:"py-24 bg-cover bg-center bg-no-repeat bg-fixed relative",style:{backgroundImage:`url('${n.customBgUrl}')`},children:[w.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm z-0"}),w.jsxs("div",{className:"max-w-4xl mx-auto px-4 animate-fade-in relative z-10 text-center",children:[w.jsx("h3",{className:"text-4xl font-heading text-white mb-4 drop-shadow-lg",children:n.customTitle}),w.jsxs("p",{className:"text-lg text-ch-gray mb-8",children:["Wybierz Keycapy, dobierz ulubione Switche (np. ",w.jsx("strong",{children:"Gateron Yellow"}),") i spersonalizuj kabel. Dostarczamy ",w.jsx("strong",{children:"niszowe czci"}),", ktrych brakuje w gigantach rynkowych."]}),w.jsx("a",{href:"#products",className:"inline-block bg-ch-primary text-ch-bg-dark py-3 px-8 rounded-xl font-bold text-lg hover:bg-[#8d5ed8] transition duration-300 shadow-neon transform hover:scale-[1.05]",children:"Przegldaj Switche i Keycapy"})]})]}),X3=({cmsData:n})=>w.jsxs("section",{id:"about",className:"py-24 border-t border-gray-800 bg-cover bg-center bg-no-repeat relative",style:{backgroundImage:`url('${n.aboutBgUrl}')`},children:[w.jsx("div",{className:"absolute inset-0 bg-ch-bg-dark/95 z-0"}),w.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center relative z-10",children:[w.jsx("h3",{className:"text-4xl font-heading text-ch-secondary mb-12",children:n.aboutTitle}),w.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[w.jsxs("div",{className:"p-6 bg-[#181818]/90 rounded-xl shadow-lg border-l-4 border-ch-primary hover:shadow-neon transition duration-300 transform hover:-translate-y-1",children:[w.jsx("h4",{className:"text-2xl font-heading text-ch-primary mb-3",children:" Parametry E-Sportowe"}),w.jsx("p",{className:"text-ch-gray text-left",children:"Filtruj sprzt po parametrach kluczowych dla gracza (Polling Rate, sia nacisku w gramach). Nasze opisy to fakty."})]}),w.jsxs("div",{className:"p-6 bg-[#181818]/90 rounded-xl shadow-lg border-l-4 border-ch-secondary hover:shadow-cyan-glow transition duration-300 transform hover:-translate-y-1",children:[w.jsx("h4",{className:"text-2xl font-heading text-ch-secondary mb-3",children:" Kompatybilno Custom"}),w.jsx("p",{className:"text-ch-gray text-left",children:"Wszystkie czci, od switchy po kable, s sprawdzone pod ktem kompatybilnoci z naszym asortymentem klawiatur."})]}),w.jsxs("div",{className:"p-6 bg-[#181818]/90 rounded-xl shadow-lg border-l-4 border-ch-primary hover:shadow-neon transition duration-300 transform hover:-translate-y-1",children:[w.jsx("h4",{className:"text-2xl font-heading text-ch-primary mb-3",children:" Zero Ryzyka"}),w.jsx("p",{className:"text-ch-gray text-left",children:"Sprzedajemy tylko to, co przeszo nasz weryfikacj jakociow. Koniec z przypadkowymi modelami i zymi sensorami."})]})]})]})]}),W3=({cmsData:n})=>{const[e,t]=Fe.useState("idle"),i=o=>{o.preventDefault(),t("submitting"),setTimeout(()=>{t("success"),setTimeout(()=>{t("idle"),o.target.reset()},3e3)},1500)};return w.jsxs("section",{id:"contact",className:"py-24 relative bg-cover bg-center",style:{backgroundImage:`url('${n.contactBgUrl}')`},children:[w.jsx("div",{className:"absolute inset-0 bg-black/85 z-0"}),w.jsxs("div",{className:"max-w-xl mx-auto px-4 text-center relative z-10",children:[w.jsx("h3",{className:"text-4xl font-heading text-ch-secondary mb-4",children:n.contactTitle}),w.jsx("p",{className:"text-lg text-ch-gray mb-10",children:"Nie jestemy call center. Pomoemy Ci wybra sprzt, ktry faktycznie poprawi Twoje wyniki w grach."}),w.jsx("form",{className:"space-y-4 relative",onSubmit:i,children:e==="success"?w.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-400 p-8 rounded-xl flex flex-col items-center justify-center h-[320px] animate-fade-in",children:[w.jsx(BC,{size:64,className:"mb-4 text-green-400"}),w.jsx("h4",{className:"text-2xl font-bold mb-2",children:"Wiadomo Wysana!"}),w.jsx("p",{children:"Odezwiemy si najszybciej jak to moliwe."})]}):w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"text",placeholder:"Imi",required:!0,disabled:e==="submitting",className:"w-full p-3 rounded-lg bg-[#141414] border border-gray-700 focus:border-ch-primary focus:ring-1 focus:ring-ch-primary transition duration-200 text-white outline-none disabled:opacity-50"}),w.jsx("input",{type:"email",placeholder:"E-mail",required:!0,disabled:e==="submitting",className:"w-full p-3 rounded-lg bg-[#141414] border border-gray-700 focus:border-ch-primary focus:ring-1 focus:ring-ch-primary transition duration-200 text-white outline-none disabled:opacity-50"}),w.jsx("textarea",{placeholder:"Tre pytania...",rows:5,required:!0,disabled:e==="submitting",className:"w-full p-3 rounded-lg bg-[#141414] border border-gray-700 focus:border-ch-primary focus:ring-1 focus:ring-ch-primary transition duration-200 text-white outline-none disabled:opacity-50"}),w.jsx("button",{type:"submit",disabled:e==="submitting",className:"w-full bg-ch-primary text-ch-bg-dark py-3 px-8 rounded-xl font-bold text-lg hover:bg-[#8d5ed8] transition duration-300 shadow-neon transform hover:scale-[1.01] flex items-center justify-center gap-2 disabled:bg-gray-600 disabled:cursor-not-allowed",children:e==="submitting"?w.jsxs(w.Fragment,{children:[w.jsx(Ag,{className:"animate-spin",size:20})," Wysyanie..."]}):w.jsxs(w.Fragment,{children:[w.jsx(h2,{size:20})," Wylij Zapytanie"]})})]})})]})]})},Z3=()=>w.jsxs("footer",{className:"bg-black pt-10 pb-6 border-t-2 border-ch-primary/50",children:[w.jsxs("div",{className:"max-w-7xl mx-auto px-4 grid md:grid-cols-4 sm:grid-cols-2 gap-8 text-ch-gray",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-xl font-heading text-ch-primary mb-4",children:"Kategorie"}),w.jsxs("ul",{className:"space-y-2",children:[w.jsx("li",{className:"hover:text-ch-primary transition cursor-pointer",children:"Klawiatury"}),w.jsx("li",{className:"hover:text-ch-secondary transition cursor-pointer",children:"Myszki"}),w.jsx("li",{className:"hover:text-ch-primary transition cursor-pointer",children:"Switche"}),w.jsx("li",{className:"hover:text-ch-secondary transition cursor-pointer",children:"Keycapy"})]})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-xl font-heading text-ch-secondary mb-4",children:"Obsuga Klienta"}),w.jsxs("ul",{className:"space-y-2",children:[w.jsx("li",{className:"hover:text-ch-secondary transition cursor-pointer",children:"Kontakt"}),w.jsx("li",{className:"hover:text-ch-primary transition cursor-pointer",children:"FAQ Techniczne"}),w.jsx("li",{className:"hover:text-ch-secondary transition cursor-pointer",children:"Zwroty i Reklamacje"})]})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-xl font-heading text-ch-primary mb-4",children:"O Click House"}),w.jsxs("ul",{className:"space-y-2",children:[w.jsx("li",{className:"hover:text-ch-primary transition cursor-pointer",children:"Nasza Misja"}),w.jsx("li",{className:"hover:text-ch-secondary transition cursor-pointer",children:"Blog / Poradniki"}),w.jsx("li",{className:"hover:text-ch-primary transition cursor-pointer",children:"Praca"})]})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-xl font-heading text-ch-secondary mb-4",children:"Spoeczno"}),w.jsx("p",{className:"mb-4",children:"Docz do nas:"}),w.jsxs("div",{className:"flex space-x-4 text-2xl",children:[w.jsx("a",{href:"#",className:"hover:text-ch-primary transition",children:" Discord"}),w.jsx("a",{href:"#",className:"hover:text-ch-secondary transition",children:" YouTube"})]})]})]}),w.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-8 pt-4 border-t border-gray-800 text-center text-sm text-gray-500",children:" 2025 Click House. Wszelkie prawa zastrzeone."})]}),j3=()=>{const[n,e]=Fe.useState(null),[t,i]=Fe.useState(()=>{const me=localStorage.getItem("ch_cart");return me?JSON.parse(me):[]}),[o,a]=Fe.useState(Gp),[u,d]=Fe.useState(()=>{const me=localStorage.getItem("ch_products");if(me)try{return JSON.parse(me)}catch(H){return console.error("Error parsing products from local storage",H),FE}return FE}),[g,h]=Fe.useState([]),[v,T]=Fe.useState(!1),[S,R]=Fe.useState(!1),[P,F]=Fe.useState(!1),[L,$]=Fe.useState(!1),[ne,Z]=Fe.useState(!1),ae=()=>t.reduce((me,H)=>me+H.price*H.quantity,0);Fe.useEffect(()=>{if(FP(),_a){const me=ZN(_a,H=>{e(H||null)});return()=>me()}},[]),Fe.useEffect(()=>{localStorage.setItem("ch_cart",JSON.stringify(t))},[t]),Fe.useEffect(()=>{localStorage.setItem("ch_products",JSON.stringify(u))},[u]),Fe.useEffect(()=>{if(!Ui)return;const me=ff(Ui,`artifacts/${Jl}/public/data/cms_settings/global`),H=OE(me,Te=>{Te.exists()?a({...Gp,...Te.data()}):ne&&LE(me,Gp,{merge:!0})},Te=>console.error("CMS Error",Te)),oe=vP(Ui,`artifacts/${Jl}/public/products`),le=OE(oe,Te=>{const Ve=[];Te.forEach(O=>{const ee=O.data(),ce=ee.id||parseInt(O.id)||Date.now();Ve.push({...ee,id:ce})}),Ve.length>0&&d(Ve.sort((O,ee)=>Number(O.id)-Number(ee.id)))});return()=>{H(),le()}},[ne]);const X=(me,H)=>{const oe=Date.now().toString()+Math.random().toString();h(le=>[...le,{id:oe,message:me,type:H}])},de=me=>{h(H=>H.filter(oe=>oe.id!==me))},M=me=>{const H=u.find(oe=>String(oe.id)===String(me));if(!H){X("Bd produktu.","error");return}i(oe=>{const le=oe.findIndex(Te=>String(Te.productId)===String(me));if(le>-1){const Te=[...oe];return Te[le].quantity+=1,Te}else{const Te={id:`local-${Date.now()}-${Math.random()}`,productId:H.id,name:H.name,price:H.price,quantity:1,timestamp:Date.now()};return[...oe,Te]}}),X(`Dodano ${H.name}!`,"success"),T(!0)},x=(me,H)=>{i(oe=>oe.map(le=>le.id===me?{...le,quantity:Math.max(0,le.quantity+H)}:le).filter(le=>le.quantity>0))},b=me=>{i(H=>H.filter(oe=>oe.id!==me))},U=async()=>{i([]),localStorage.removeItem("ch_cart")},V=async me=>{if(a(me),Ui)try{await kP(ff(Ui,`artifacts/${Jl}/public/data/cms_settings/global`),{...me}),X("Zapisano ustawienia!","success")}catch{X("Bd zapisu.","error")}else X("Zapisano ustawienia (Tryb Demo)!","success")},q=async me=>{const H="id"in me?me.id:Date.now(),oe={...me,id:H};if(d(le=>{const Te=le.findIndex(Ve=>Ve.id===H);if(Te>=0){const Ve=[...le];return Ve[Te]=oe,Ve}return[...le,oe]}),Ui)try{const le=ff(Ui,`artifacts/${Jl}/public/products/${H}`);await LE(le,oe),X("Produkt zapisany!","success")}catch(le){console.error(le),X("Bd zapisu produktu w bazie.","error")}else X("Produkt zapisany (Tryb Demo)!","success")},D=async me=>{if(window.confirm("Czy na pewno chcesz usun ten produkt?"))if(d(H=>H.filter(oe=>oe.id!==me)),Ui)try{await VP(ff(Ui,`artifacts/${Jl}/public/products/${me}`)),X("Produkt usunity.","info")}catch{X("Bd usuwania z bazy.","error")}else X("Produkt usunity (Tryb Demo).","info")},xe=async()=>{await U(),$(!1),T(!1),X("Zamwienie zoone pomylnie!","success")};return w.jsxs("div",{className:"bg-ch-bg-dark text-ch-text-light min-h-screen",children:[w.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col items-end pointer-events-none",children:g.map(me=>w.jsx("div",{className:"pointer-events-auto",children:w.jsx(Y3,{notification:me,onClose:de})},me.id))}),ne&&w.jsx("div",{className:"bg-red-600 text-ch-bg-dark text-center py-2 font-bold text-sm tracking-wider shadow-lg cursor-pointer hover:bg-red-500",onClick:()=>R(!0),children:" TRYB ADMINA: Kliknij tutaj, aby otworzy panel CMS"}),w.jsx(I2,{cartCount:t.reduce((me,H)=>me+H.quantity,0),cartTotal:ae(),onCartClick:()=>T(!0),onAdminClick:()=>R(!0),onLoginClick:()=>F(!0),isAdmin:ne}),w.jsx(w2,{data:o}),w.jsx(R2,{products:u,title:o.productsTitle,onAddToCart:M}),w.jsx(Q3,{cmsData:o}),w.jsx(X3,{cmsData:o}),w.jsx(W3,{cmsData:o}),w.jsx(Z3,{}),w.jsx(b2,{isOpen:v,onClose:()=>T(!1),items:t,userId:(n==null?void 0:n.uid)||"Go",onUpdateQuantity:x,onRemove:b,onCheckout:()=>$(!0)}),w.jsx($3,{isOpen:L,onClose:()=>$(!1),items:t,total:ae(),onPaymentSuccess:xe}),w.jsx(K3,{isOpen:S,onClose:()=>R(!1),data:o,products:u,onSaveData:V,onSaveProduct:q,onDeleteProduct:D}),w.jsx(J3,{isOpen:P,onClose:()=>F(!1),onLoginSuccess:()=>{Z(!0),F(!1),X("Zalogowano.","success")},onLoginFail:()=>X("Nieprawidowy klucz.","error")})]})},LI=document.getElementById("root");if(!LI)throw new Error("Could not find root element to mount to");const e6=IR.createRoot(LI);e6.render(w.jsx(yR.StrictMode,{children:w.jsx(j3,{})}));
